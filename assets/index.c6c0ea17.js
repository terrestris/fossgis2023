import{C as oo,S as nr,F as ar,a as pt,I as ha,b as so,T as uo}from"./featureloader.92da648c.js";import{C as lo,U as po,c as fo,V as cr,d as co,M as ho,a as Na,e as vo,R as mo}from"./VectorTile.f3b960bc.js";import{b as yo,E as Er,c as gn,L as Ga,g as Ua,f as va,V as ma,i as go,d as U,e as bo,h as xo,j as Dt,k as Lt,m as ya,n as wo,o as zo,p as Va,q as _o,r as Za,l as ko,u as Eo,S as Tr,s as To,v as ke,w as bn,x as Ba,T as Co,y as ga,z as dr,A as xn,D as Io,B as $r,C as Re,F as Mo,G as Ro,H as So,J as Ha,K as wn,N as Fo,O as zn,P as Ao,Q as qo,R as Po,U as jo}from"./Source.13d28e10.js";import{G as Do,V as Ja,a as hr,b as Lo}from"./Vector.9be7778c.js";import{c as Oo,T as No,r as Go,E as Uo,a as Vo,I as Zo,g as Bo,b as Ho,d as Jo,R as Xo,e as Ko,f as Wo,h as Xa,i as Yo}from"./TileEventType.16115d42.js";import{B as Qo}from"./BaseTile.8715c233.js";import{j as $o}from"./net.792eb7fa.js";class es extends yo{constructor(e,r,n,a){super(),this.extent=e,this.pixelRatio_=n,this.resolution=r,this.state=a}changed(){this.dispatchEvent(Er.CHANGE)}getExtent(){return this.extent}getImage(){return gn()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){gn()}}const Ka=es;class ts extends Ga{constructor(e){e=e||{},super(e)}}const rs=ts;class ns extends oo{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const r=e.layerStatesArray[e.layerIndex],n=e.pixelRatio,a=e.viewState,i=a.resolution,o=this.getLayer().getSource(),s=e.viewHints;let l=e.extent;if(r.extent!==void 0&&(l=Ua(l,va(r.extent,a.projection))),!s[ma.ANIMATING]&&!s[ma.INTERACTING]&&!go(l))if(o){const u=a.projection,p=o.getImage(l,i,n,u);p&&(this.loadImage(p)?this.image_=p:p.getState()===U.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const r=this.frameState;if(!r)return null;const n=this.getLayer(),a=bo(r.pixelToCoordinateTransform,e.slice()),i=n.getExtent();if(i&&!xo(i,a))return null;const o=this.image_.getExtent(),s=this.getImage(),l=Dt(o),u=Math.floor(s.width*((a[0]-o[0])/l));if(u<0||u>=s.width)return null;const p=Lt(o),f=Math.floor(s.height*((o[3]-a[1])/p));return f<0||f>=s.height?null:this.getImageData(s,u,f)}renderFrame(e,r){const n=this.image_,a=n.getExtent(),i=n.getResolution(),o=n.getPixelRatio(),s=e.layerStatesArray[e.layerIndex],l=e.pixelRatio,u=e.viewState,p=u.center,f=u.resolution,c=l*i/(f*o),d=e.extent,v=u.resolution,y=u.rotation,g=Math.round(Dt(d)/v*l),h=Math.round(Lt(d)/v*l);ya(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,y,-g/2,-h/2),wo(this.inversePixelTransform,this.pixelTransform);const k=zo(this.pixelTransform);this.useContainer(r,k,this.getBackground(e));const C=this.context,w=C.canvas;w.width!=g||w.height!=h?(w.width=g,w.height=h):this.containerReused||C.clearRect(0,0,g,h);let q=!1,D=!0;if(s.extent){const P=va(s.extent,u.projection);D=Va(P,e.extent),q=D&&!_o(P,e.extent),q&&this.clipUnrotated(C,e,P)}const M=this.getImage(),A=ya(this.tempTransform,g/2,h/2,c,c,0,o*(a[0]-p[0])/i,o*(p[1]-a[3])/i);this.renderedResolution=i*l/o;const L=M.width*A[0],I=M.height*A[3];if(this.getLayer().getSource().getInterpolate()||(C.imageSmoothingEnabled=!1),this.preRender(C,e),D&&L>=.5&&I>=.5){const P=A[4],V=A[5],B=s.opacity;let j;B!==1&&(j=C.globalAlpha,C.globalAlpha=B),C.drawImage(M,0,0,+M.width,+M.height,P,V,L,I),B!==1&&(C.globalAlpha=j)}return this.postRender(C,e),q&&C.restore(),C.imageSmoothingEnabled=!0,k!==w.style.transform&&(w.style.transform=k),this.container}}const as=ns;class is extends rs{constructor(e){super(e)}createRenderer(){return new as(this)}getData(e){return super.getData(e)}}const Wa=is;class os extends Ka{constructor(e,r,n,a,i){const o=i!==void 0?U.IDLE:U.LOADED;super(e,r,n,o),this.loader_=i!==void 0?i:null,this.canvas_=a,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=U.ERROR):this.state=U.LOADED,this.changed()}load(){this.state==U.IDLE&&(this.state=U.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const ss=os;class us extends Ka{constructor(e,r,n,a,i,o,s){const l=e.getExtent(),u=r.getExtent(),p=u?Ua(n,u):n,f=Za(p),c=Oo(e,r,f,a),d=Uo,v=new No(e,r,p,l,c*d,a),y=v.calculateSourceExtent(),g=o(y,c,i),h=g?U.IDLE:U.EMPTY,k=g?g.getPixelRatio():1;super(n,a,k,h),this.targetProj_=r,this.maxSourceExtent_=l,this.triangulation_=v,this.targetResolution_=a,this.targetExtent_=n,this.sourceImage_=g,this.sourcePixelRatio_=k,this.interpolate_=s,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==U.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==U.LOADED){const r=Dt(this.targetExtent_)/this.targetResolution_,n=Lt(this.targetExtent_)/this.targetResolution_;this.canvas_=Go(r,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=e,this.changed()}load(){if(this.state==U.IDLE){this.state=U.LOADING,this.changed();const e=this.sourceImage_.getState();e==U.LOADED||e==U.ERROR?this.reproject_():(this.sourceListenerKey_=ko(this.sourceImage_,Er.CHANGE,function(r){const n=this.sourceImage_.getState();(n==U.LOADED||n==U.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){Eo(this.sourceListenerKey_),this.sourceListenerKey_=null}}const ls=us,en={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ps extends Ba{constructor(e,r){super(e),this.image=r}}class fs extends Tr{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const r=this.getResolutions();if(r){const n=To(r,e,0);e=r[n]}return e}getImage(e,r,n,a){const i=this.getProjection();if(!i||!a||ke(i,a))return i&&(a=i),this.getImageInternal(e,r,n,a);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ke(this.reprojectedImage_.getProjection(),a)&&this.reprojectedImage_.getResolution()==r&&bn(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ls(i,a,e,r,n,(o,s,l)=>this.getImageInternal(o,s,l,i),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,r,n,a){return gn()}handleImageChange(e){const r=e.target;let n;switch(r.getState()){case U.LOADING:this.loading=!0,n=en.IMAGELOADSTART;break;case U.LOADED:this.loading=!1,n=en.IMAGELOADEND;break;case U.ERROR:this.loading=!1,n=en.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new ps(n,r))}}const Ya=fs;class cs extends Qo{constructor(e){super(e)}createRenderer(){return new lo(this)}}const Qa=cs;let $a=!0;try{new ImageData(10,10)}catch{$a=!1}let tn;function ds(t,e,r){if($a)return new ImageData(t,e,r);tn||(tn=document.createElement("canvas").getContext("2d"));const n=tn.createImageData(e,r);return n.data.set(t),n}function ei(t){let e=!0;try{new ImageData(10,10)}catch{e=!1}function r(n,a,i){return e?new ImageData(n,a,i):{data:n,width:a,height:i}}return function(n){const a=n.buffers,i=n.meta,o=n.imageOps,s=n.width,l=n.height,u=a.length,p=a[0].byteLength;if(o){const v=new Array(u);for(let g=0;g<u;++g)v[g]=r(new Uint8ClampedArray(a[g]),s,l);return t(v,i).data.buffer}const f=new Uint8ClampedArray(p),c=new Array(u),d=new Array(u);for(let v=0;v<u;++v)c[v]=new Uint8ClampedArray(a[v]),d[v]=[0,0,0,0];for(let v=0;v<p;v+=4){for(let g=0;g<u;++g){const h=c[g];d[g][0]=h[v],d[g][1]=h[v+1],d[g][2]=h[v+2],d[g][3]=h[v+3]}const y=t(d,i);f[v]=y[0],f[v+1]=y[1],f[v+2]=y[2],f[v+3]=y[3]}return f.buffer}}function hs(t,e){const n=Object.keys(t.lib||{}).map(function(i){return"const "+i+" = "+t.lib[i].toString()+";"}).concat(["const __minion__ = ("+ei.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),a=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(n.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return a.addEventListener("message",e),a}function vs(t,e){const r=ei(t.operation);let n=!1;return{postMessage:function(a){setTimeout(function(){n||e({data:{buffer:r(a),meta:a.meta}})},0)},terminate:function(){n=!0}}}class ms extends Io{constructor(e){super(),this._imageOps=!!e.imageOps;let r;e.threads===0?r=0:this._imageOps?r=1:r=e.threads||1;const n=new Array(r);if(r)for(let a=0;a<r;++a)n[a]=hs(e,this._onWorkerMessage.bind(this,a));else n[0]=vs(e,this._onWorkerMessage.bind(this,0));this._workers=n,this._queue=[],this._maxQueueLength=e.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(e,r,n){this._enqueue({inputs:e,meta:r,callback:n}),this._dispatch()}_enqueue(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||this._queue.length===0)return;const e=this._queue.shift();this._job=e;const r=e.inputs[0].width,n=e.inputs[0].height,a=e.inputs.map(function(l){return l.data.buffer}),i=this._workers.length;if(this._running=i,i===1){this._workers[0].postMessage({buffers:a,meta:e.meta,imageOps:this._imageOps,width:r,height:n},a);return}const o=e.inputs[0].data.length,s=4*Math.ceil(o/4/i);for(let l=0;l<i;++l){const u=l*s,p=[];for(let f=0,c=a.length;f<c;++f)p.push(a[f].slice(u,u+s));this._workers[l].postMessage({buffers:p,meta:e.meta,imageOps:this._imageOps,width:r,height:n},p)}}_onWorkerMessage(e,r){this.disposed||(this._dataLookup[e]=r.data,--this._running,this._running===0&&this._resolveJob())}_resolveJob(){const e=this._job,r=this._workers.length;let n,a;if(r===1)n=new Uint8ClampedArray(this._dataLookup[0].buffer),a=this._dataLookup[0].meta;else{const i=e.inputs[0].data.length;n=new Uint8ClampedArray(i),a=new Array(r);const o=4*Math.ceil(i/4/r);for(let s=0;s<r;++s){const l=this._dataLookup[s].buffer,u=s*o;n.set(new Uint8ClampedArray(l),u),a[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},e.callback(null,ds(n,e.inputs[0].width,e.inputs[0].height),a),this._dispatch()}disposeInternal(){for(let e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0}}const ba={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class xa extends Ba{constructor(e,r,n){super(e),this.extent=r.extent,this.resolution=r.viewState.resolution/r.pixelRatio,this.data=n}}class ti extends Ya{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=bs(e.sources);const r=this.changed.bind(this);for(let n=0,a=this.layers_.length;n<a;++n)this.layers_[n].addEventListener(Er.CHANGE,r);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new Co(function(){return 1},this.changed.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:ga(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:gs(this.layers_),pixelRatio:1,pixelToCoordinateTransform:ga(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:dr(this),renderTargets:{}},this.setAttributions(function(n){const a=[];for(let i=0,o=e.sources.length;i<o;++i){const s=e.sources[i],l=s instanceof Tr?s:s.getSource();if(!l)continue;const u=l.getAttributions();if(typeof u=="function"){const p=u(n);a.push.apply(a,p)}}return a.length!==0?a:null}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,r){this.processor_&&this.processor_.dispose(),this.processor_=new ms({operation:e,imageOps:this.operationType_==="image",queue:1,lib:r,threads:this.threads_}),this.changed()}updateFrameState_(e,r,n){const a=Object.assign({},this.frameState_);a.viewState=Object.assign({},a.viewState);const i=Za(e);a.size[0]=Math.ceil(Dt(e)/r),a.size[1]=Math.ceil(Lt(e)/r),a.extent=[i[0]-a.size[0]*r/2,i[1]-a.size[1]*r/2,i[0]+a.size[0]*r/2,i[1]+a.size[1]*r/2],a.time=Date.now();const o=a.viewState;return o.center=i,o.projection=n,o.resolution=r,a}allSourcesReady_(){let e=!0,r;for(let n=0,a=this.layers_.length;n<a;++n)if(r=this.layers_[n].getSource(),!r||r.getState()!=="ready"){e=!1;break}return e}getImage(e,r,n,a){if(!this.allSourcesReady_())return null;r=this.findNearestResolution(r);const i=this.updateFrameState_(e,r,a);if(this.requestedFrameState_=i,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();(r!==o||!bn(i.extent,s))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),i.tileQueue.loadMoreTiles(16,16),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,r=this.layers_.length,n=new Array(r);for(let i=0;i<r;++i){e.layerIndex=i,e.renderTargets={};const o=ys(this.layers_[i],e);if(o)n[i]=o;else return}const a={};this.dispatchEvent(new xa(ba.BEFOREOPERATIONS,e,a)),this.processor_.process(n,a,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,r,n,a){if(r||!n)return;const i=e.extent,o=e.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!bn(i,this.requestedFrameState_.extent))return;let s;if(this.renderedImageCanvas_)s=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(Dt(i)/o),u=Math.round(Lt(i)/o);s=xn(l,u),this.renderedImageCanvas_=new ss(i,o,1,s.canvas)}s.putImageData(n,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new xa(ba.AFTEROPERATIONS,e,a)),e.animate&&requestAnimationFrame(this.changed.bind(this))}getResolutions(e){if(!this.useResolutions_)return null;let r=super.getResolutions();if(!r)for(let n=0,a=this.layers_.length;n<a&&(r=this.layers_[n].getSource().getResolutions(e),!r);++n);return r}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}ti.prototype.dispose;let Pe=null;function ys(t,e){const r=t.getRenderer();if(!r)throw new Error("Unsupported layer type: "+t);if(!r.prepareFrame(e))return null;const n=e.size[0],a=e.size[1];if(n===0||a===0)return null;const i=r.renderFrame(e,null);let o;if(i instanceof HTMLCanvasElement)o=i;else{if(i&&(o=i.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===n&&o.height===a)return o.getContext("2d").getImageData(0,0,n,a)}if(!Pe)Pe=xn(n,a,void 0,{willReadFrequently:!0});else{const s=Pe.canvas;s.width!==n||s.height!==a?Pe=xn(n,a,void 0,{willReadFrequently:!0}):Pe.clearRect(0,0,n,a)}return Pe.drawImage(o,0,0,n,a),Pe.getImageData(0,0,n,a)}function gs(t){return t.map(function(e){return e.getLayerState()})}function bs(t){const e=t.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=xs(t[n]);return r}function xs(t){let e;return t instanceof Tr?t instanceof Vo?e=new Qa({source:t}):t instanceof Ya&&(e=new Wa({source:t})):e=t,e}const ws=ti;class zs extends po{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:_s,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Zo,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,r){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?r:{});for(const a in this.tileCacheForProjection){const i=this.tileCacheForProjection[a];i.expireCache(i==n?r:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!ke(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!ke(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const r=this.getProjection();if(this.tileGrid&&(!r||ke(r,e)))return this.tileGrid;const n=dr(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Bo(e)),this.tileGridForProjection[n]}getTileCacheForProjection(e){const r=this.getProjection();if(!r||ke(r,e))return this.tileCache;const n=dr(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Ho(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(e,r,n,a,i,o){const s=[e,r,n],l=this.getTileCoordForTileUrlFunction(s,i),u=l?this.tileUrlFunction(l,a,i):void 0,p=new this.tileClass(s,u!==void 0?$r.IDLE:$r.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=o,p.addEventListener(Er.CHANGE,this.handleTileChange.bind(this)),p}getTile(e,r,n,a,i){const o=this.getProjection();if(!o||!i||ke(o,i))return this.getTileInternal(e,r,n,a,o||i);const s=this.getTileCacheForProjection(i),l=[e,r,n];let u;const p=Jo(l);s.containsKey(p)&&(u=s.get(p));const f=this.getKey();if(u&&u.key==f)return u;const c=this.getTileGridForProjection(o),d=this.getTileGridForProjection(i),v=this.getTileCoordForTileUrlFunction(l,i),y=new Xo(o,c,i,d,l,v,this.getTilePixelRatio(a),this.getGutter(),(g,h,k,C)=>this.getTileInternal(g,h,k,C,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return y.key=f,u?(y.interimTile=u,y.refreshInterimChain(),s.replace(p,y)):s.set(p,y),y}getTileInternal(e,r,n,a,i){let o=null;const s=Ko(e,r,n),l=this.getKey();if(!this.tileCache.containsKey(s))o=this.createTile_(e,r,n,a,i,l),this.tileCache.set(s,o);else if(o=this.tileCache.get(s),o.key!=l){const u=o;o=this.createTile_(e,r,n,a,i,l),u.getState()==$r.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(s,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const r in this.tileCacheForProjection)this.tileCacheForProjection[r].clear();this.changed()}}setTileGridForProjection(e,r){const n=Re(e);if(n){const a=dr(n);a in this.tileGridForProjection||(this.tileGridForProjection[a]=r)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function _s(t,e){t.getImage().src=e}const ks=zs;class Es extends ks{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Re("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)$o(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const r=new XMLHttpRequest;r.addEventListener("load",this.onXHRLoad_.bind(this)),r.addEventListener("error",this.onXHRError_.bind(this)),r.open("GET",e.url),r.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Mo(!1,51)}onXHRLoad_(e){const r=e.target;if(!r.status||r.status>=200&&r.status<300){let n;try{n=JSON.parse(r.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const r=Re("EPSG:4326"),n=this.getProjection();let a;if(e.bounds!==void 0){const u=Ro(r,n);a=So(e.bounds,u)}const i=Wo(n),o=e.minzoom||0,s=e.maxzoom||22,l=Xa({extent:i,maxZoom:s,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=fo(e.tiles,l),e.attribution&&!this.getAttributions()){const u=a!==void 0?a:i;this.setAttributions(function(p){return Va(u,p.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const ri=Es;var Ts={},ni,wa={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Pt(t){return t=Math.round(t),t<0?0:t>255?255:t}function za(t){return t<0?0:t>1?1:t}function rn(t){return t[t.length-1]==="%"?Pt(parseFloat(t)/100*255):Pt(parseInt(t))}function ir(t){return t[t.length-1]==="%"?za(parseFloat(t)/100):za(parseFloat(t))}function nn(t,e,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?t+(e-t)*r*6:r*2<1?e:r*3<2?t+(e-t)*(2/3-r)*6:t}function Cs(t){var e=t.replace(/ /g,"").toLowerCase();if(e in wa)return wa[e].slice();if(e[0]==="#"){if(e.length===4){var r=parseInt(e.substr(1),16);return r>=0&&r<=4095?[(r&3840)>>4|(r&3840)>>8,r&240|(r&240)>>4,r&15|(r&15)<<4,1]:null}else if(e.length===7){var r=parseInt(e.substr(1),16);return r>=0&&r<=16777215?[(r&16711680)>>16,(r&65280)>>8,r&255,1]:null}return null}var n=e.indexOf("("),a=e.indexOf(")");if(n!==-1&&a+1===e.length){var i=e.substr(0,n),o=e.substr(n+1,a-(n+1)).split(","),s=1;switch(i){case"rgba":if(o.length!==4)return null;s=ir(o.pop());case"rgb":return o.length!==3?null:[rn(o[0]),rn(o[1]),rn(o[2]),s];case"hsla":if(o.length!==4)return null;s=ir(o.pop());case"hsl":if(o.length!==3)return null;var l=(parseFloat(o[0])%360+360)%360/360,u=ir(o[1]),p=ir(o[2]),f=p<=.5?p*(u+1):p+u-p*u,c=p*2-f;return[Pt(nn(c,f,l+1/3)*255),Pt(nn(c,f,l)*255),Pt(nn(c,f,l-1/3)*255),s];default:return null}}return null}try{ni=Ts.parseCSSColor=Cs}catch{}var J=function(e,r,n,a){a===void 0&&(a=1),this.r=e,this.g=r,this.b=n,this.a=a};J.parse=function(e){if(!!e){if(e instanceof J)return e;if(typeof e=="string"){var r=ni(e);if(!!r)return new J(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}};J.prototype.toString=function(){var e=this.toArray(),r=e[0],n=e[1],a=e[2],i=e[3];return"rgba("+Math.round(r)+","+Math.round(n)+","+Math.round(a)+","+i+")"};J.prototype.toArray=function(){var e=this,r=e.r,n=e.g,a=e.b,i=e.a;return i===0?[0,0,0,0]:[r*255/i,n*255/i,a*255/i,i]};J.prototype.toArray01=function(){var e=this,r=e.r,n=e.g,a=e.b,i=e.a;return i===0?[0,0,0,0]:[r/i,n/i,a/i,i]};J.prototype.toArray01PremultipliedAlpha=function(){var e=this,r=e.r,n=e.g,a=e.b,i=e.a;return[r,n,a,i]};J.black=new J(0,0,0,1);J.white=new J(1,1,1,1);J.transparent=new J(0,0,0,0);J.red=new J(1,0,0,1);J.blue=new J(0,0,1,1);var re=J;function Ot(t){return typeof t=="object"?["literal",t]:t}function Is(t,e){var r=t.stops;if(!r)return Ms(t,e);var n=r&&typeof r[0][0]=="object",a=n||t.property!==void 0,i=n||!a;return r=r.map(function(o){return!a&&e.tokens&&typeof o[1]=="string"?[o[0],As(o[1])]:[o[0],Ot(o[1])]}),n?Rs(t,e,r):i?Fs(t,e,r):_n(t,e,r)}function Ms(t,e){var r=["get",t.property];if(t.default===void 0)return e.type==="string"?["string",r]:r;if(e.type==="enum")return["match",r,Object.keys(e.values),r,t.default];var n=[e.type==="color"?"to-color":e.type,r,Ot(t.default)];return e.type==="array"&&n.splice(1,0,e.value,e.length||null),n}function An(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Rs(t,e,r){for(var n={},a={},i=[],o=0;o<r.length;o++){var s=r[o],l=s[0].zoom;n[l]===void 0&&(n[l]={zoom:l,type:t.type,property:t.property,default:t.default},a[l]=[],i.push(l)),a[l].push([s[0].value,s[1]])}var u=Pn({},e);if(u==="exponential"){for(var p=[An(t),["linear"],["zoom"]],f=0,c=i;f<c.length;f+=1){var d=c[f],v=_n(n[d],e,a[d]);ht(p,d,v,!1)}return p}else{for(var y=["step",["zoom"]],g=0,h=i;g<h.length;g+=1){var k=h[g],C=_n(n[k],e,a[k]);ht(y,k,C,!0)}return qn(y),y}}function Ss(t,e){if(t!==void 0)return t;if(e!==void 0)return e}function _a(t,e){var r=Ot(Ss(t.default,e.default));return r===void 0&&e.type==="resolvedImage"?"":r}function _n(t,e,r){var n=Pn(t,e),a=["get",t.property];if(n==="categorical"&&typeof r[0][0]=="boolean"){for(var i=["case"],o=0,s=r;o<s.length;o+=1){var l=s[o];i.push(["==",a,l[0]],l[1])}return i.push(_a(t,e)),i}else if(n==="categorical"){for(var u=["match",a],p=0,f=r;p<f.length;p+=1){var c=f[p];ht(u,c[0],c[1],!1)}return u.push(_a(t,e)),u}else if(n==="interval"){for(var d=["step",["number",a]],v=0,y=r;v<y.length;v+=1){var g=y[v];ht(d,g[0],g[1],!0)}return qn(d),t.default===void 0?d:["case",["==",["typeof",a],"number"],d,Ot(t.default)]}else if(n==="exponential"){for(var h=t.base!==void 0?t.base:1,k=[An(t),h===1?["linear"]:["exponential",h],["number",a]],C=0,w=r;C<w.length;C+=1){var q=w[C];ht(k,q[0],q[1],!1)}return t.default===void 0?k:["case",["==",["typeof",a],"number"],k,Ot(t.default)]}else throw new Error("Unknown property function type "+n)}function Fs(t,e,r,n){n===void 0&&(n=["zoom"]);var a=Pn(t,e),i,o=!1;if(a==="interval")i=["step",n],o=!0;else if(a==="exponential"){var s=t.base!==void 0?t.base:1;i=[An(t),s===1?["linear"]:["exponential",s],n]}else throw new Error('Unknown zoom function type "'+a+'"');for(var l=0,u=r;l<u.length;l+=1){var p=u[l];ht(i,p[0],p[1],o)}return qn(i),i}function qn(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function ht(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&t.length===2||t.push(e),t.push(r))}function Pn(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function As(t){for(var e=["concat"],r=/{([^{}]+)}/g,n=0,a=r.exec(t);a!==null;a=r.exec(t)){var i=t.slice(n,r.lastIndex-a[0].length);n=r.lastIndex,i.length>0&&e.push(i),e.push(["get",a[1]])}if(e.length===1)return t;if(n<t.length)e.push(t.slice(n));else if(e.length===2)return["to-string",e[1]];return e}var qs=function(t){function e(r,n){t.call(this,n),this.message=n,this.key=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),ue=qs,Nt=function(e,r){r===void 0&&(r=[]),this.parent=e,this.bindings={};for(var n=0,a=r;n<a.length;n+=1){var i=a[n],o=i[0],s=i[1];this.bindings[o]=s}};Nt.prototype.concat=function(e){return new Nt(this,e)};Nt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")};Nt.prototype.has=function(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1};var Ps=Nt,Cr={kind:"null"},m={kind:"number"},F={kind:"string"},R={kind:"boolean"},me={kind:"color"},vt={kind:"object"},S={kind:"value"},js={kind:"error"},Ir={kind:"collator"},Mr={kind:"formatted"},Bt={kind:"resolvedImage"};function ne(t,e){return{kind:"array",itemType:t,N:e}}function N(t){if(t.kind==="array"){var e=N(t.itemType);return typeof t.N=="number"?"array<"+e+", "+t.N+">":t.itemType.kind==="value"?"array":"array<"+e+">"}else return t.kind}var Ds=[Cr,m,F,R,me,Mr,vt,ne(S),Bt];function Gt(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Gt(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value")for(var r=0,n=Ds;r<n.length;r+=1){var a=n[r];if(!Gt(a,e))return null}}return"Expected "+N(t)+" but found "+N(e)+" instead."}function jn(t,e){return e.some(function(r){return r.kind===t.kind})}function Ut(t,e){return e.some(function(r){return r==="null"?t===null:r==="array"?Array.isArray(t):r==="object"?t&&!Array.isArray(t)&&typeof t=="object":r===typeof t})}var Dn=function(e,r,n){e?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Dn.prototype.compare=function(e,r){return this.collator.compare(e,r)};Dn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ln=Dn,kn=function(e,r,n,a,i){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=n,this.fontStack=a,this.textColor=i},ye=function(e){this.sections=e};ye.fromString=function(e){return new ye([new kn(e,null,null,null,null)])};ye.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})};ye.factory=function(e){return e instanceof ye?e:ye.fromString(e)};ye.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")};ye.prototype.serialize=function(){for(var e=["format"],r=0,n=this.sections;r<n.length;r+=1){var a=n[r];if(a.image){e.push(["image",a.image.name]);continue}e.push(a.text);var i={};a.fontStack&&(i["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(i["font-scale"]=a.scale),a.textColor&&(i["text-color"]=["rgba"].concat(a.textColor.toArray())),e.push(i)}return e};var gt=ye,Vt=function(e){this.name=e.name,this.available=e.available};Vt.prototype.toString=function(){return this.name};Vt.fromString=function(e){return e?new Vt({name:e,available:!1}):null};Vt.prototype.serialize=function(){return["image",this.name]};var bt=Vt;function ai(t,e,r,n){if(!(typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255)){var a=typeof n=="number"?[t,e,r,n]:[t,e,r];return"Invalid rgba value ["+a.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1."}function yr(t){if(t===null)return!0;if(typeof t=="string")return!0;if(typeof t=="boolean")return!0;if(typeof t=="number")return!0;if(t instanceof re)return!0;if(t instanceof Ln)return!0;if(t instanceof gt)return!0;if(t instanceof bt)return!0;if(Array.isArray(t)){for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(!yr(n))return!1}return!0}else if(typeof t=="object"){for(var a in t)if(!yr(t[a]))return!1;return!0}else return!1}function Z(t){if(t===null)return Cr;if(typeof t=="string")return F;if(typeof t=="boolean")return R;if(typeof t=="number")return m;if(t instanceof re)return me;if(t instanceof Ln)return Ir;if(t instanceof gt)return Mr;if(t instanceof bt)return Bt;if(Array.isArray(t)){for(var e=t.length,r,n=0,a=t;n<a.length;n+=1){var i=a[n],o=Z(i);if(!r)r=o;else{if(r===o)continue;r=S;break}}return ne(r||S,e)}else return vt}function jt(t){var e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof re||t instanceof gt||t instanceof bt?t.toString():JSON.stringify(t)}var Oe=function(e,r){this.type=e,this.value=r};Oe.parse=function(e,r){if(e.length!==2)return r.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!yr(e[1]))return r.error("invalid value");var n=e[1],a=Z(n),i=r.expectedType;return a.kind==="array"&&a.N===0&&i&&i.kind==="array"&&(typeof i.N!="number"||i.N===0)&&(a=i),new Oe(a,n)};Oe.prototype.evaluate=function(){return this.value};Oe.prototype.eachChild=function(){};Oe.prototype.outputDefined=function(){return!0};Oe.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof re?["rgba"].concat(this.value.toArray()):this.value instanceof gt?this.value.serialize():this.value};var gr=Oe,ii=function(e){this.name="ExpressionEvaluationError",this.message=e};ii.prototype.toJSON=function(){return this.message};var K=ii,an={string:F,number:m,boolean:R,object:vt},Ne=function(e,r){this.type=e,this.args=r};Ne.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=1,a,i=e[0];if(i==="array"){var o;if(e.length>2){var s=e[1];if(typeof s!="string"||!(s in an)||s==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);o=an[s],n++}else o=S;var l;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);l=e[2],n++}a=ne(o,l)}else a=an[i];for(var u=[];n<e.length;n++){var p=r.parse(e[n],n,S);if(!p)return null;u.push(p)}return new Ne(a,u)};Ne.prototype.evaluate=function(e){for(var r=0;r<this.args.length;r++){var n=this.args[r].evaluate(e),a=Gt(this.type,Z(n));if(a){if(r===this.args.length-1)throw new K("Expected value to be of type "+N(this.type)+", but found "+N(Z(n))+" instead.")}else return n}return null};Ne.prototype.eachChild=function(e){this.args.forEach(e)};Ne.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})};Ne.prototype.serialize=function(){var e=this.type,r=[e.kind];if(e.kind==="array"){var n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){r.push(n.kind);var a=e.N;(typeof a=="number"||this.args.length>1)&&r.push(a)}}return r.concat(this.args.map(function(i){return i.serialize()}))};var he=Ne,Ge=function(e){this.type=Mr,this.sections=e};Ge.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");for(var a=[],i=!1,o=1;o<=e.length-1;++o){var s=e[o];if(i&&typeof s=="object"&&!Array.isArray(s)){i=!1;var l=null;if(s["font-scale"]&&(l=r.parse(s["font-scale"],1,m),!l))return null;var u=null;if(s["text-font"]&&(u=r.parse(s["text-font"],1,ne(F)),!u))return null;var p=null;if(s["text-color"]&&(p=r.parse(s["text-color"],1,me),!p))return null;var f=a[a.length-1];f.scale=l,f.font=u,f.textColor=p}else{var c=r.parse(e[o],1,S);if(!c)return null;var d=c.type.kind;if(d!=="string"&&d!=="value"&&d!=="null"&&d!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,a.push({content:c,scale:null,font:null,textColor:null})}}return new Ge(a)};Ge.prototype.evaluate=function(e){var r=function(n){var a=n.content.evaluate(e);return Z(a)===Bt?new kn("",a,null,null,null):new kn(jt(a),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)};return new gt(this.sections.map(r))};Ge.prototype.eachChild=function(e){for(var r=0,n=this.sections;r<n.length;r+=1){var a=n[r];e(a.content),a.scale&&e(a.scale),a.font&&e(a.font),a.textColor&&e(a.textColor)}};Ge.prototype.outputDefined=function(){return!1};Ge.prototype.serialize=function(){for(var e=["format"],r=0,n=this.sections;r<n.length;r+=1){var a=n[r];e.push(a.content.serialize());var i={};a.scale&&(i["font-scale"]=a.scale.serialize()),a.font&&(i["text-font"]=a.font.serialize()),a.textColor&&(i["text-color"]=a.textColor.serialize()),e.push(i)}return e};var oi=Ge,Ue=function(e){this.type=Bt,this.input=e};Ue.parse=function(e,r){if(e.length!==2)return r.error("Expected two arguments.");var n=r.parse(e[1],1,F);return n?new Ue(n):r.error("No image name provided.")};Ue.prototype.evaluate=function(e){var r=this.input.evaluate(e),n=bt.fromString(r);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(r)>-1),n};Ue.prototype.eachChild=function(e){e(this.input)};Ue.prototype.outputDefined=function(){return!1};Ue.prototype.serialize=function(){return["image",this.input.serialize()]};var si=Ue,Ls={"to-boolean":R,"to-color":me,"to-number":m,"to-string":F},Ve=function(e,r){this.type=e,this.args=r};Ve.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return r.error("Expected one argument.");for(var a=Ls[n],i=[],o=1;o<e.length;o++){var s=r.parse(e[o],o,S);if(!s)return null;i.push(s)}return new Ve(a,i)};Ve.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var r,n,a=0,i=this.args;a<i.length;a+=1){var o=i[a];if(r=o.evaluate(e),n=null,r instanceof re)return r;if(typeof r=="string"){var s=e.parseColor(r);if(s)return s}else if(Array.isArray(r)&&(r.length<3||r.length>4?n="Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":n=ai(r[0],r[1],r[2],r[3]),!n))return new re(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new K(n||"Could not parse color from value '"+(typeof r=="string"?r:String(JSON.stringify(r)))+"'")}else if(this.type.kind==="number"){for(var l=null,u=0,p=this.args;u<p.length;u+=1){var f=p[u];if(l=f.evaluate(e),l===null)return 0;var c=Number(l);if(!isNaN(c))return c}throw new K("Could not convert "+JSON.stringify(l)+" to number.")}else return this.type.kind==="formatted"?gt.fromString(jt(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?bt.fromString(jt(this.args[0].evaluate(e))):jt(this.args[0].evaluate(e))};Ve.prototype.eachChild=function(e){this.args.forEach(e)};Ve.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})};Ve.prototype.serialize=function(){if(this.type.kind==="formatted")return new oi([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new si(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(r){e.push(r.serialize())}),e};var dt=Ve,Os=["Unknown","Point","LineString","Polygon"],Se=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};Se.prototype.id=function(){return this.feature&&this.feature.id!==void 0?this.feature.id:null};Se.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Os[this.feature.type]:this.feature.type:null};Se.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null};Se.prototype.canonicalID=function(){return this.canonical};Se.prototype.properties=function(){return this.feature&&this.feature.properties||{}};Se.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,r=this.featureDistanceData.scale,n=this.featureTileCoord,a=n.x,i=n.y,o=a*r-e[0],s=i*r-e[1],l=this.featureDistanceData.bearing[0],u=this.featureDistanceData.bearing[1],p=l*o+u*s;return p}return 0};Se.prototype.parseColor=function(e){var r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=re.parse(e)),r};var ui=Se,oe=function(e,r,n,a){this.name=e,this.type=r,this._evaluate=n,this.args=a};oe.prototype.evaluate=function(e){return this._evaluate(e,this.args)};oe.prototype.eachChild=function(e){this.args.forEach(e)};oe.prototype.outputDefined=function(){return!1};oe.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))};oe.parse=function(e,r){var n,a=e[0],i=oe.definitions[a];if(!i)return r.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,l=s.filter(function(B){var j=B[0];return!Array.isArray(j)||j.length===e.length-1}),u=null,p=0,f=l;p<f.length;p+=1){var c=f[p],d=c[0],v=c[1];u=new hi(r.registry,r.path,null,r.scope);for(var y=[],g=!1,h=1;h<e.length;h++){var k=e[h],C=Array.isArray(d)?d[h-1]:d.type,w=u.parse(k,1+y.length,C);if(!w){g=!0;break}y.push(w)}if(!g){if(Array.isArray(d)&&d.length!==y.length){u.error("Expected "+d.length+" arguments, but found "+y.length+" instead.");continue}for(var q=0;q<y.length;q++){var D=Array.isArray(d)?d[q]:d.type,M=y[q];u.concat(q+1).checkSubtype(D,M.type)}if(u.errors.length===0)return new oe(a,o,v,y)}}if(l.length===1)(n=r.errors).push.apply(n,u.errors);else{for(var A=l.length?l:s,L=A.map(function(B){var j=B[0];return Ns(j)}).join(" | "),I=[],P=1;P<e.length;P++){var V=r.parse(e[P],1+I.length);if(!V)return null;I.push(N(V.type))}r.error("Expected arguments of type "+L+", but found ("+I.join(", ")+") instead.")}return null};oe.register=function(e,r){oe.definitions=r;for(var n in r)e[n]=oe};function Ns(t){return Array.isArray(t)?"("+t.map(N).join(", ")+")":"("+N(t.type)+"...)"}var xt=oe,Ze=function(e,r,n){this.type=Ir,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=r};Ze.parse=function(e,r){if(e.length!==2)return r.error("Expected one argument.");var n=e[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");var a=r.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,R);if(!a)return null;var i=r.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,R);if(!i)return null;var o=null;return n.locale&&(o=r.parse(n.locale,1,F),!o)?null:new Ze(a,i,o)};Ze.prototype.evaluate=function(e){return new Ln(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)};Ze.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)};Ze.prototype.outputDefined=function(){return!1};Ze.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var li=Ze,Te=8192;function On(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Gs(t){return(180+t)/360}function Us(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function br(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Vs(t,e){var r=Gs(t[0]),n=Us(t[1]),a=Math.pow(2,e.z);return[Math.round(r*a*Te),Math.round(n*a*Te)]}function Zs(t,e,r){var n=t[0]-e[0],a=t[1]-e[1],i=t[0]-r[0],o=t[1]-r[1];return n*o-i*a===0&&n*i<=0&&a*o<=0}function Bs(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function Nn(t,e){for(var r=!1,n=0,a=e.length;n<a;n++)for(var i=e[n],o=0,s=i.length;o<s-1;o++){if(Zs(t,i[o],i[o+1]))return!1;Bs(t,i[o],i[o+1])&&(r=!r)}return r}function Hs(t,e){for(var r=0;r<e.length;r++)if(Nn(t,e[r]))return!0;return!1}function Js(t,e){return t[0]*e[1]-t[1]*e[0]}function ka(t,e,r,n){var a=t[0]-r[0],i=t[1]-r[1],o=e[0]-r[0],s=e[1]-r[1],l=n[0]-r[0],u=n[1]-r[1],p=a*u-l*i,f=o*u-l*s;return p>0&&f<0||p<0&&f>0}function Xs(t,e,r,n){var a=[e[0]-t[0],e[1]-t[1]],i=[n[0]-r[0],n[1]-r[1]];return Js(i,a)===0?!1:!!(ka(t,e,r,n)&&ka(r,n,t,e))}function Ks(t,e,r){for(var n=0,a=r;n<a.length;n+=1)for(var i=a[n],o=0;o<i.length-1;++o)if(Xs(t,e,i[o],i[o+1]))return!0;return!1}function pi(t,e){for(var r=0;r<t.length;++r)if(!Nn(t[r],e))return!1;for(var n=0;n<t.length-1;++n)if(Ks(t[n],t[n+1],e))return!1;return!0}function Ws(t,e){for(var r=0;r<e.length;r++)if(pi(t,e[r]))return!0;return!1}function Gn(t,e,r){for(var n=[],a=0;a<t.length;a++){for(var i=[],o=0;o<t[a].length;o++){var s=Vs(t[a][o],r);On(e,s),i.push(s)}n.push(i)}return n}function fi(t,e,r){for(var n=[],a=0;a<t.length;a++){var i=Gn(t[a],e,r);n.push(i)}return n}function ci(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){var a=n*.5,i=t[0]-r[0]>a?-n:r[0]-t[0]>a?n:0;i===0&&(i=t[0]-r[2]>a?-n:r[2]-t[0]>a?n:0),t[0]+=i}On(e,t)}function Ys(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}function Ea(t,e,r,n){var a=Math.pow(2,n.z)*Te,i=[n.x*Te,n.y*Te],o=[];if(!t)return o;for(var s=0,l=t;s<l.length;s+=1)for(var u=l[s],p=0,f=u;p<f.length;p+=1){var c=f[p],d=[c.x+i[0],c.y+i[1]];ci(d,e,r,a),o.push(d)}return o}function Ta(t,e,r,n){var a=Math.pow(2,n.z)*Te,i=[n.x*Te,n.y*Te],o=[];if(!t)return o;for(var s=0,l=t;s<l.length;s+=1){for(var u=l[s],p=[],f=0,c=u;f<c.length;f+=1){var d=c[f],v=[d.x+i[0],d.y+i[1]];On(e,v),p.push(v)}o.push(p)}if(e[2]-e[0]<=a/2){Ys(e);for(var y=0,g=o;y<g.length;y+=1)for(var h=g[y],k=0,C=h;k<C.length;k+=1){var w=C[k];ci(w,e,r,a)}}return o}function Qs(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if(!a)return!1;if(e.type==="Polygon"){var i=Gn(e.coordinates,n,a),o=Ea(t.geometry(),r,n,a);if(!br(r,n))return!1;for(var s=0,l=o;s<l.length;s+=1){var u=l[s];if(!Nn(u,i))return!1}}if(e.type==="MultiPolygon"){var p=fi(e.coordinates,n,a),f=Ea(t.geometry(),r,n,a);if(!br(r,n))return!1;for(var c=0,d=f;c<d.length;c+=1){var v=d[c];if(!Hs(v,p))return!1}}return!0}function $s(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if(!a)return!1;if(e.type==="Polygon"){var i=Gn(e.coordinates,n,a),o=Ta(t.geometry(),r,n,a);if(!br(r,n))return!1;for(var s=0,l=o;s<l.length;s+=1){var u=l[s];if(!pi(u,i))return!1}}if(e.type==="MultiPolygon"){var p=fi(e.coordinates,n,a),f=Ta(t.geometry(),r,n,a);if(!br(r,n))return!1;for(var c=0,d=f;c<d.length;c+=1){var v=d[c];if(!Ws(v,p))return!1}}return!0}var ve=function(e,r){this.type=R,this.geojson=e,this.geometries=r};ve.parse=function(e,r){if(e.length!==2)return r.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(yr(e[1])){var n=e[1];if(n.type==="FeatureCollection")for(var a=0;a<n.features.length;++a){var i=n.features[a].geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new ve(n,n.features[a].geometry)}else if(n.type==="Feature"){var o=n.geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new ve(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new ve(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")};ve.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Qs(e,this.geometries);if(e.geometryType()==="LineString")return $s(e,this.geometries)}return!1};ve.prototype.eachChild=function(){};ve.prototype.outputDefined=function(){return!0};ve.prototype.serialize=function(){return["within",this.geojson]};var Un=ve;function Rr(t){if(t instanceof xt){if(t.name==="get"&&t.args.length===1)return!1;if(t.name==="feature-state")return!1;if(t.name==="has"&&t.args.length===1)return!1;if(t.name==="properties"||t.name==="geometry-type"||t.name==="id")return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Un)return!1;var e=!0;return t.eachChild(function(r){e&&!Rr(r)&&(e=!1)}),e}function Vn(t){if(t instanceof xt&&t.name==="feature-state")return!1;var e=!0;return t.eachChild(function(r){e&&!Vn(r)&&(e=!1)}),e}function Zn(t,e){if(t instanceof xt&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild(function(n){r&&!Zn(n,e)&&(r=!1)}),r}var Be=function(e,r){this.type=r.type,this.name=e,this.boundExpression=r};Be.parse=function(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");var n=e[1];return r.scope.has(n)?new Be(n,r.scope.get(n)):r.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)};Be.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)};Be.prototype.eachChild=function(){};Be.prototype.outputDefined=function(){return!1};Be.prototype.serialize=function(){return["var",this.name]};var di=Be,He=function(e,r,n,a,i){r===void 0&&(r=[]),a===void 0&&(a=new Ps),i===void 0&&(i=[]),this.registry=e,this.path=r,this.key=r.map(function(o){return"["+o+"]"}).join(""),this.scope=a,this.errors=i,this.expectedType=n};He.prototype.parse=function(e,r,n,a,i){return i===void 0&&(i={}),r?this.concat(r,n,a)._parse(e,i):this._parse(e,i)};He.prototype._parse=function(e,r){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function n(p,f,c){return c==="assert"?new he(f,[p]):c==="coerce"?new dt(f,[p]):p}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=e[0];if(typeof a!="string")return this.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[a];if(i){var o=i.parse(e,this);if(!o)return null;if(this.expectedType){var s=this.expectedType,l=o.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&l.kind==="value")o=n(o,s,r.typeAnnotation||"assert");else if((s.kind==="color"||s.kind==="formatted"||s.kind==="resolvedImage")&&(l.kind==="value"||l.kind==="string"))o=n(o,s,r.typeAnnotation||"coerce");else if(this.checkSubtype(s,l))return null}if(!(o instanceof gr)&&o.type.kind!=="resolvedImage"&&En(o)){var u=new ui;try{o=new gr(o.type,o.evaluate(u))}catch(p){return this.error(p.message),null}}return o}return this.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")};He.prototype.concat=function(e,r,n){var a=typeof e=="number"?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new He(this.registry,a,r||null,i,this.errors)};He.prototype.error=function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var a=""+this.key+r.map(function(i){return"["+i+"]"}).join("");this.errors.push(new ue(a,e))};He.prototype.checkSubtype=function(e,r){var n=Gt(e,r);return n&&this.error(n),n};var hi=He;function En(t){if(t instanceof di)return En(t.boundExpression);if(t instanceof xt&&t.name==="error")return!1;if(t instanceof li)return!1;if(t instanceof Un)return!1;var e=t instanceof dt||t instanceof he,r=!0;return t.eachChild(function(n){e?r=r&&En(n):r=r&&n instanceof gr}),r?Rr(t)&&Zn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function vi(t,e){for(var r=t.length-1,n=0,a=r,i=0,o,s;n<=a;)if(i=Math.floor((n+a)/2),o=t[i],s=t[i+1],o<=e){if(i===r||e<s)return i;n=i+1}else if(o>e)a=i-1;else throw new K("Input is not a number.");return 0}var Je=function(e,r,n){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(var a=0,i=n;a<i.length;a+=1){var o=i[a],s=o[0],l=o[1];this.labels.push(s),this.outputs.push(l)}};Je.parse=function(e,r){if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");var n=r.parse(e[1],1,m);if(!n)return null;var a=[],i=null;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);for(var o=1;o<e.length;o+=2){var s=o===1?-1/0:e[o],l=e[o+1],u=o,p=o+1;if(typeof s!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(a.length&&a[a.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var f=r.parse(l,p,i);if(!f)return null;i=i||f.type,a.push([s,f])}return new Je(i,n,a)};Je.prototype.evaluate=function(e){var r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);var a=this.input.evaluate(e);if(a<=r[0])return n[0].evaluate(e);var i=r.length;if(a>=r[i-1])return n[i-1].evaluate(e);var o=vi(r,a);return n[o].evaluate(e)};Je.prototype.eachChild=function(e){e(this.input);for(var r=0,n=this.outputs;r<n.length;r+=1){var a=n[r];e(a)}};Je.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})};Je.prototype.serialize=function(){for(var e=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e};var mi=Je,eu=wt;function wt(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}wt.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t};wt.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t};wt.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx};wt.prototype.solveCurveX=function(t,e){typeof e>"u"&&(e=1e-6);var r,n,a,i,o;for(a=t,o=0;o<8;o++){if(i=this.sampleCurveX(a)-t,Math.abs(i)<e)return a;var s=this.sampleCurveDerivativeX(a);if(Math.abs(s)<1e-6)break;a=a-i/s}if(r=0,n=1,a=t,a<r)return r;if(a>n)return n;for(;r<n;){if(i=this.sampleCurveX(a),Math.abs(i-t)<e)return a;t>i?r=a:n=a,a=(n-r)*.5+r}return a};wt.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};function te(t,e,r){return t*(1-r)+e*r}function tu(t,e,r){return new re(te(t.r,e.r,r),te(t.g,e.g,r),te(t.b,e.b,r),te(t.a,e.a,r))}function ru(t,e,r){return t.map(function(n,a){return te(n,e[a],r)})}var nu=Object.freeze({__proto__:null,number:te,color:tu,array:ru}),yi=.95047,gi=1,bi=1.08883,xi=4/29,mt=6/29,wi=3*mt*mt,au=mt*mt*mt,iu=Math.PI/180,ou=180/Math.PI;function on(t){return t>au?Math.pow(t,1/3):t/wi+xi}function sn(t){return t>mt?t*t*t:wi*(t-xi)}function un(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ln(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function zi(t){var e=ln(t.r),r=ln(t.g),n=ln(t.b),a=on((.4124564*e+.3575761*r+.1804375*n)/yi),i=on((.2126729*e+.7151522*r+.072175*n)/gi),o=on((.0193339*e+.119192*r+.9503041*n)/bi);return{l:116*i-16,a:500*(a-i),b:200*(i-o),alpha:t.a}}function _i(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=gi*sn(e),r=yi*sn(r),n=bi*sn(n),new re(un(3.2404542*r-1.5371385*e-.4985314*n),un(-.969266*r+1.8760108*e+.041556*n),un(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function su(t,e,r){return{l:te(t.l,e.l,r),a:te(t.a,e.a,r),b:te(t.b,e.b,r),alpha:te(t.alpha,e.alpha,r)}}function uu(t){var e=zi(t),r=e.l,n=e.a,a=e.b,i=Math.atan2(a,n)*ou;return{h:i<0?i+360:i,c:Math.sqrt(n*n+a*a),l:r,alpha:t.a}}function lu(t){var e=t.h*iu,r=t.c,n=t.l;return _i({l:n,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})}function pu(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}function fu(t,e,r){return{h:pu(t.h,e.h,r),c:te(t.c,e.c,r),l:te(t.l,e.l,r),alpha:te(t.alpha,e.alpha,r)}}var or={forward:zi,reverse:_i,interpolate:su},sr={forward:uu,reverse:lu,interpolate:fu},ge=function(e,r,n,a,i){this.type=e,this.operator=r,this.interpolation=n,this.input=a,this.labels=[],this.outputs=[];for(var o=0,s=i;o<s.length;o+=1){var l=s[o],u=l[0],p=l[1];this.labels.push(u),this.outputs.push(p)}};ge.interpolationFactor=function(e,r,n,a){var i=0;if(e.name==="exponential")i=pn(r,e.base,n,a);else if(e.name==="linear")i=pn(r,1,n,a);else if(e.name==="cubic-bezier"){var o=e.controlPoints,s=new eu(o[0],o[1],o[2],o[3]);i=s.solve(pn(r,1,n,a))}return i};ge.parse=function(e,r){var n=e[0],a=e[1],i=e[2],o=e.slice(3);if(!Array.isArray(a)||a.length===0)return r.error("Expected an interpolation type expression.",1);if(a[0]==="linear")a={name:"linear"};else if(a[0]==="exponential"){var s=a[1];if(typeof s!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:s}}else if(a[0]==="cubic-bezier"){var l=a.slice(1);if(l.length!==4||l.some(function(h){return typeof h!="number"||h<0||h>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:l}}else return r.error("Unknown interpolation type "+String(a[0]),1,0);if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(i=r.parse(i,2,m),!i)return null;var u=[],p=null;n==="interpolate-hcl"||n==="interpolate-lab"?p=me:r.expectedType&&r.expectedType.kind!=="value"&&(p=r.expectedType);for(var f=0;f<o.length;f+=2){var c=o[f],d=o[f+1],v=f+3,y=f+4;if(typeof c!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(u.length&&u[u.length-1][0]>=c)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var g=r.parse(d,y,p);if(!g)return null;p=p||g.type,u.push([c,g])}return p.kind!=="number"&&p.kind!=="color"&&!(p.kind==="array"&&p.itemType.kind==="number"&&typeof p.N=="number")?r.error("Type "+N(p)+" is not interpolatable."):new ge(p,n,a,i,u)};ge.prototype.evaluate=function(e){var r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);var a=this.input.evaluate(e);if(a<=r[0])return n[0].evaluate(e);var i=r.length;if(a>=r[i-1])return n[i-1].evaluate(e);var o=vi(r,a),s=r[o],l=r[o+1],u=ge.interpolationFactor(this.interpolation,a,s,l),p=n[o].evaluate(e),f=n[o+1].evaluate(e);return this.operator==="interpolate"?nu[this.type.kind.toLowerCase()](p,f,u):this.operator==="interpolate-hcl"?sr.reverse(sr.interpolate(sr.forward(p),sr.forward(f),u)):or.reverse(or.interpolate(or.forward(p),or.forward(f),u))};ge.prototype.eachChild=function(e){e(this.input);for(var r=0,n=this.outputs;r<n.length;r+=1){var a=n[r];e(a)}};ge.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})};ge.prototype.serialize=function(){var e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)r.push(this.labels[n],this.outputs[n].serialize());return r};function pn(t,e,r,n){var a=n-r,i=t-r;return a===0?0:e===1?i/a:(Math.pow(e,i)-1)/(Math.pow(e,a)-1)}var Le=ge,Ce=function(e,r){this.type=e,this.args=r};Ce.parse=function(e,r){if(e.length<2)return r.error("Expectected at least one argument.");var n=null,a=r.expectedType;a&&a.kind!=="value"&&(n=a);for(var i=[],o=0,s=e.slice(1);o<s.length;o+=1){var l=s[o],u=r.parse(l,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!u)return null;n=n||u.type,i.push(u)}var p=a&&i.some(function(f){return Gt(a,f.type)});return p?new Ce(S,i):new Ce(n,i)};Ce.prototype.evaluate=function(e){for(var r=null,n=0,a,i=0,o=this.args;i<o.length;i+=1){var s=o[i];if(n++,r=s.evaluate(e),r&&r instanceof bt&&!r.available&&(a||(a=r),r=null,n===this.args.length))return a;if(r!==null)break}return r};Ce.prototype.eachChild=function(e){this.args.forEach(e)};Ce.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})};Ce.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(r){e.push(r.serialize())}),e};var ki=Ce,Xe=function(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r};Xe.prototype.evaluate=function(e){return this.result.evaluate(e)};Xe.prototype.eachChild=function(e){for(var r=0,n=this.bindings;r<n.length;r+=1){var a=n[r];e(a[1])}e(this.result)};Xe.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],a=1;a<e.length-1;a+=2){var i=e[a];if(typeof i!="string")return r.error("Expected string, but found "+typeof i+" instead.",a);if(/[^a-zA-Z0-9_]/.test(i))return r.error("Variable names must contain only alphanumeric characters or '_'.",a);var o=r.parse(e[a+1],a+1);if(!o)return null;n.push([i,o])}var s=r.parse(e[e.length-1],e.length-1,r.expectedType,n);return s?new Xe(n,s):null};Xe.prototype.outputDefined=function(){return this.result.outputDefined()};Xe.prototype.serialize=function(){for(var e=["let"],r=0,n=this.bindings;r<n.length;r+=1){var a=n[r],i=a[0],o=a[1];e.push(i,o.serialize())}return e.push(this.result.serialize()),e};var Ei=Xe,Ke=function(e,r,n){this.type=e,this.index=r,this.input=n};Ke.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,m),a=r.parse(e[2],2,ne(r.expectedType||S));if(!n||!a)return null;var i=a.type;return new Ke(i.itemType,n,a)};Ke.prototype.evaluate=function(e){var r=this.index.evaluate(e),n=this.input.evaluate(e);if(r<0)throw new K("Array index out of bounds: "+r+" < 0.");if(r>=n.length)throw new K("Array index out of bounds: "+r+" > "+(n.length-1)+".");if(r!==Math.floor(r))throw new K("Array index must be an integer, but found "+r+" instead.");return n[r]};Ke.prototype.eachChild=function(e){e(this.index),e(this.input)};Ke.prototype.outputDefined=function(){return!1};Ke.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var cu=Ke,We=function(e,r){this.type=R,this.needle=e,this.haystack=r};We.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,S),a=r.parse(e[2],2,S);return!n||!a?null:jn(n.type,[R,F,m,Cr,S])?new We(n,a):r.error("Expected first argument to be of type boolean, string, number or null, but found "+N(n.type)+" instead")};We.prototype.evaluate=function(e){var r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(n==null)return!1;if(!Ut(r,["boolean","string","number","null"]))throw new K("Expected first argument to be of type boolean, string, number or null, but found "+N(Z(r))+" instead.");if(!Ut(n,["string","array"]))throw new K("Expected second argument to be of type array or string, but found "+N(Z(n))+" instead.");return n.indexOf(r)>=0};We.prototype.eachChild=function(e){e(this.needle),e(this.haystack)};We.prototype.outputDefined=function(){return!0};We.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var du=We,Ie=function(e,r,n){this.type=m,this.needle=e,this.haystack=r,this.fromIndex=n};Ie.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,S),a=r.parse(e[2],2,S);if(!n||!a)return null;if(!jn(n.type,[R,F,m,Cr,S]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+N(n.type)+" instead");if(e.length===4){var i=r.parse(e[3],3,m);return i?new Ie(n,a,i):null}else return new Ie(n,a)};Ie.prototype.evaluate=function(e){var r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Ut(r,["boolean","string","number","null"]))throw new K("Expected first argument to be of type boolean, string, number or null, but found "+N(Z(r))+" instead.");if(!Ut(n,["string","array"]))throw new K("Expected second argument to be of type array or string, but found "+N(Z(n))+" instead.");if(this.fromIndex){var a=this.fromIndex.evaluate(e);return n.indexOf(r,a)}return n.indexOf(r)};Ie.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)};Ie.prototype.outputDefined=function(){return!1};Ie.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var hu=Ie,Ye=function(e,r,n,a,i,o){this.inputType=e,this.type=r,this.input=n,this.cases=a,this.outputs=i,this.otherwise=o};Ye.parse=function(e,r){if(e.length<5)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!==1)return r.error("Expected an even number of arguments.");var n,a;r.expectedType&&r.expectedType.kind!=="value"&&(a=r.expectedType);for(var i={},o=[],s=2;s<e.length-1;s+=2){var l=e[s],u=e[s+1];Array.isArray(l)||(l=[l]);var p=r.concat(s);if(l.length===0)return p.error("Expected at least one branch label.");for(var f=0,c=l;f<c.length;f+=1){var d=c[f];if(typeof d!="number"&&typeof d!="string")return p.error("Branch labels must be numbers or strings.");if(typeof d=="number"&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return p.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof d=="number"&&Math.floor(d)!==d)return p.error("Numeric branch labels must be integer values.");if(!n)n=Z(d);else if(p.checkSubtype(n,Z(d)))return null;if(typeof i[String(d)]<"u")return p.error("Branch labels must be unique.");i[String(d)]=o.length}var v=r.parse(u,s,a);if(!v)return null;a=a||v.type,o.push(v)}var y=r.parse(e[1],1,S);if(!y)return null;var g=r.parse(e[e.length-1],e.length-1,a);return!g||y.type.kind!=="value"&&r.concat(1).checkSubtype(n,y.type)?null:new Ye(n,a,y,i,o,g)};Ye.prototype.evaluate=function(e){var r=this.input.evaluate(e),n=Z(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise;return n.evaluate(e)};Ye.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)};Ye.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()};Ye.prototype.serialize=function(){for(var e=this,r=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),a=[],i={},o=0,s=n;o<s.length;o+=1){var l=s[o],u=i[this.cases[l]];u===void 0?(i[this.cases[l]]=a.length,a.push([this.cases[l],[l]])):a[u][1].push(l)}for(var p=function(y){return e.inputType.kind==="number"?Number(y):y},f=0,c=a;f<c.length;f+=1){var d=c[f],u=d[0],v=d[1];v.length===1?r.push(p(v[0])):r.push(v.map(p)),r.push(this.outputs[outputIndex$1].serialize())}return r.push(this.otherwise.serialize()),r};var vu=Ye,Qe=function(e,r,n){this.type=e,this.branches=r,this.otherwise=n};Qe.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!==0)return r.error("Expected an odd number of arguments.");var n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);for(var a=[],i=1;i<e.length-1;i+=2){var o=r.parse(e[i],i,R);if(!o)return null;var s=r.parse(e[i+1],i+1,n);if(!s)return null;a.push([o,s]),n=n||s.type}var l=r.parse(e[e.length-1],e.length-1,n);return l?new Qe(n,a,l):null};Qe.prototype.evaluate=function(e){for(var r=0,n=this.branches;r<n.length;r+=1){var a=n[r],i=a[0],o=a[1];if(i.evaluate(e))return o.evaluate(e)}return this.otherwise.evaluate(e)};Qe.prototype.eachChild=function(e){for(var r=0,n=this.branches;r<n.length;r+=1){var a=n[r],i=a[0],o=a[1];e(i),e(o)}e(this.otherwise)};Qe.prototype.outputDefined=function(){return this.branches.every(function(e){e[0];var r=e[1];return r.outputDefined()})&&this.otherwise.outputDefined()};Qe.prototype.serialize=function(){var e=["case"];return this.eachChild(function(r){e.push(r.serialize())}),e};var mu=Qe,Me=function(e,r,n,a){this.type=e,this.input=r,this.beginIndex=n,this.endIndex=a};Me.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,S),a=r.parse(e[2],2,m);if(!n||!a)return null;if(!jn(n.type,[ne(S),F,S]))return r.error("Expected first argument to be of type array or string, but found "+N(n.type)+" instead");if(e.length===4){var i=r.parse(e[3],3,m);return i?new Me(n.type,n,a,i):null}else return new Me(n.type,n,a)};Me.prototype.evaluate=function(e){var r=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Ut(r,["string","array"]))throw new K("Expected first argument to be of type array or string, but found "+N(Z(r))+" instead.");if(this.endIndex){var a=this.endIndex.evaluate(e);return r.slice(n,a)}return r.slice(n)};Me.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)};Me.prototype.outputDefined=function(){return!1};Me.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var yu=Me;function Ca(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function gu(t,e,r){return e===r}function bu(t,e,r){return e!==r}function xu(t,e,r){return e<r}function wu(t,e,r){return e>r}function zu(t,e,r){return e<=r}function _u(t,e,r){return e>=r}function Ti(t,e,r,n){return n.compare(e,r)===0}function ku(t,e,r,n){return!Ti(t,e,r,n)}function Eu(t,e,r,n){return n.compare(e,r)<0}function Tu(t,e,r,n){return n.compare(e,r)>0}function Cu(t,e,r,n){return n.compare(e,r)<=0}function Iu(t,e,r,n){return n.compare(e,r)>=0}function zt(t,e,r){var n=t!=="=="&&t!=="!=";return function(){function a(i,o,s){this.type=R,this.lhs=i,this.rhs=o,this.collator=s,this.hasUntypedArgument=i.type.kind==="value"||o.type.kind==="value"}return a.parse=function(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");var l=o[0],u=s.parse(o[1],1,S);if(!u)return null;if(!Ca(l,u.type))return s.concat(1).error('"'+l+`" comparisons are not supported for type '`+N(u.type)+"'.");var p=s.parse(o[2],2,S);if(!p)return null;if(!Ca(l,p.type))return s.concat(2).error('"'+l+`" comparisons are not supported for type '`+N(p.type)+"'.");if(u.type.kind!==p.type.kind&&u.type.kind!=="value"&&p.type.kind!=="value")return s.error("Cannot compare types '"+N(u.type)+"' and '"+N(p.type)+"'.");n&&(u.type.kind==="value"&&p.type.kind!=="value"?u=new he(p.type,[u]):u.type.kind!=="value"&&p.type.kind==="value"&&(p=new he(u.type,[p])));var f=null;if(o.length===4){if(u.type.kind!=="string"&&p.type.kind!=="string"&&u.type.kind!=="value"&&p.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(f=s.parse(o[3],3,Ir),!f)return null}return new a(u,p,f)},a.prototype.evaluate=function(o){var s=this.lhs.evaluate(o),l=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){var u=Z(s),p=Z(l);if(u.kind!==p.kind||!(u.kind==="string"||u.kind==="number"))throw new K('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+u.kind+", "+p.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var f=Z(s),c=Z(l);if(f.kind!=="string"||c.kind!=="string")return e(o,s,l)}return this.collator?r(o,s,l,this.collator.evaluate(o)):e(o,s,l)},a.prototype.eachChild=function(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var o=[t];return this.eachChild(function(s){o.push(s.serialize())}),o},a}()}var Mu=zt("==",gu,Ti),Ru=zt("!=",bu,ku),Su=zt("<",xu,Eu),Fu=zt(">",wu,Tu),Au=zt("<=",zu,Cu),qu=zt(">=",_u,Iu),$e=function(e,r,n,a,i,o){this.type=F,this.number=e,this.locale=r,this.currency=n,this.unit=a,this.minFractionDigits=i,this.maxFractionDigits=o};$e.parse=function(e,r){if(e.length!==3)return r.error("Expected two arguments.");var n=r.parse(e[1],1,m);if(!n)return null;var a=e[2];if(typeof a!="object"||Array.isArray(a))return r.error("NumberFormat options argument must be an object.");var i=null;if(a.locale&&(i=r.parse(a.locale,1,F),!i))return null;var o=null;if(a.currency&&(o=r.parse(a.currency,1,F),!o))return null;var s=null;if(a.unit&&(s=r.parse(a.unit,1,F),!s))return null;var l=null;if(a["min-fraction-digits"]&&(l=r.parse(a["min-fraction-digits"],1,m),!l))return null;var u=null;return a["max-fraction-digits"]&&(u=r.parse(a["max-fraction-digits"],1,m),!u)?null:new $e(n,i,o,s,l,u)};$e.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))};$e.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)};$e.prototype.outputDefined=function(){return!1};$e.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Pu=$e,et=function(e){this.type=m,this.input=e};et.parse=function(e,r){if(e.length!==2)return r.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error("Expected argument of type string or array, but found "+N(n.type)+" instead."):new et(n):null};et.prototype.evaluate=function(e){var r=this.input.evaluate(e);if(typeof r=="string")return r.length;if(Array.isArray(r))return r.length;throw new K("Expected value to be of type string or array, but found "+N(Z(r))+" instead.")};et.prototype.eachChild=function(e){e(this.input)};et.prototype.outputDefined=function(){return!1};et.prototype.serialize=function(){var e=["length"];return this.eachChild(function(r){e.push(r.serialize())}),e};var ju=et,Ci={"==":Mu,"!=":Ru,">":Fu,"<":Su,">=":qu,"<=":Au,array:he,at:cu,boolean:he,case:mu,coalesce:ki,collator:li,format:oi,image:si,in:du,"index-of":hu,interpolate:Le,"interpolate-hcl":Le,"interpolate-lab":Le,length:ju,let:Ei,literal:gr,match:vu,number:he,"number-format":Pu,object:he,slice:yu,step:mi,string:he,"to-boolean":dt,"to-color":dt,"to-number":dt,"to-string":dt,var:di,within:Un};function Ia(t,e){var r=e[0],n=e[1],a=e[2],i=e[3];r=r.evaluate(t),n=n.evaluate(t),a=a.evaluate(t);var o=i?i.evaluate(t):1,s=ai(r,n,a,o);if(s)throw new K(s);return new re(r/255*o,n/255*o,a/255*o,o)}function Ma(t,e){return t in e}function fn(t,e){var r=e[t];return typeof r>"u"?null:r}function Du(t,e,r,n){for(;r<=n;){var a=r+n>>1;if(e[a]===t)return!0;e[a]>t?n=a-1:r=a+1}return!1}function je(t){return{type:t}}xt.register(Ci,{error:[js,[F],function(t,e){var r=e[0];throw new K(r.evaluate(t))}],typeof:[F,[S],function(t,e){var r=e[0];return N(Z(r.evaluate(t)))}],"to-rgba":[ne(m,4),[me],function(t,e){var r=e[0];return r.evaluate(t).toArray()}],rgb:[me,[m,m,m],Ia],rgba:[me,[m,m,m,m],Ia],has:{type:R,overloads:[[[F],function(t,e){var r=e[0];return Ma(r.evaluate(t),t.properties())}],[[F,vt],function(t,e){var r=e[0],n=e[1];return Ma(r.evaluate(t),n.evaluate(t))}]]},get:{type:S,overloads:[[[F],function(t,e){var r=e[0];return fn(r.evaluate(t),t.properties())}],[[F,vt],function(t,e){var r=e[0],n=e[1];return fn(r.evaluate(t),n.evaluate(t))}]]},"feature-state":[S,[F],function(t,e){var r=e[0];return fn(r.evaluate(t),t.featureState||{})}],properties:[vt,[],function(t){return t.properties()}],"geometry-type":[F,[],function(t){return t.geometryType()}],id:[S,[],function(t){return t.id()}],zoom:[m,[],function(t){return t.globals.zoom}],pitch:[m,[],function(t){return t.globals.pitch||0}],"distance-from-center":[m,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[m,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[m,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[m,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[S,[],function(t){return t.globals.accumulated===void 0?null:t.globals.accumulated}],"+":[m,je(m),function(t,e){for(var r=0,n=0,a=e;n<a.length;n+=1){var i=a[n];r+=i.evaluate(t)}return r}],"*":[m,je(m),function(t,e){for(var r=1,n=0,a=e;n<a.length;n+=1){var i=a[n];r*=i.evaluate(t)}return r}],"-":{type:m,overloads:[[[m,m],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)-n.evaluate(t)}],[[m],function(t,e){var r=e[0];return-r.evaluate(t)}]]},"/":[m,[m,m],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)/n.evaluate(t)}],"%":[m,[m,m],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)%n.evaluate(t)}],ln2:[m,[],function(){return Math.LN2}],pi:[m,[],function(){return Math.PI}],e:[m,[],function(){return Math.E}],"^":[m,[m,m],function(t,e){var r=e[0],n=e[1];return Math.pow(r.evaluate(t),n.evaluate(t))}],sqrt:[m,[m],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[m,[m],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[m,[m],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[m,[m],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[m,[m],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[m,[m],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[m,[m],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[m,[m],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[m,[m],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[m,[m],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[m,je(m),function(t,e){return Math.min.apply(Math,e.map(function(r){return r.evaluate(t)}))}],max:[m,je(m),function(t,e){return Math.max.apply(Math,e.map(function(r){return r.evaluate(t)}))}],abs:[m,[m],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[m,[m],function(t,e){var r=e[0],n=r.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[m,[m],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[m,[m],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[R,[F,S],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[R,[S],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[R,[F],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[R,[F,S],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],i=n.value;return typeof a==typeof i&&a<i}],"filter-id-<":[R,[S],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n<a}],"filter->":[R,[F,S],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],i=n.value;return typeof a==typeof i&&a>i}],"filter-id->":[R,[S],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n>a}],"filter-<=":[R,[F,S],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],i=n.value;return typeof a==typeof i&&a<=i}],"filter-id-<=":[R,[S],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n<=a}],"filter->=":[R,[F,S],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],i=n.value;return typeof a==typeof i&&a>=i}],"filter-id->=":[R,[S],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n>=a}],"filter-has":[R,[S],function(t,e){var r=e[0];return r.value in t.properties()}],"filter-has-id":[R,[],function(t){return t.id()!==null&&t.id()!==void 0}],"filter-type-in":[R,[ne(F)],function(t,e){var r=e[0];return r.value.indexOf(t.geometryType())>=0}],"filter-id-in":[R,[ne(S)],function(t,e){var r=e[0];return r.value.indexOf(t.id())>=0}],"filter-in-small":[R,[F,ne(S)],function(t,e){var r=e[0],n=e[1];return n.value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[R,[F,ne(S)],function(t,e){var r=e[0],n=e[1];return Du(t.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:R,overloads:[[[R,R],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)&&n.evaluate(t)}],[je(R),function(t,e){for(var r=0,n=e;r<n.length;r+=1){var a=n[r];if(!a.evaluate(t))return!1}return!0}]]},any:{type:R,overloads:[[[R,R],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)||n.evaluate(t)}],[je(R),function(t,e){for(var r=0,n=e;r<n.length;r+=1){var a=n[r];if(a.evaluate(t))return!0}return!1}]]},"!":[R,[R],function(t,e){var r=e[0];return!r.evaluate(t)}],"is-supported-script":[R,[F],function(t,e){var r=e[0],n=t.globals&&t.globals.isSupportedScript;return n?n(r.evaluate(t)):!0}],upcase:[F,[F],function(t,e){var r=e[0];return r.evaluate(t).toUpperCase()}],downcase:[F,[F],function(t,e){var r=e[0];return r.evaluate(t).toLowerCase()}],concat:[F,je(S),function(t,e){return e.map(function(r){return jt(r.evaluate(t))}).join("")}],"resolved-locale":[F,[Ir],function(t,e){var r=e[0];return r.evaluate(t).resolvedLocale()}]});var Ii=Ci;function Tn(t){return{result:"success",value:t}}function ct(t){return{result:"error",value:t}}function Lu(t){return t["property-type"]==="data-driven"}function Ou(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Nu(t){return!!t.expression&&t.expression.interpolated}function Mi(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}var Bn=function(e,r){this.expression=e,this._warningHistory={},this._evaluator=new ui,this._defaultValue=r?Zu(r):null,this._enumValues=r&&r.type==="enum"?r.values:null};Bn.prototype.evaluateWithoutErrorHandling=function(e,r,n,a,i,o,s,l){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=a||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=l||null,this.expression.evaluate(this._evaluator)};Bn.prototype.evaluate=function(e,r,n,a,i,o,s,l){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=a||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=l||null;try{var u=this.expression.evaluate(this._evaluator);if(u==null||typeof u=="number"&&u!==u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new K("Expected value to be one of "+Object.keys(this._enumValues).map(function(p){return JSON.stringify(p)}).join(", ")+", but found "+JSON.stringify(u)+" instead.");return u}catch(p){return this._warningHistory[p.message]||(this._warningHistory[p.message]=!0,typeof console<"u"&&console.warn(p.message)),this._defaultValue}};function Gu(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in Ii}function Cn(t,e){var r=new hi(Ii,[],e?Vu(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Tn(new Bn(n,e)):ct(r.errors)}var xr=function(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Vn(r.expression)};xr.prototype.evaluateWithoutErrorHandling=function(e,r,n,a,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,a,i,o)};xr.prototype.evaluate=function(e,r,n,a,i,o){return this._styleExpression.evaluate(e,r,n,a,i,o)};var Zt=function(e,r,n,a){this.kind=e,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Vn(r.expression),this.interpolationType=a};Zt.prototype.evaluateWithoutErrorHandling=function(e,r,n,a,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,a,i,o)};Zt.prototype.evaluate=function(e,r,n,a,i,o){return this._styleExpression.evaluate(e,r,n,a,i,o)};Zt.prototype.interpolationFactor=function(e,r,n){return this.interpolationType?Le.interpolationFactor(this.interpolationType,e,r,n):0};function Uu(t,e){if(t=Cn(t,e),t.result==="error")return t;var r=t.value.expression,n=Rr(r);if(!n&&!Lu(e))return ct([new ue("","data expressions not supported")]);var a=Zn(r,["zoom","pitch","distance-from-center"]);if(!a&&!Ou(e))return ct([new ue("","zoom expressions not supported")]);var i=vr(r);if(!i&&!a)return ct([new ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof ue)return ct([i]);if(i instanceof Le&&!Nu(e))return ct([new ue("",'"interpolate" expressions cannot be used with this property')]);if(!i)return Tn(n?new xr("constant",t.value):new xr("source",t.value));var o=i instanceof Le?i.interpolation:void 0;return Tn(n?new Zt("camera",t.value,i.labels,o):new Zt("composite",t.value,i.labels,o))}function vr(t){var e=null;if(t instanceof Ei)e=vr(t.result);else if(t instanceof ki)for(var r=0,n=t.args;r<n.length;r+=1){var a=n[r];if(e=vr(a),e)break}else(t instanceof mi||t instanceof Le)&&t.input instanceof xt&&t.input.name==="zoom"&&(e=t);return e instanceof ue||t.eachChild(function(i){var o=vr(i);o instanceof ue?e=o:!e&&o?e=new ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&o&&e!==o&&(e=new ue("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Vu(t){var e={color:me,string:F,number:m,enum:F,boolean:R,formatted:Mr,resolvedImage:Bt};return t.type==="array"?ne(e[t.value]||S,t.length):e[t.type]}function Zu(t){return t.type==="color"&&(Mi(t.default)||Array.isArray(t.default))?new re(0,0,0,0):t.type==="color"?re.parse(t.default)||null:t.default===void 0?null:t.default}function Bu(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function In(t){if(Array.isArray(t))return t.map(In);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var r in t)e[r]=In(t[r]);return e}return Bu(t)}var Ri={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Si(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!Si(n)&&typeof n!="boolean")return!1}return!0;default:return!0}}function Hu(t,e){if(e===void 0&&(e="fill"),t==null)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};Si(t)||(t=wr(t));var r=t,n=!0;try{n=Ju(r)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
`+JSON.stringify(r,null,2)+`
        `)}var a=Ri["filter_"+e],i=Cn(n,a),o=null;if(i.result==="error")throw new Error(i.value.map(function(f){return f.key+": "+f.message}).join(", "));o=function(f,c,d){return i.value.evaluate(f,c,{},d)};var s=null,l=null;if(n!==r){var u=Cn(r,a);if(u.result==="error")throw new Error(u.value.map(function(f){return f.key+": "+f.message}).join(", "));s=function(f,c,d,v,y){return u.value.evaluate(f,c,{},d,void 0,void 0,v,y)},l=!Rr(u.value.expression)}o=o;var p=qi(n);return{filter:o,dynamicFilter:s||void 0,needGeometry:p,needFeature:!!l}}function Ju(t){if(!yt(t))return t;var e=In(t);return Ai(e),e=Fi(e),e}function Fi(t){if(!Array.isArray(t))return t;var e=Wu(t);return e===!0?e:e.map(function(r){return Fi(r)})}function Ai(t){var e=!1,r=[];if(t[0]==="case"){for(var n=1;n<t.length-1;n+=2)e=e||yt(t[n]),r.push(t[n+1]);r.push(t[t.length-1])}else if(t[0]==="match"){e=e||yt(t[1]);for(var a=2;a<t.length-1;a+=2)r.push(t[a+1]);r.push(t[t.length-1])}else if(t[0]==="step"){e=e||yt(t[1]);for(var i=1;i<t.length-1;i+=2)r.push(t[i+1])}e&&(t.length=0,t.push.apply(t,["any"].concat(r)));for(var o=1;o<t.length;o++)Ai(t[o])}function yt(t){if(!Array.isArray(t))return!1;if(Xu(t[0]))return!0;for(var e=1;e<t.length;e++){var r=t[e];if(yt(r))return!0}return!1}function Xu(t){return t==="pitch"||t==="distance-from-center"}var Ku=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Wu(t){if(Ku.has(t[0]))for(var e=1;e<t.length;e++){var r=t[e];if(yt(r))return!0}return t}function Yu(t,e){return t<e?-1:t>e?1:0}function qi(t){if(!Array.isArray(t))return!1;if(t[0]==="within")return!0;for(var e=1;e<t.length;e++)if(qi(t[e]))return!0;return!1}function wr(t){if(!t)return!0;var e=t[0];if(t.length<=1)return e!=="any";var r=e==="=="?cn(t[1],t[2],"=="):e==="!="?ur(cn(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?cn(t[1],t[2],e):e==="any"?Qu(t.slice(1)):e==="all"?["all"].concat(t.slice(1).map(wr)):e==="none"?["all"].concat(t.slice(1).map(wr).map(ur)):e==="in"?Ra(t[1],t.slice(2)):e==="!in"?ur(Ra(t[1],t.slice(2))):e==="has"?Sa(t[1]):e==="!has"?ur(Sa(t[1])):e==="within"?t:!0;return r}function cn(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Qu(t){return["any"].concat(t.map(wr))}function Ra(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(r){return typeof r!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Yu)]]:["filter-in-small",t,["literal",e]]}}function Sa(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ur(t){return["!",t]}var $u=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function el(t,e){var r={};for(var n in t)n!=="ref"&&(r[n]=t[n]);return $u.forEach(function(a){a in e&&(r[a]=e[a])}),r}function Pi(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=el(t[n],e[t[n].ref]));return t}var Fa={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},qt=" ",Aa=/(italic|oblique)$/i,qa={},Mn=function(t,e,r){var n=qa[t];if(!n){Array.isArray(t)||(t=[t]);for(var a=400,i="normal",o=[],s,l,u=0,p=t.length;u<p;++u){var f=t[u],c=f.split(" "),d=c[c.length-1].toLowerCase();d=="normal"||d=="italic"||d=="oblique"?(i=l?i:d,c.pop(),d=c[c.length-1].toLowerCase()):Aa.test(d)&&(d=d.replace(Aa,""),i=l?i:c[c.length-1].replace(d,""));for(var v in Fa){var y=c.length>1?c[c.length-2].toLowerCase():"";if(d==v||d==v.replace("-","")||y+"-"+d==v){a=s?a:Fa[v],c.pop(),y&&v.startsWith(y)&&c.pop();break}}!s&&typeof d=="number"&&(a=d);var g=c.join(qt).replace("Klokantech Noto Sans","Noto Sans");g.indexOf(qt)!==-1&&(g='"'+g+'"'),o.push(g)}n=qa[t]=[i,a,o]}return n[0]+qt+n[1]+qt+e+"px"+(r?"/"+r:"")+qt+n[2]},ji="https://api.mapbox.com";function Hn(t){var e="mapbox://";return t.indexOf(e)!==0?"":t.slice(e.length)}function tl(t,e,r){var n=Hn(t);if(!n)return decodeURI(new URL(t,r).href);var a="sprites/";if(n.indexOf(a)!==0)throw new Error("unexpected sprites url: "+t);var i=n.slice(a.length);return ji+"/styles/v1/"+i+"/sprite?access_token="+e}function zr(t,e){var r=Hn(t);if(!r)return decodeURI(new URL(t,location.href).href);var n="styles/";if(r.indexOf(n)!==0)throw new Error("unexpected style url: "+t);var a=r.slice(n.length);return ji+"/styles/v1/"+a+"?&access_token="+e}function mr(t,e,r,n){var a=new URL(t,n),i=Hn(t);if(!i)return e&&a.searchParams.set(r,e),decodeURI(a.href);if(i==="mapbox.satellite"){var o=window.devicePixelRatio>=1.5?"@2x":"";return"https://api.mapbox.com/v4/"+i+"/{z}/{x}/{y}"+o+".webp?access_token="+e}return"https://{a-d}.tiles.mapbox.com/v4/"+i+"/{z}/{x}/{y}.vector.pbf?access_token="+e}var Di=0,rl={},nl={};function Li(t){t.id||(t.id=Di++);var e={};return rl[t.id]=e,e}function al(t){t.id||(t.id=Di++);var e={};return nl[t.id]=e,e}function dn(t){return t*Math.PI/180}var le=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function Oi(t,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(t,e);var r=document.createElement("canvas");return r.width=t,r.height=e,r}function Jn(t,e){for(var r=0,n=e.length;r<n;++r){var a=e[r];if(a<t&&r+1<n){var i=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(i)}}return n-1}var ft={};function _r(t,e,r,n){if(r===void 0&&(r={}),e in ft)return n&&(n.request=ft[e][0]),ft[e][1];var a=r.transformRequest?r.transformRequest(e,t)||new Request(e):new Request(e);a.headers.get("Accept")||a.headers.set("Accept","application/json"),n&&(n.request=a);var i=fetch(a).then(function(o){return delete ft[e],o.ok?o.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(o){return delete ft[e],Promise.reject(new Error("Error fetching source "+e))});return ft[e]=[a,i],i}function Ni(t,e){if(typeof t=="string")if(t.trim().startsWith("{"))try{var r=JSON.parse(t);return Promise.resolve(r)}catch(n){return Promise.reject(n)}else return t=zr(t,e.accessToken),_r("Style",t,e);else return Promise.resolve(t)}function Pa(t,e){if(e.transformRequest){var r=e.transformRequest(t,"Tiles");if(r instanceof Request)return decodeURI(r.url)}return t}var ja={};function Gi(t,e,r){r===void 0&&(r={});var n=[e,JSON.stringify(t)].toString(),a=ja[n];if(!a||r.transformRequest){var i=t.url;if(i&&!t.tiles){var o=mr(i,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(i.startsWith("mapbox://"))a=Promise.resolve(Object.assign({},t,{url:void 0,tiles:vo(o)}));else{var s={};a=_r("Source",o,r,s).then(function(l){return l.tiles=l.tiles.map(function(u){return Pa(mr(u,r.accessToken,r.accessTokenParam||"access_token",s.request.url),r)}),Promise.resolve(l)})}}else t=Object.assign({},t,{tiles:t.tiles.map(function(l){return Pa(mr(l,r.accessToken,r.accessTokenParam||"access_token",e||location.href),r)})}),a=Promise.resolve(Object.assign({},t));ja[n]=a}return a}function il(t,e,r,n){var a=document.createElement("canvas"),i=[2*r*e.pixelRatio+e.width,2*r*e.pixelRatio+e.height];a.width=i[0],a.height=i[1];var o=a.getContext("2d");o.drawImage(t,e.x,e.y,e.width,e.height,r*e.pixelRatio,r*e.pixelRatio,e.width,e.height);var s=o.getImageData(0,0,i[0],i[1]);o.globalCompositeOperation="destination-over",o.fillStyle="rgba("+n.r*255+","+n.g*255+","+n.b*255+","+n.a+")";for(var l=s.data,u=0,p=s.width;u<p;++u)for(var f=0,c=s.height;f<c;++f){var d=(f*p+u)*4,v=l[d+3];v>0&&o.arc(u,f,r*e.pixelRatio,0,2*Math.PI)}return o.fill(),a}var ol=Array(256).join("\u200A");function Rn(t,e){if(e>=.05){for(var r="",n=t.split(`
`),a=ol.slice(0,Math.round(e/.1)),i=0,o=n.length;i<o;++i)i>0&&(r+=`
`),r+=n[i].split("").join(a);return r}return t}var hn;function Ui(){return hn||(hn=Oi(1,1).getContext("2d")),hn}function De(t,e){return Ui().measureText(t).width+(t.length-1)*e}var Da={};function Sn(t,e,r,n){if(t.indexOf(`
`)!==-1){for(var a=t.split(`
`),i=[],o=0,s=a.length;o<s;++o)i.push(Sn(a[o],e,r,n));return i.join(`
`)}var l=r+","+e+","+t+","+n,u=Da[l];if(!u){var p=t.split(" ");if(p.length>1){var f=Ui();f.font=e;for(var c=f.measureText("M").width,d=c*r,v="",y=[],g=0,h=p.length;g<h;++g){var k=p[g],C=v+(v?" ":"")+k;De(C,n)<=d?v=C:(v&&y.push(v),v=k)}v&&y.push(v);for(var w=0,q=y.length;w<q&&q>1;++w){var D=y[w];if(De(D,n)<d*.35){var M=w>0?De(y[w-1],n):1/0,A=w<q-1?De(y[w+1],n):1/0;y.splice(w,1),q-=1,M<A?(y[w-1]+=" "+D,w-=1):y[w]=D+" "+y[w]}}for(var L=0,I=y.length-1;L<I;++L){var P=y[L],V=y[L+1];if(De(P,n)>d*.7&&De(V,n)<d*.6){var B=P.split(" "),j=B.pop();De(j,n)<d*.2&&(y[L]=B.join(" "),y[L+1]=j+" "+V),I-=1}}u=y.join(`
`)}else u=t;u=Rn(u,n),Da[l]=u}return u}var sl=/font-family: ?([^;]*);/,ul=/("|')/g,lr;function ll(t){if(!lr){lr={};for(var e=document.styleSheets,r=0,n=e.length;r<n;++r){var a=e[r];try{var i=a.rules||a.cssRules;if(i)for(var o=0,s=i.length;o<s;++o){var l=i[o];if(l.type==5){var u=l.cssText.match(sl);lr[u[1].replace(ul,"")]=!0}}}catch{}}}return t in lr}var vn={};function pl(t){var e=t.toString();if(e in vn)return vn[e];for(var r=[],n=0,a=t.length;n<a;++n){t[n]=t[n].replace("Arial Unicode MS","Arial");var i=t[n],o=Mn(i,1);Ao(o);var s=o.split(" ");r.push([s.slice(3).join(" ").replace(/"/g,""),s[1],s[0]])}for(var l=0,u=r.length;l<u;++l){var p=r[l],f=p[0];if(!ll(f)&&qo.get(p[2]+`
`+p[1]+` 
`+f)!==100){var c="https://fonts.googleapis.com/css?family="+f.replace(/ /g,"+")+":"+p[1]+p[2];if(!document.querySelector('link[href="'+c+'"]')){var d=document.createElement("link");d.href=c,d.rel="stylesheet",document.head.appendChild(d)}}}return vn[e]=t,t}var fl={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},cl={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},dl=function(t,e){var r=Uu(t,e);if(r.result==="error")throw new Error(r.value.map(function(n){return n.key+": "+n.message}).join(", "));return r.value},Fn={},kr={zoom:0},pr,mn;function _(t,e,r,n,a,i,o){var s=t.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[s]||(i[s]={});var l=i[s];if(!l[r]){var u=(t[e]||Fn)[r],p=Ri[e+"_"+t.type][r];u===void 0&&(u=p.default);var f=Gu(u);if(!f&&Mi(u)&&(u=Is(u,p),f=!0),f){var c=dl(u,p);l[r]=c.evaluate.bind(c)}else p.type=="color"&&(u=re.parse(u)),l[r]=function(){return u}}return kr.zoom=n,l[r](kr,a,o)}function hl(t,e,r,n){var a=_(t,"layout","icon-allow-overlap",e,r,n);if(!a)return"declutter";var i=_(t,"layout","icon-ignore-placement",e,r,n);return i?"none":"obstacle"}function vl(t,e,r,n,a){return a||console.warn("No filterCache provided to evaluateFilter()"),t in a||(a[t]=Hu(e).filter),kr.zoom=n,a[t](kr,r)}function _e(t,e){if(t){if(t.a===0||e===0)return;var r=t.a;return e=e===void 0?1:e,r===0?"transparent":"rgba("+Math.round(t.r*255/r)+","+Math.round(t.g*255/r)+","+Math.round(t.b*255/r)+","+r*e+")"}return t}var ml=/\{[^{}}]*\}/g;function yn(t,e){return t.replace(ml,function(r){return e[r.slice(1,-1)]||""})}function yl(t,e,r,n,a,i,o,s){if(n===void 0&&(n=le),a===void 0&&(a=void 0),i===void 0&&(i=void 0),o===void 0&&(o=void 0),s===void 0&&(s=void 0),typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");var l,u;if(i){if(typeof Image<"u"){var p=new Image;p.crossOrigin="anonymous",p.onload=function(){l=p,u=[p.width,p.height],t.changed(),p.onload=null},p.src=i}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){var f=self;f.postMessage({action:"loadImage",src:i}),f.addEventListener("message",function($){$.data.action==="imageLoaded"&&$.data.src===i&&(l=$.data.image,u=[l.width,l.height])})}}for(var c=Pi(e.layers),d={},v=[],y={},g={},h=Li(e),k=al(e),C,w=0,q=c.length;w<q;++w){var D=c[w],M=D.id;if(typeof r=="string"&&D.source==r||r.indexOf(M)!==-1){var A=D["source-layer"];if(C){if(D.source!==C)throw new Error('Layer "'+M+'" does not use source "'+C)}else{C=D.source;var L=e.sources[C];if(!L)throw new Error('Source "'+C+'" is not defined');var I=L.type;if(I!=="vector"&&I!=="geojson")throw new Error('Source "'+C+'" is not of type "vector" or "geojson", but "'+I+'"')}var P=d[A];P||(P=[],d[A]=P),P.push({layer:D,index:w}),v.push(M)}}var V=new nr,B=new ar,j=[],pe=function(H,$){var ae=H.getProperties(),W=d[ae.layer];if(!!W){var z=n.indexOf($);z==-1&&(z=Jn($,n));for(var Y=fl[H.getGeometry().getType()],E={id:H.getId(),properties:ae,type:Y},T=t.get("mapbox-featurestate")[H.getId()],G=-1,tt=0,rt=W.length;tt<rt;++tt){var nt=W[tt],b=nt.layer,Ki=b.id,_t=b.layout||Fn,Fe=b.paint||Fn;if(!(_t.visibility==="none"||"minzoom"in b&&z<b.minzoom||"maxzoom"in b&&z>=b.maxzoom)){var Xn=b.filter;if(!Xn||vl(Ki,Xn,E,z,k)){var ie=void 0,fe=void 0,Ht=void 0,se=void 0,ce=void 0,x=void 0,at=nt.index;if(Y==3&&(b.type=="fill"||b.type=="fill-extrusion"))if(fe=_(b,"paint",b.type+"-opacity",z,E,h,T),b.type+"-pattern"in Fe){var Jt=_(b,"paint",b.type+"-pattern",z,E,h,T);if(Jt){var Sr=typeof Jt=="string"?yn(Jt,ae):Jt.toString();if(l&&a&&a[Sr]){++G,x=j[G],(!x||!x.getFill()||x.getStroke()||x.getText())&&(x=new pt({fill:new ar}),j[G]=x),Ht=x.getFill(),x.setZIndex(at);var Kn=Sr+"."+fe,Xt=g[Kn];if(!Xt){var be=a[Sr],Wn=Oi(be.width,be.height),Fr=Wn.getContext("2d");Fr.globalAlpha=fe,Fr.drawImage(l,be.x,be.y,be.width,be.height,0,0,be.width,be.height),Xt=Fr.createPattern(Wn,"repeat"),g[Kn]=Xt}Ht.setColor(Xt)}}}else ie=_e(_(b,"paint",b.type+"-color",z,E,h,T),fe),b.type+"-outline-color"in Fe&&(ce=_e(_(b,"paint",b.type+"-outline-color",z,E,h,T),fe)),ce||(ce=ie),(ie||ce)&&(++G,x=j[G],(!x||ie&&!x.getFill()||!ie&&x.getFill()||ce&&!x.getStroke()||!ce&&x.getStroke()||x.getText())&&(x=new pt({fill:ie?new ar:void 0,stroke:ce?new nr:void 0}),j[G]=x),ie&&(Ht=x.getFill(),Ht.setColor(ie)),ce&&(se=x.getStroke(),se.setColor(ce),se.setWidth(.5)),x.setZIndex(at));if(Y!=1&&b.type=="line"){ie=!("line-pattern"in Fe)&&"line-color"in Fe?_e(_(b,"paint","line-color",z,E,h,T),_(b,"paint","line-opacity",z,E,h,T)):void 0;var Ar=_(b,"paint","line-width",z,E,h,T);ie&&Ar>0&&(++G,x=j[G],(!x||!x.getStroke()||x.getFill()||x.getText())&&(x=new pt({stroke:new nr}),j[G]=x),se=x.getStroke(),se.setLineCap(_(b,"layout","line-cap",z,E,h,T)),se.setLineJoin(_(b,"layout","line-join",z,E,h,T)),se.setMiterLimit(_(b,"layout","line-miter-limit",z,E,h,T)),se.setColor(ie),se.setWidth(Ar),se.setLineDash(Fe["line-dasharray"]?_(b,"paint","line-dasharray",z,E,h,T).map(function(ee){return ee*Ar}):null),x.setZIndex(at))}var Kt=!1,O=null,Yn=0,kt=void 0,Q=void 0,qr=void 0;if((Y==1||Y==2)&&"icon-image"in _t){var Wt=_(b,"layout","icon-image",z,E,h,T);if(Wt){kt=typeof Wt=="string"?yn(Wt,ae):Wt.toString();var Pr=void 0,Ae=s?s(t,kt):void 0;if(l&&a&&a[kt]||Ae){var jr=_(b,"layout","icon-rotation-alignment",z,E,h,T);if(Y==2){var xe=H.getGeometry();if(xe.getFlatMidpoint||xe.getFlatMidpoints){var Yt=xe.getExtent(),Wi=Math.sqrt(Math.max(Math.pow((Yt[2]-Yt[0])/$,2),Math.pow((Yt[3]-Yt[1])/$,2)));if(Wi>150){var it=xe.getType()==="MultiLineString"?xe.getFlatMidpoints():xe.getFlatMidpoint();mn||(pr=[NaN,NaN],mn=new mo("Point",pr,[],{},null)),Pr=mn,pr[0]=it[0],pr[1]=it[1];var Yi=_(b,"layout","symbol-placement",z,E,h,T);if(Yi==="line"&&jr==="map")for(var Qt=xe.getStride(),Et=xe.getFlatCoordinates(),ot=0,Qi=Et.length-Qt;ot<Qi;ot+=Qt){var Dr=Et[ot],Lr=Et[ot+1],Or=Et[ot+Qt],Nr=Et[ot+Qt+1],$i=Math.min(Dr,Or),eo=Math.min(Lr,Nr),to=Math.max(Dr,Or),ro=Math.max(Lr,Nr);if(it[0]>=$i&&it[0]<=to&&it[1]>=eo&&it[1]<=ro){Yn=Math.atan2(Lr-Nr,Or-Dr);break}}}}}if(Y!==2||Pr){var Qn=_(b,"layout","icon-size",z,E,h,T),de=Fe["icon-color"]!==void 0?_(b,"paint","icon-color",z,E,h,T):null;if(!de||de.a!==0){var $n=_(b,"paint","icon-halo-color",z,E,h,T),Gr=_(b,"paint","icon-halo-width",z,E,h,T),Ur=kt+"."+Qn+"."+Gr+"."+$n;if(de!==null&&(Ur+="."+de),Q=y[Ur],!Q){var ea=hl(b,z,E,h),$t=void 0;"icon-offset"in _t&&($t=_(b,"layout","icon-offset",z,E,h,T),$t[1]*=-1);var ta=de?[de.r*255,de.g*255,de.b*255,de.a]:void 0;if(Ae){var er={color:ta,rotateWithView:jr==="map",displacement:$t,declutterMode:ea};typeof Ae=="string"?er.src=Ae:(er.img=Ae,er.imgSize=[Ae.width,Ae.height]),Q=new ha(er)}else{var st=a[kt],Tt=void 0,Vr=void 0,ra=void 0,na=void 0;Gr?(Tt=il(l,st,Gr,$n),Vr=[Tt.width,Tt.height]):(Tt=l,Vr=u,ra=[st.width,st.height],na=[st.x,st.y]),Q=new ha({color:ta,img:Tt,imgSize:Vr,size:ra,offset:na,rotateWithView:jr==="map",scale:Qn/st.pixelRatio,displacement:$t,declutterMode:ea})}y[Ur]=Q}}Q&&(++G,x=j[G],(!x||!x.getImage()||x.getFill()||x.getStroke())&&(x=new pt,j[G]=x),x.setGeometry(Pr),Q.setRotation(Yn+dn(_(b,"layout","icon-rotate",z,E,h,T))),Q.setOpacity(_(b,"paint","icon-opacity",z,E,h,T)),Q.setAnchor(cl[_(b,"layout","icon-anchor",z,E,h,T)]),x.setImage(Q),O=x.getText(),x.setText(void 0),x.setZIndex(at),Kt=!0,qr=!1)}else qr=!0}}}if(Y==1&&b.type==="circle"){++G,x=j[G],(!x||!x.getImage()||x.getFill()||x.getStroke())&&(x=new pt,j[G]=x);var aa="circle-radius"in Fe?_(b,"paint","circle-radius",z,E,h,T):5,Zr=_e(_(b,"paint","circle-stroke-color",z,E,h,T),_(b,"paint","circle-stroke-opacity",z,E,h,T)),Br=_e(_(b,"paint","circle-color",z,E,h,T),_(b,"paint","circle-opacity",z,E,h,T)),Hr=_(b,"paint","circle-stroke-width",z,E,h,T),ia=aa+"."+Zr+"."+Br+"."+Hr;Q=y[ia],Q||(Q=new so({radius:aa,stroke:Zr&&Hr>0?new nr({width:Hr,color:Zr}):void 0,fill:Br?new ar({color:Br}):void 0,declutterMode:"none"}),y[ia]=Q),x.setImage(Q),O=x.getText(),x.setText(void 0),x.setGeometry(void 0),x.setZIndex(at),Kt=!0}var X=void 0,Ct=void 0,It=void 0,we=void 0,Mt=void 0,Jr=void 0;if("text-field"in _t){we=Math.round(_(b,"layout","text-size",z,E,h,T));var Xr=_(b,"layout","text-font",z,E,h,T);It=_(b,"layout","text-line-height",z,E,h,T),Ct=Mn(o?o(Xr):Xr,we,It),Ct.includes("sans-serif")||(Ct+=",sans-serif"),Mt=_(b,"layout","text-letter-spacing",z,E,h,T),Jr=_(b,"layout","text-max-width",z,E,h,T);var ut=_(b,"layout","text-field",z,E,h,T);typeof ut=="object"&&ut.sections?ut.sections.length===1?X=ut.toString():X=ut.sections.reduce(function(ee,ze,Sl){var da=ze.fontStack?ze.fontStack.split(","):Xr,Qr=Mn(o?o(da):da,we*(ze.scale||1),It),lt=ze.text;if(lt===`
`)return ee.push(`
`,""),ee;if(Y==2){ee.push(Rn(lt,Mt),Qr);return}lt=Sn(lt,Qr,Jr,Mt).split(`
`);for(var rr=0,io=lt.length;rr<io;++rr)rr>0&&ee.push(`
`,""),ee.push(lt[rr],Qr);return ee},[]):X=yn(ut,ae).trim(),fe=_(b,"paint","text-opacity",z,E,h,T)}if(X&&fe&&!qr){Kt||(++G,x=j[G],(!x||!x.getText()||x.getFill()||x.getStroke())&&(x=new pt,j[G]=x),x.setImage(void 0),x.setGeometry(void 0)),x.getText()||x.setText(O||new uo({padding:[2,2,2,2]})),O=x.getText();var oa=_t["text-transform"];oa=="uppercase"?X=Array.isArray(X)?X.map(function(ee,ze){return ze%2?ee:ee.toUpperCase()}):X.toUpperCase():oa=="lowercase"&&(X=Array.isArray(X)?X.map(function(ee,ze){return ze%2?ee:ee.toLowerCase()}):X.toLowerCase());var sa=Array.isArray(X)?X:Y==2?Rn(X,Mt):Sn(X,Ct,Jr,Mt);O.setText(sa),O.setFont(Ct),O.setRotation(dn(_(b,"layout","text-rotate",z,E,h,T)));var tr=_(b,"layout","text-anchor",z,E,h,T),Rt=Kt||Y==1?"point":_(b,"layout","symbol-placement",z,E,h,T),St=void 0;if(Rt==="line-center"?(O.setPlacement("line"),St="center"):O.setPlacement(Rt),Rt==="line"&&typeof O.setRepeat=="function"){var no=_(b,"layout","symbol-spacing",z,E,h,T);O.setRepeat(no*2)}O.setOverflow(Rt==="point");var qe=_(b,"paint","text-halo-width",z,E,h,T),ua=_(b,"layout","text-offset",z,E,h,T),la=_(b,"paint","text-translate",z,E,h,T),Kr=0,Wr=0;if(Rt=="point"){St="center",tr.indexOf("left")!==-1?(St="left",Wr=qe):tr.indexOf("right")!==-1&&(St="right",Wr=-qe);var ao=_(b,"layout","text-rotation-alignment",z,E,h,T);O.setRotateWithView(ao=="map")}else O.setMaxAngle(dn(_(b,"layout","text-max-angle",z,E,h,T))*X.length/sa.length),O.setRotateWithView(!1);O.setTextAlign(St);var Yr="middle";tr.indexOf("bottom")==0?(Yr="bottom",Kr=-qe-.5*(It-1)*we):tr.indexOf("top")==0&&(Yr="top",Kr=qe+.5*(It-1)*we),O.setTextBaseline(Yr);var pa=_(b,"layout","text-justify",z,E,h,T);O.setJustify(pa==="auto"?void 0:pa),O.setOffsetX(ua[0]*we+Wr+la[0]),O.setOffsetY(ua[1]*we+Kr+la[1]),B.setColor(_e(_(b,"paint","text-color",z,E,h,T),fe)),O.setFill(B);var fa=_e(_(b,"paint","text-halo-color",z,E,h,T),fe);if(fa){V.setColor(fa),qe*=2;var ca=.5*we;V.setWidth(qe<=ca?qe:ca),O.setStroke(V)}else O.setStroke(void 0);var Ft=_(b,"layout","text-padding",z,E,h,T),At=O.getPadding();Ft!==At[0]&&(At[0]=Ft,At[1]=Ft,At[2]=Ft,At[3]=Ft),x.setZIndex(at)}}}}if(G>-1)return j.length=G+1,j}};return t.setStyle(pe),t.set("mapbox-source",C),t.set("mapbox-layers",v),t.set("mapbox-featurestate",{}),pe}function gl(t,e){var r=t[0],n=r.width,a=r.height,i=r.data,o=new Uint8ClampedArray(i.length),s=e.resolution*2,l=n-1,u=a-1,p=[0,0,0,0],f=2*Math.PI,c=Math.PI/2,d=Math.PI*e.sunEl/180,v=Math.PI*e.sunAz/180,y=Math.cos(d),g=Math.sin(d),h=e.highlightColor,k=e.shadowColor,C=e.accentColor,w,q,D,M,A,L,I,P,V,B,j,pe,H,$,ae,W,z,Y,E,T,G,tt;function rt(nt){return(nt[0]*256*256+nt[1]*256+nt[2])*.1-1e4}for(q=0;q<=u;++q)for(A=q===0?0:q-1,L=q===u?u:q+1,w=0;w<=l;++w)D=w===0?0:w-1,M=w===l?l:w+1,I=(q*n+D)*4,p[0]=i[I],p[1]=i[I+1],p[2]=i[I+2],p[3]=i[I+3],P=e.vert*rt(p),I=(q*n+M)*4,p[0]=i[I],p[1]=i[I+1],p[2]=i[I+2],p[3]=i[I+3],V=e.vert*rt(p),B=(V-P)/s,I=(A*n+w)*4,p[0]=i[I],p[1]=i[I+1],p[2]=i[I+2],p[3]=i[I+3],P=e.vert*rt(p),I=(L*n+w)*4,p[0]=i[I],p[1]=i[I+1],p[2]=i[I+2],p[3]=i[I+3],V=e.vert*rt(p),j=(V-P)/s,H=Math.atan2(j,-B),H<0?H=c-H:H>c?H=f-H+c:H=c-H,pe=Math.atan(Math.sqrt(B*B+j*j)),tt=g*Math.cos(pe)+y*Math.sin(pe)*Math.cos(v-H),$=Math.cos(pe),ae=255*tt,E=Math.min(Math.max(2*e.sunEl,0),1),T=1.875-e.opacity*1.75,G=e.opacity!==.5?c*((Math.pow(T,pe)-1)/(Math.pow(T,c)-1)):pe,z={r:(1-$)*C.r*E*255,g:(1-$)*C.g*E*255,b:(1-$)*C.b*E*255,a:(1-$)*C.a*E*255},W=Math.abs(((H+v)/Math.PI+.5)%2-1),Y={r:(h.r*(1-W)+k.r*W)*ae,g:(h.g*(1-W)+k.g*W)*ae,b:(h.b*(1-W)+k.b*W)*ae,a:(h.a*(1-W)+k.a*W)*ae},I=(q*n+w)*4,o[I]=z.r*(1-W)+Y.r,o[I+1]=z.g*(1-W)+Y.g,o[I+2]=z.b*(1-W)+Y.b,o[I+3]=i[I+3]*e.opacity*E*Math.sin(G);return new ImageData(o,n,a)}function bl(t,e){return e===void 0&&(e=512),t.getExtent()?Xa({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():le}function Vi(t,e){if(!e.accessToken){e=Object.assign({},e);var r=new URL(t).searchParams;r.forEach(function(n,a){e.accessToken=n,e.accessTokenParam=a})}return e}function xl(t,e,r,n,a){r===void 0&&(r=""),n===void 0&&(n={}),a===void 0&&(a=void 0);var i,o,s,l,u=!0;return typeof r!="string"&&!Array.isArray(r)?(s=r,l=s.source||s.layers,n=s):l=r,typeof n=="string"?(i=n,s={}):(i=n.styleUrl,s=n),s.updateSource===!1&&(u=!1),a||(a=s.resolutions),!i&&typeof e=="string"&&!e.trim().startsWith("{")&&(i=e),i&&(i=i.startsWith("data:")?location.href:zr(i,s.accessToken),s=Vi(i,s)),new Promise(function(p,f){Ni(e,s).then(function(c){if(c.version!=8)return f(new Error("glStyle version 8 required."));if(!(t instanceof Ja||t instanceof cr))return f(new Error("Can only apply to VectorLayer or VectorTileLayer"));var d=t instanceof cr?"vector":"geojson";if(l?Array.isArray(l)?o=c.layers.find(function(M){return M.id===l[0]}).source:o=l:(o=Object.keys(c.sources).find(function(M){return c.sources[M].type===d}),l=o),!o)return f(new Error("No "+d+" source found in the glStyle."));function v(){if(!u)return Promise.resolve();if(t instanceof cr)return Bi(c.sources[o],i,s).then(function(I){var P=t.getSource();if(P?I!==P&&(P.setTileUrlFunction(I.getTileUrlFunction()),P.format_||(P.format_=I.format_),P.getAttributions()||P.setAttributions(I.getAttributions()),P.getTileLoadFunction()===co&&P.setTileLoadFunction(I.getTileLoadFunction()),ke(P.getProjection(),I.getProjection())&&(P.tileGrid=I.getTileGrid())):t.setSource(I),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var V=t.getSource().getTileGrid();t.setMaxResolution(V.getResolution(V.getMinZoom()))}});var M=c.sources[o],A=t.getSource();(!A||A.get("mapbox-source")!==M)&&(A=Xi(M,i,s));var L=t.getSource();return L?A!==L&&(L.getAttributions()||L.setAttributions(A.getAttributions()),L.format_||(L.format_=A.getFormat()),L.url_=A.getUrl()):t.setSource(A),Promise.resolve()}var y,g,h,k;function C(){if(!k&&(!c.sprite||g)){if(s.projection&&!a){var M=Re(s.projection),A=M.getUnits();A!=="m"&&(a=le.map(function(L){return L/wn[A]}))}k=yl(t,c,l,a,g,h,pl,s.getImage),t.getStyle()?v().then(p).catch(f):f(new Error("Nothing to show for source ["+o+"]"))}else k?(t.setStyle(k),v().then(p).catch(f)):f(new Error("Something went wrong trying to apply style."))}if(c.sprite){var w=new URL(tl(c.sprite,s.accessToken,i||location.href));y=window.devicePixelRatio>=1.5?.5:1;var q=y==.5?"@2x":"",D=w.origin+w.pathname+q+".json"+w.search;new Promise(function(M,A){_r("Sprite",D,s).then(M).catch(function(L){D=w.origin+w.pathname+".json"+w.search,_r("Sprite",D,s).then(M).catch(A)})}).then(function(M){if(M===void 0&&f(new Error("No sprites found.")),g=M,h=w.origin+w.pathname+q+".png"+w.search,s.transformRequest){var A=s.transformRequest(h,"SpriteImage");A instanceof Request&&(h=encodeURI(A.url))}C()}).catch(function(M){f(new Error("Sprites cannot be loaded: "+D+": "+M.message))})}else C()}).catch(f)})}var Ee={};function wl(t,e){var r;return t.some(function(n){if(n.id==e)return r=n.source,!0}),r}function zl(t,e){var r=t.bounds;if(r){var n=zn([r[0],r[1]],e),a=zn([r[2],r[3]],e);return[n[0],n[1],a[0],a[1]]}return Re(e).getExtent()}function Zi(t,e,r){var n=new ri({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),a=n.getTileJSON(),i=n.getTileGrid(),o=Re(r.projection||"EPSG:3857"),s=zl(a,o),l=o.getExtent(),u=a.minzoom||0,p=a.maxzoom||22,f={attributions:n.getAttributions(),projection:o,tileGrid:new Yo({origin:l?jo(l):i.getOrigin(0),extent:s||i.getExtent(),minZoom:u,resolutions:bl(o,e.tileSize).slice(0,p+1),tileSize:i.getTileSize(0)})};return Array.isArray(a.tiles)?f.urls=a.tiles:f.url=a.tiles,f}function _l(t,e,r,n){var a={id:t.id,type:t.type},i=t.layout||{},o=t.paint||{};a.paint=o;var s=Jn(e,r.resolutions||le),l,u;return o["background-color"]!==void 0&&(l=_(a,"paint","background-color",s,Ee,n)),o["background-opacity"]!==void 0&&(u=_(a,"paint","background-opacity",s,Ee,n)),i.visibility=="none"?void 0:_e(l,u)}function kl(t,e,r){var n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new Ga({source:new Tr({}),render:function(i){var o=_l(t,i.viewState.resolution,e,r);return n.style.backgroundColor=o,n}})}function Bi(t,e,r){return new Promise(function(n,a){Gi(t,e,r).then(function(i){var o=Zi(t,i,r);o.format=new ho,Array.isArray(i.tiles)?o.urls=i.tiles:o.url=i.tiles,n(new Na(o))}).catch(a)})}function El(t,e,r){var n=new cr({declutter:!0,visible:!1});return Bi(t,e,r).then(function(a){a.set("mapbox-source",t),n.setSource(a)}).catch(function(a){n.setSource(void 0)}),n}function Hi(t){var e=t?t.getCode():"EPSG:3857";return"{bbox-"+e.toLowerCase().replace(/[^a-z0-9]/g,"-")+"}"}function Ji(t,e,r){var n=new Qa;return Gi(t,e,r).then(function(a){var i=new ri({interpolate:r.interpolate===void 0?!0:r.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:a});i.tileGrid=Zi(t,a,r).tileGrid,r.projection&&(i.projection=Re(r.projection));var o=i.getTileUrlFunction();i.setTileUrlFunction(function(s,l,u){var p=Hi(u),f=o(s,l,u);if(f.indexOf(p)!=-1){var c=i.getTileGrid().getTileCoordExtent(s);f=f.replace(p,c.toString())}return f}),i.set("mapbox-source",t),n.setSource(i)}).catch(function(a){n.setSource(void 0)}),n}function Tl(t,e,r){var n=Ji(t,e,r),a=new Wa({source:new ws({operationType:"image",operation:gl,sources:[n]})});return a}var fr=new Do;function Xi(t,e,r){var n=t.data,a={};if(typeof n=="string"){var i=mr(n,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(r.transformRequest){var o=r.transformRequest(i,"GeoJSON");o instanceof Request&&(i=decodeURI(o.url))}if(/\{bbox-[0-9a-z-]+\}/.test(i)){var s=function(p,f,c){var d=Hi(c);return i.replace(d,""+p.join(","))},l=new hr({attributions:t.attribution,format:fr,url:s,strategy:Lo});return l.set("mapbox-source",t),l}return new hr({attributions:t.attribution,format:fr,url:i})}a.features=fr.readFeatures(n,{featureProjection:Po()||"EPSG:3857"});var u=new hr(Object.assign({attributions:t.attribution,format:fr},a));return u.set("mapbox-source",t),u}function Cl(t,e,r){return new Ja({declutter:!0,source:Xi(t,e,r),visible:!1})}function Il(t,e,r){var n=null;return function(a){t.paint&&"raster-opacity"in t.paint&&a.frameState.viewState.zoom!==n&&(n=a.frameState.viewState.zoom,delete r[t.id],Ml(t,e,n,r))}}function Ml(t,e,r,n){var a=_(t,"paint","raster-opacity",r,Ee,n);e.setOpacity(a)}function Rl(t,e){function r(){var n=e.get("mapbox-style");if(!!n){var a=Pi(n.layers),i=t.get("mapbox-layers"),o=a.filter(function(s){return i.includes(s.id)}).some(function(s){return!s.layout||!s.layout.visibility||s.layout.visibility==="visible"});t.get("visible")!==o&&t.setVisible(o)}}t.on("change",r),r()}function La(t,e,r,n){var a=[],i=null;if(e instanceof Ha){if(i=e.getView(),!i.isDef()&&!i.getRotation()&&!i.getResolutions()){var o=n.projection?Re(n.projection):i.getProjection();i=new Fo(Object.assign(i.getProperties(),{maxResolution:le[0]/wn[o.getUnits()],projection:n.projection||i.getProjection()})),e.setView(i)}"center"in t&&!i.getCenter()&&i.setCenter(zn(t.center,i.getProjection())),"zoom"in t&&i.getZoom()===void 0&&i.setResolution(le[0]/wn[i.getProjection().getUnits()]/Math.pow(2,t.zoom)),(!i.getCenter()||i.getZoom()===void 0)&&i.fit(i.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}for(var s=t.layers,l=[],u,p,f,c,d=function(g,h){var k=s[g],C=k.type;if(C=="heatmap")throw new Error(C+" layers are not supported");if(c=k.source||wl(s,k.ref),!c||c!=f){l.length&&(a.push(Oa(u,l,t,r,e,n)),l=[]);var w=Li(t);if(p=t.sources[c],C=="background")u=kl(k,n,w);else if(p.type=="vector")u=El(p,r,n);else if(p.type=="raster")l=[],u=Ji(p,r,n),u.setVisible(k.layout?k.layout.visibility!=="none":!0),u.on("prerender",Il(k,u,w));else if(p.type=="geojson")u=Cl(p,r,n);else if(p.type=="raster-dem"&&k.type=="hillshade"){l=[];var q=Tl(p,r,n);u=q,q.getSource().on("beforeoperations",function(D){var M=D.data;M.resolution=D.resolution;var A=Jn(D.resolution,n.resolutions||le);M.vert=5*_(k,"paint","hillshade-exaggeration",A,Ee,w),M.sunAz=_(k,"paint","hillshade-illumination-direction",A,Ee,w),M.sunEl=35,M.opacity=.3,M.highlightColor=_(k,"paint","hillshade-highlight-color",A,Ee,w),M.shadowColor=_(k,"paint","hillshade-shadow-color",A,Ee,w),M.accentColor=_(k,"paint","hillshade-accent-color",A,Ee,w)}),u.setVisible(k.layout?k.layout.visibility!=="none":!0)}f=c,u&&u.set("mapbox-source",f)}l.push(k.id)},v=0,y=s.length;v<y;++v)d(v);return a.push(Oa(u,l,t,r,e,n)),e.set("mapbox-style",t),Promise.all(a)}function Ol(t,e,r){r===void 0&&(r={});var n,a;if(typeof t=="string"||t instanceof HTMLElement?a=new Ha({target:t}):a=t,typeof e=="string"){var i=e.startsWith("data:")?location.href:zr(e,r.accessToken);r=Vi(i,r),n=new Promise(function(o,s){Ni(e,r).then(function(l){La(l,a,i,r).then(function(){o(a)}).catch(s)}).catch(function(l){s(new Error("Could not load "+e+": "+l.message))})})}else n=new Promise(function(o,s){La(e,a,!r.styleUrl||r.styleUrl.startsWith("data:")?location.href:zr(r.styleUrl,r.accessToken),r).then(function(){o(a)}).catch(s)});return n}function Oa(t,e,r,n,a,i){i===void 0&&(i={});for(var o=24,s=0,l=r.layers,u=0,p=l.length;u<p;++u){var f=l[u];e.indexOf(f.id)!==-1&&(o=Math.min("minzoom"in f?f.minzoom:0,o),s=Math.max("maxzoom"in f?f.maxzoom:24,s))}return new Promise(function(c,d){var v=function(){var g=t.getSource();if(!g||g.getState()==="error"){d(new Error("Error accessing data for source "+t.get("mapbox-source")));return}if("getTileGrid"in g){var h=g.getTileGrid();if(h){var k=h.getMinZoom();(o>0||k>0)&&t.setMaxResolution(Math.min(le[o],h.getResolution(k))+1e-9),s<24&&t.setMinResolution(le[s]+1e-9)}}else o>0&&t.setMaxResolution(le[o]+1e-9);g instanceof hr||g instanceof Na?xl(t,r,e,Object.assign({styleUrl:n},i)).then(function(){Rl(t,a),c()}).catch(d):c()};t.set("mapbox-layers",e);var y=a.getLayers();y.getArray().indexOf(t)===-1&&y.push(t),t.getSource()?v():t.once("change:source",v)})}export{Ol as a,xl as b};
