import{g as Tt,a as fi,b as di,c as ci,e as vi,d as ca,f as hi,i as mi,M as yi,r as gi,h as bi,S as Gt,F as Ut,j as xi,k as wi,l as We,I as Hn,C as zi,T as ki,m as Ti,n as Ci,o as Yn,p as Ei,V as _i}from"./featureloader.09c78551.js";import{j as Mi,V as Wt,d as qi,M as va,a as Si,R as Fi,O as Ai}from"./OGCVectorTile.b88ea054.js";import{T as Ii,G as Di,V as Pi,a as jr,b as Ri}from"./Vector.fa9826be.js";class Ni extends Ii{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Tt("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Mi(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const r=new XMLHttpRequest;r.addEventListener("load",this.onXHRLoad_.bind(this)),r.addEventListener("error",this.onXHRError_.bind(this)),r.open("GET",e.url),r.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):fi(!1,51)}onXHRLoad_(e){const r=e.target;if(!r.status||r.status>=200&&r.status<300){let n;try{n=JSON.parse(r.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const r=Tt("EPSG:4326"),n=this.getProjection();let a;if(e.bounds!==void 0){const l=di(r,n);a=ci(e.bounds,l)}const i=vi(n),o=e.minzoom||0,u=e.maxzoom||22,s=ca({extent:i,maxZoom:u,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=hi(e.tiles,s),e.attribution&&!this.getAttributions()){const l=a!==void 0?a:i;this.setAttributions(function(p){return mi(l,p.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const ji=Ni;var Oi={},ha,Qn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function zt(t){return t=Math.round(t),t<0?0:t>255?255:t}function Kn(t){return t<0?0:t>1?1:t}function Or(t){return t[t.length-1]==="%"?zt(parseFloat(t)/100*255):zt(parseInt(t))}function Jt(t){return t[t.length-1]==="%"?Kn(parseFloat(t)/100):Kn(parseFloat(t))}function Lr(t,e,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?t+(e-t)*r*6:r*2<1?e:r*3<2?t+(e-t)*(2/3-r)*6:t}function Li(t){var e=t.replace(/ /g,"").toLowerCase();if(e in Qn)return Qn[e].slice();if(e[0]==="#"){if(e.length===4){var r=parseInt(e.substr(1),16);return r>=0&&r<=4095?[(r&3840)>>4|(r&3840)>>8,r&240|(r&240)>>4,r&15|(r&15)<<4,1]:null}else if(e.length===7){var r=parseInt(e.substr(1),16);return r>=0&&r<=16777215?[(r&16711680)>>16,(r&65280)>>8,r&255,1]:null}return null}var n=e.indexOf("("),a=e.indexOf(")");if(n!==-1&&a+1===e.length){var i=e.substr(0,n),o=e.substr(n+1,a-(n+1)).split(","),u=1;switch(i){case"rgba":if(o.length!==4)return null;u=Jt(o.pop());case"rgb":return o.length!==3?null:[Or(o[0]),Or(o[1]),Or(o[2]),u];case"hsla":if(o.length!==4)return null;u=Jt(o.pop());case"hsl":if(o.length!==3)return null;var s=(parseFloat(o[0])%360+360)%360/360,l=Jt(o[1]),p=Jt(o[2]),f=p<=.5?p*(l+1):p+l-p*l,d=p*2-f;return[zt(Lr(d,f,s+1/3)*255),zt(Lr(d,f,s)*255),zt(Lr(d,f,s-1/3)*255),u];default:return null}}return null}try{ha=Oi.parseCSSColor=Li}catch{}var Z=function(e,r,n,a){a===void 0&&(a=1),this.r=e,this.g=r,this.b=n,this.a=a};Z.parse=function(e){if(!!e){if(e instanceof Z)return e;if(typeof e=="string"){var r=ha(e);if(!!r)return new Z(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}};Z.prototype.toString=function(){var e=this.toArray(),r=e[0],n=e[1],a=e[2],i=e[3];return"rgba("+Math.round(r)+","+Math.round(n)+","+Math.round(a)+","+i+")"};Z.prototype.toArray=function(){var e=this,r=e.r,n=e.g,a=e.b,i=e.a;return i===0?[0,0,0,0]:[r*255/i,n*255/i,a*255/i,i]};Z.prototype.toArray01=function(){var e=this,r=e.r,n=e.g,a=e.b,i=e.a;return i===0?[0,0,0,0]:[r/i,n/i,a/i,i]};Z.prototype.toArray01PremultipliedAlpha=function(){var e=this,r=e.r,n=e.g,a=e.b,i=e.a;return[r,n,a,i]};Z.black=new Z(0,0,0,1);Z.white=new Z(1,1,1,1);Z.transparent=new Z(0,0,0,0);Z.red=new Z(1,0,0,1);Z.blue=new Z(0,0,1,1);var Y=Z;function Ct(t){return typeof t=="object"?["literal",t]:t}function Vi(t,e){var r=t.stops;if(!r)return Zi(t,e);var n=r&&typeof r[0][0]=="object",a=n||t.property!==void 0,i=n||!a;return r=r.map(function(o){return!a&&e.tokens&&typeof o[1]=="string"?[o[0],Xi(o[1])]:[o[0],Ct(o[1])]}),n?Gi(t,e,r):i?Ji(t,e,r):en(t,e,r)}function Zi(t,e){var r=["get",t.property];if(t.default===void 0)return e.type==="string"?["string",r]:r;if(e.type==="enum")return["match",r,Object.keys(e.values),r,t.default];var n=[e.type==="color"?"to-color":e.type,r,Ct(t.default)];return e.type==="array"&&n.splice(1,0,e.value,e.length||null),n}function fn(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Gi(t,e,r){for(var n={},a={},i=[],o=0;o<r.length;o++){var u=r[o],s=u[0].zoom;n[s]===void 0&&(n[s]={zoom:s,type:t.type,property:t.property,default:t.default},a[s]=[],i.push(s)),a[s].push([u[0].value,u[1]])}var l=cn({},e);if(l==="exponential"){for(var p=[fn(t),["linear"],["zoom"]],f=0,d=i;f<d.length;f+=1){var c=d[f],x=en(n[c],e,a[c]);rt(p,c,x,!1)}return p}else{for(var g=["step",["zoom"]],_=0,h=i;_<h.length;_+=1){var I=h[_],q=en(n[I],e,a[I]);rt(g,I,q,!0)}return dn(g),g}}function Ui(t,e){if(t!==void 0)return t;if(e!==void 0)return e}function Wn(t,e){var r=Ct(Ui(t.default,e.default));return r===void 0&&e.type==="resolvedImage"?"":r}function en(t,e,r){var n=cn(t,e),a=["get",t.property];if(n==="categorical"&&typeof r[0][0]=="boolean"){for(var i=["case"],o=0,u=r;o<u.length;o+=1){var s=u[o];i.push(["==",a,s[0]],s[1])}return i.push(Wn(t,e)),i}else if(n==="categorical"){for(var l=["match",a],p=0,f=r;p<f.length;p+=1){var d=f[p];rt(l,d[0],d[1],!1)}return l.push(Wn(t,e)),l}else if(n==="interval"){for(var c=["step",["number",a]],x=0,g=r;x<g.length;x+=1){var _=g[x];rt(c,_[0],_[1],!0)}return dn(c),t.default===void 0?c:["case",["==",["typeof",a],"number"],c,Ct(t.default)]}else if(n==="exponential"){for(var h=t.base!==void 0?t.base:1,I=[fn(t),h===1?["linear"]:["exponential",h],["number",a]],q=0,M=r;q<M.length;q+=1){var V=M[q];rt(I,V[0],V[1],!1)}return t.default===void 0?I:["case",["==",["typeof",a],"number"],I,Ct(t.default)]}else throw new Error("Unknown property function type "+n)}function Ji(t,e,r,n){n===void 0&&(n=["zoom"]);var a=cn(t,e),i,o=!1;if(a==="interval")i=["step",n],o=!0;else if(a==="exponential"){var u=t.base!==void 0?t.base:1;i=[fn(t),u===1?["linear"]:["exponential",u],n]}else throw new Error('Unknown zoom function type "'+a+'"');for(var s=0,l=r;s<l.length;s+=1){var p=l[s];rt(i,p[0],p[1],o)}return dn(i),i}function dn(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function rt(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&t.length===2||t.push(e),t.push(r))}function cn(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function Xi(t){for(var e=["concat"],r=/{([^{}]+)}/g,n=0,a=r.exec(t);a!==null;a=r.exec(t)){var i=t.slice(n,r.lastIndex-a[0].length);n=r.lastIndex,i.length>0&&e.push(i),e.push(["get",a[1]])}if(e.length===1)return t;if(n<t.length)e.push(t.slice(n));else if(e.length===2)return["to-string",e[1]];return e}var Bi=function(t){function e(r,n){t.call(this,n),this.message=n,this.key=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),re=Bi,Et=function(e,r){r===void 0&&(r=[]),this.parent=e,this.bindings={};for(var n=0,a=r;n<a.length;n+=1){var i=a[n],o=i[0],u=i[1];this.bindings[o]=u}};Et.prototype.concat=function(e){return new Et(this,e)};Et.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")};Et.prototype.has=function(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1};var Hi=Et,sr={kind:"null"},v={kind:"number"},E={kind:"string"},T={kind:"boolean"},le={kind:"color"},nt={kind:"object"},C={kind:"value"},Yi={kind:"error"},lr={kind:"collator"},pr={kind:"formatted"},Ft={kind:"resolvedImage"};function K(t,e){return{kind:"array",itemType:t,N:e}}function A(t){if(t.kind==="array"){var e=A(t.itemType);return typeof t.N=="number"?"array<"+e+", "+t.N+">":t.itemType.kind==="value"?"array":"array<"+e+">"}else return t.kind}var Qi=[sr,v,E,T,le,pr,nt,K(C),Ft];function _t(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!_t(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value")for(var r=0,n=Qi;r<n.length;r+=1){var a=n[r];if(!_t(a,e))return null}}return"Expected "+A(t)+" but found "+A(e)+" instead."}function vn(t,e){return e.some(function(r){return r.kind===t.kind})}function Mt(t,e){return e.some(function(r){return r==="null"?t===null:r==="array"?Array.isArray(t):r==="object"?t&&!Array.isArray(t)&&typeof t=="object":r===typeof t})}var hn=function(e,r,n){e?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};hn.prototype.compare=function(e,r){return this.collator.compare(e,r)};hn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var mn=hn,tn=function(e,r,n,a,i){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=n,this.fontStack=a,this.textColor=i},pe=function(e){this.sections=e};pe.fromString=function(e){return new pe([new tn(e,null,null,null,null)])};pe.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})};pe.factory=function(e){return e instanceof pe?e:pe.fromString(e)};pe.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")};pe.prototype.serialize=function(){for(var e=["format"],r=0,n=this.sections;r<n.length;r+=1){var a=n[r];if(a.image){e.push(["image",a.image.name]);continue}e.push(a.text);var i={};a.fontStack&&(i["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(i["font-scale"]=a.scale),a.textColor&&(i["text-color"]=["rgba"].concat(a.textColor.toArray())),e.push(i)}return e};var ot=pe,qt=function(e){this.name=e.name,this.available=e.available};qt.prototype.toString=function(){return this.name};qt.fromString=function(e){return e?new qt({name:e,available:!1}):null};qt.prototype.serialize=function(){return["image",this.name]};var ut=qt;function ma(t,e,r,n){if(!(typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255)){var a=typeof n=="number"?[t,e,r,n]:[t,e,r];return"Invalid rgba value ["+a.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1."}function tr(t){if(t===null)return!0;if(typeof t=="string")return!0;if(typeof t=="boolean")return!0;if(typeof t=="number")return!0;if(t instanceof Y)return!0;if(t instanceof mn)return!0;if(t instanceof ot)return!0;if(t instanceof ut)return!0;if(Array.isArray(t)){for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(!tr(n))return!1}return!0}else if(typeof t=="object"){for(var a in t)if(!tr(t[a]))return!1;return!0}else return!1}function L(t){if(t===null)return sr;if(typeof t=="string")return E;if(typeof t=="boolean")return T;if(typeof t=="number")return v;if(t instanceof Y)return le;if(t instanceof mn)return lr;if(t instanceof ot)return pr;if(t instanceof ut)return Ft;if(Array.isArray(t)){for(var e=t.length,r,n=0,a=t;n<a.length;n+=1){var i=a[n],o=L(i);if(!r)r=o;else{if(r===o)continue;r=C;break}}return K(r||C,e)}else return nt}function kt(t){var e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof Y||t instanceof ot||t instanceof ut?t.toString():JSON.stringify(t)}var qe=function(e,r){this.type=e,this.value=r};qe.parse=function(e,r){if(e.length!==2)return r.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!tr(e[1]))return r.error("invalid value");var n=e[1],a=L(n),i=r.expectedType;return a.kind==="array"&&a.N===0&&i&&i.kind==="array"&&(typeof i.N!="number"||i.N===0)&&(a=i),new qe(a,n)};qe.prototype.evaluate=function(){return this.value};qe.prototype.eachChild=function(){};qe.prototype.outputDefined=function(){return!0};qe.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Y?["rgba"].concat(this.value.toArray()):this.value instanceof ot?this.value.serialize():this.value};var rr=qe,ya=function(e){this.name="ExpressionEvaluationError",this.message=e};ya.prototype.toJSON=function(){return this.message};var J=ya,Vr={string:E,number:v,boolean:T,object:nt},Se=function(e,r){this.type=e,this.args=r};Se.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=1,a,i=e[0];if(i==="array"){var o;if(e.length>2){var u=e[1];if(typeof u!="string"||!(u in Vr)||u==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);o=Vr[u],n++}else o=C;var s;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);s=e[2],n++}a=K(o,s)}else a=Vr[i];for(var l=[];n<e.length;n++){var p=r.parse(e[n],n,C);if(!p)return null;l.push(p)}return new Se(a,l)};Se.prototype.evaluate=function(e){for(var r=0;r<this.args.length;r++){var n=this.args[r].evaluate(e),a=_t(this.type,L(n));if(a){if(r===this.args.length-1)throw new J("Expected value to be of type "+A(this.type)+", but found "+A(L(n))+" instead.")}else return n}return null};Se.prototype.eachChild=function(e){this.args.forEach(e)};Se.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})};Se.prototype.serialize=function(){var e=this.type,r=[e.kind];if(e.kind==="array"){var n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){r.push(n.kind);var a=e.N;(typeof a=="number"||this.args.length>1)&&r.push(a)}}return r.concat(this.args.map(function(i){return i.serialize()}))};var ue=Se,Fe=function(e){this.type=pr,this.sections=e};Fe.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");for(var a=[],i=!1,o=1;o<=e.length-1;++o){var u=e[o];if(i&&typeof u=="object"&&!Array.isArray(u)){i=!1;var s=null;if(u["font-scale"]&&(s=r.parse(u["font-scale"],1,v),!s))return null;var l=null;if(u["text-font"]&&(l=r.parse(u["text-font"],1,K(E)),!l))return null;var p=null;if(u["text-color"]&&(p=r.parse(u["text-color"],1,le),!p))return null;var f=a[a.length-1];f.scale=s,f.font=l,f.textColor=p}else{var d=r.parse(e[o],1,C);if(!d)return null;var c=d.type.kind;if(c!=="string"&&c!=="value"&&c!=="null"&&c!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,a.push({content:d,scale:null,font:null,textColor:null})}}return new Fe(a)};Fe.prototype.evaluate=function(e){var r=function(n){var a=n.content.evaluate(e);return L(a)===Ft?new tn("",a,null,null,null):new tn(kt(a),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)};return new ot(this.sections.map(r))};Fe.prototype.eachChild=function(e){for(var r=0,n=this.sections;r<n.length;r+=1){var a=n[r];e(a.content),a.scale&&e(a.scale),a.font&&e(a.font),a.textColor&&e(a.textColor)}};Fe.prototype.outputDefined=function(){return!1};Fe.prototype.serialize=function(){for(var e=["format"],r=0,n=this.sections;r<n.length;r+=1){var a=n[r];e.push(a.content.serialize());var i={};a.scale&&(i["font-scale"]=a.scale.serialize()),a.font&&(i["text-font"]=a.font.serialize()),a.textColor&&(i["text-color"]=a.textColor.serialize()),e.push(i)}return e};var ga=Fe,Ae=function(e){this.type=Ft,this.input=e};Ae.parse=function(e,r){if(e.length!==2)return r.error("Expected two arguments.");var n=r.parse(e[1],1,E);return n?new Ae(n):r.error("No image name provided.")};Ae.prototype.evaluate=function(e){var r=this.input.evaluate(e),n=ut.fromString(r);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(r)>-1),n};Ae.prototype.eachChild=function(e){e(this.input)};Ae.prototype.outputDefined=function(){return!1};Ae.prototype.serialize=function(){return["image",this.input.serialize()]};var ba=Ae,Ki={"to-boolean":T,"to-color":le,"to-number":v,"to-string":E},Ie=function(e,r){this.type=e,this.args=r};Ie.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return r.error("Expected one argument.");for(var a=Ki[n],i=[],o=1;o<e.length;o++){var u=r.parse(e[o],o,C);if(!u)return null;i.push(u)}return new Ie(a,i)};Ie.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var r,n,a=0,i=this.args;a<i.length;a+=1){var o=i[a];if(r=o.evaluate(e),n=null,r instanceof Y)return r;if(typeof r=="string"){var u=e.parseColor(r);if(u)return u}else if(Array.isArray(r)&&(r.length<3||r.length>4?n="Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":n=ma(r[0],r[1],r[2],r[3]),!n))return new Y(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new J(n||"Could not parse color from value '"+(typeof r=="string"?r:String(JSON.stringify(r)))+"'")}else if(this.type.kind==="number"){for(var s=null,l=0,p=this.args;l<p.length;l+=1){var f=p[l];if(s=f.evaluate(e),s===null)return 0;var d=Number(s);if(!isNaN(d))return d}throw new J("Could not convert "+JSON.stringify(s)+" to number.")}else return this.type.kind==="formatted"?ot.fromString(kt(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ut.fromString(kt(this.args[0].evaluate(e))):kt(this.args[0].evaluate(e))};Ie.prototype.eachChild=function(e){this.args.forEach(e)};Ie.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})};Ie.prototype.serialize=function(){if(this.type.kind==="formatted")return new ga([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ba(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(r){e.push(r.serialize())}),e};var tt=Ie,Wi=["Unknown","Point","LineString","Polygon"],we=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};we.prototype.id=function(){return this.feature&&this.feature.id!==void 0?this.feature.id:null};we.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Wi[this.feature.type]:this.feature.type:null};we.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null};we.prototype.canonicalID=function(){return this.canonical};we.prototype.properties=function(){return this.feature&&this.feature.properties||{}};we.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,r=this.featureDistanceData.scale,n=this.featureTileCoord,a=n.x,i=n.y,o=a*r-e[0],u=i*r-e[1],s=this.featureDistanceData.bearing[0],l=this.featureDistanceData.bearing[1],p=s*o+l*u;return p}return 0};we.prototype.parseColor=function(e){var r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=Y.parse(e)),r};var xa=we,ee=function(e,r,n,a){this.name=e,this.type=r,this._evaluate=n,this.args=a};ee.prototype.evaluate=function(e){return this._evaluate(e,this.args)};ee.prototype.eachChild=function(e){this.args.forEach(e)};ee.prototype.outputDefined=function(){return!1};ee.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))};ee.parse=function(e,r){var n,a=e[0],i=ee.definitions[a];if(!i)return r.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,u=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=u.filter(function(ne){var N=ne[0];return!Array.isArray(N)||N.length===e.length-1}),l=null,p=0,f=s;p<f.length;p+=1){var d=f[p],c=d[0],x=d[1];l=new Ea(r.registry,r.path,null,r.scope);for(var g=[],_=!1,h=1;h<e.length;h++){var I=e[h],q=Array.isArray(c)?c[h-1]:c.type,M=l.parse(I,1+g.length,q);if(!M){_=!0;break}g.push(M)}if(!_){if(Array.isArray(c)&&c.length!==g.length){l.error("Expected "+c.length+" arguments, but found "+g.length+" instead.");continue}for(var V=0;V<g.length;V++){var G=Array.isArray(c)?c[V]:c.type,S=g[V];l.concat(V+1).checkSubtype(G,S.type)}if(l.errors.length===0)return new ee(a,o,x,g)}}if(s.length===1)(n=r.errors).push.apply(n,l.errors);else{for(var D=s.length?s:u,R=D.map(function(ne){var N=ne[0];return $i(N)}).join(" | "),O=[],P=1;P<e.length;P++){var Q=r.parse(e[P],1+O.length);if(!Q)return null;O.push(A(Q.type))}r.error("Expected arguments of type "+R+", but found ("+O.join(", ")+") instead.")}return null};ee.register=function(e,r){ee.definitions=r;for(var n in r)e[n]=ee};function $i(t){return Array.isArray(t)?"("+t.map(A).join(", ")+")":"("+A(t.type)+"...)"}var st=ee,De=function(e,r,n){this.type=lr,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=r};De.parse=function(e,r){if(e.length!==2)return r.error("Expected one argument.");var n=e[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");var a=r.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,T);if(!a)return null;var i=r.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,T);if(!i)return null;var o=null;return n.locale&&(o=r.parse(n.locale,1,E),!o)?null:new De(a,i,o)};De.prototype.evaluate=function(e){return new mn(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)};De.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)};De.prototype.outputDefined=function(){return!1};De.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var wa=De,ye=8192;function yn(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function eo(t){return(180+t)/360}function to(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function nr(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ro(t,e){var r=eo(t[0]),n=to(t[1]),a=Math.pow(2,e.z);return[Math.round(r*a*ye),Math.round(n*a*ye)]}function no(t,e,r){var n=t[0]-e[0],a=t[1]-e[1],i=t[0]-r[0],o=t[1]-r[1];return n*o-i*a===0&&n*i<=0&&a*o<=0}function ao(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function gn(t,e){for(var r=!1,n=0,a=e.length;n<a;n++)for(var i=e[n],o=0,u=i.length;o<u-1;o++){if(no(t,i[o],i[o+1]))return!1;ao(t,i[o],i[o+1])&&(r=!r)}return r}function io(t,e){for(var r=0;r<e.length;r++)if(gn(t,e[r]))return!0;return!1}function oo(t,e){return t[0]*e[1]-t[1]*e[0]}function $n(t,e,r,n){var a=t[0]-r[0],i=t[1]-r[1],o=e[0]-r[0],u=e[1]-r[1],s=n[0]-r[0],l=n[1]-r[1],p=a*l-s*i,f=o*l-s*u;return p>0&&f<0||p<0&&f>0}function uo(t,e,r,n){var a=[e[0]-t[0],e[1]-t[1]],i=[n[0]-r[0],n[1]-r[1]];return oo(i,a)===0?!1:!!($n(t,e,r,n)&&$n(r,n,t,e))}function so(t,e,r){for(var n=0,a=r;n<a.length;n+=1)for(var i=a[n],o=0;o<i.length-1;++o)if(uo(t,e,i[o],i[o+1]))return!0;return!1}function za(t,e){for(var r=0;r<t.length;++r)if(!gn(t[r],e))return!1;for(var n=0;n<t.length-1;++n)if(so(t[n],t[n+1],e))return!1;return!0}function lo(t,e){for(var r=0;r<e.length;r++)if(za(t,e[r]))return!0;return!1}function bn(t,e,r){for(var n=[],a=0;a<t.length;a++){for(var i=[],o=0;o<t[a].length;o++){var u=ro(t[a][o],r);yn(e,u),i.push(u)}n.push(i)}return n}function ka(t,e,r){for(var n=[],a=0;a<t.length;a++){var i=bn(t[a],e,r);n.push(i)}return n}function Ta(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){var a=n*.5,i=t[0]-r[0]>a?-n:r[0]-t[0]>a?n:0;i===0&&(i=t[0]-r[2]>a?-n:r[2]-t[0]>a?n:0),t[0]+=i}yn(e,t)}function po(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}function ea(t,e,r,n){var a=Math.pow(2,n.z)*ye,i=[n.x*ye,n.y*ye],o=[];if(!t)return o;for(var u=0,s=t;u<s.length;u+=1)for(var l=s[u],p=0,f=l;p<f.length;p+=1){var d=f[p],c=[d.x+i[0],d.y+i[1]];Ta(c,e,r,a),o.push(c)}return o}function ta(t,e,r,n){var a=Math.pow(2,n.z)*ye,i=[n.x*ye,n.y*ye],o=[];if(!t)return o;for(var u=0,s=t;u<s.length;u+=1){for(var l=s[u],p=[],f=0,d=l;f<d.length;f+=1){var c=d[f],x=[c.x+i[0],c.y+i[1]];yn(e,x),p.push(x)}o.push(p)}if(e[2]-e[0]<=a/2){po(e);for(var g=0,_=o;g<_.length;g+=1)for(var h=_[g],I=0,q=h;I<q.length;I+=1){var M=q[I];Ta(M,e,r,a)}}return o}function fo(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if(!a)return!1;if(e.type==="Polygon"){var i=bn(e.coordinates,n,a),o=ea(t.geometry(),r,n,a);if(!nr(r,n))return!1;for(var u=0,s=o;u<s.length;u+=1){var l=s[u];if(!gn(l,i))return!1}}if(e.type==="MultiPolygon"){var p=ka(e.coordinates,n,a),f=ea(t.geometry(),r,n,a);if(!nr(r,n))return!1;for(var d=0,c=f;d<c.length;d+=1){var x=c[d];if(!io(x,p))return!1}}return!0}function co(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if(!a)return!1;if(e.type==="Polygon"){var i=bn(e.coordinates,n,a),o=ta(t.geometry(),r,n,a);if(!nr(r,n))return!1;for(var u=0,s=o;u<s.length;u+=1){var l=s[u];if(!za(l,i))return!1}}if(e.type==="MultiPolygon"){var p=ka(e.coordinates,n,a),f=ta(t.geometry(),r,n,a);if(!nr(r,n))return!1;for(var d=0,c=f;d<c.length;d+=1){var x=c[d];if(!lo(x,p))return!1}}return!0}var se=function(e,r){this.type=T,this.geojson=e,this.geometries=r};se.parse=function(e,r){if(e.length!==2)return r.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(tr(e[1])){var n=e[1];if(n.type==="FeatureCollection")for(var a=0;a<n.features.length;++a){var i=n.features[a].geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new se(n,n.features[a].geometry)}else if(n.type==="Feature"){var o=n.geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new se(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new se(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")};se.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return fo(e,this.geometries);if(e.geometryType()==="LineString")return co(e,this.geometries)}return!1};se.prototype.eachChild=function(){};se.prototype.outputDefined=function(){return!0};se.prototype.serialize=function(){return["within",this.geojson]};var xn=se;function fr(t){if(t instanceof st){if(t.name==="get"&&t.args.length===1)return!1;if(t.name==="feature-state")return!1;if(t.name==="has"&&t.args.length===1)return!1;if(t.name==="properties"||t.name==="geometry-type"||t.name==="id")return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof xn)return!1;var e=!0;return t.eachChild(function(r){e&&!fr(r)&&(e=!1)}),e}function wn(t){if(t instanceof st&&t.name==="feature-state")return!1;var e=!0;return t.eachChild(function(r){e&&!wn(r)&&(e=!1)}),e}function zn(t,e){if(t instanceof st&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild(function(n){r&&!zn(n,e)&&(r=!1)}),r}var Pe=function(e,r){this.type=r.type,this.name=e,this.boundExpression=r};Pe.parse=function(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");var n=e[1];return r.scope.has(n)?new Pe(n,r.scope.get(n)):r.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)};Pe.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)};Pe.prototype.eachChild=function(){};Pe.prototype.outputDefined=function(){return!1};Pe.prototype.serialize=function(){return["var",this.name]};var Ca=Pe,Re=function(e,r,n,a,i){r===void 0&&(r=[]),a===void 0&&(a=new Hi),i===void 0&&(i=[]),this.registry=e,this.path=r,this.key=r.map(function(o){return"["+o+"]"}).join(""),this.scope=a,this.errors=i,this.expectedType=n};Re.prototype.parse=function(e,r,n,a,i){return i===void 0&&(i={}),r?this.concat(r,n,a)._parse(e,i):this._parse(e,i)};Re.prototype._parse=function(e,r){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function n(p,f,d){return d==="assert"?new ue(f,[p]):d==="coerce"?new tt(f,[p]):p}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=e[0];if(typeof a!="string")return this.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[a];if(i){var o=i.parse(e,this);if(!o)return null;if(this.expectedType){var u=this.expectedType,s=o.type;if((u.kind==="string"||u.kind==="number"||u.kind==="boolean"||u.kind==="object"||u.kind==="array")&&s.kind==="value")o=n(o,u,r.typeAnnotation||"assert");else if((u.kind==="color"||u.kind==="formatted"||u.kind==="resolvedImage")&&(s.kind==="value"||s.kind==="string"))o=n(o,u,r.typeAnnotation||"coerce");else if(this.checkSubtype(u,s))return null}if(!(o instanceof rr)&&o.type.kind!=="resolvedImage"&&rn(o)){var l=new xa;try{o=new rr(o.type,o.evaluate(l))}catch(p){return this.error(p.message),null}}return o}return this.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")};Re.prototype.concat=function(e,r,n){var a=typeof e=="number"?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new Re(this.registry,a,r||null,i,this.errors)};Re.prototype.error=function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var a=""+this.key+r.map(function(i){return"["+i+"]"}).join("");this.errors.push(new re(a,e))};Re.prototype.checkSubtype=function(e,r){var n=_t(e,r);return n&&this.error(n),n};var Ea=Re;function rn(t){if(t instanceof Ca)return rn(t.boundExpression);if(t instanceof st&&t.name==="error")return!1;if(t instanceof wa)return!1;if(t instanceof xn)return!1;var e=t instanceof tt||t instanceof ue,r=!0;return t.eachChild(function(n){e?r=r&&rn(n):r=r&&n instanceof rr}),r?fr(t)&&zn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function _a(t,e){for(var r=t.length-1,n=0,a=r,i=0,o,u;n<=a;)if(i=Math.floor((n+a)/2),o=t[i],u=t[i+1],o<=e){if(i===r||e<u)return i;n=i+1}else if(o>e)a=i-1;else throw new J("Input is not a number.");return 0}var Ne=function(e,r,n){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(var a=0,i=n;a<i.length;a+=1){var o=i[a],u=o[0],s=o[1];this.labels.push(u),this.outputs.push(s)}};Ne.parse=function(e,r){if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");var n=r.parse(e[1],1,v);if(!n)return null;var a=[],i=null;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);for(var o=1;o<e.length;o+=2){var u=o===1?-1/0:e[o],s=e[o+1],l=o,p=o+1;if(typeof u!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(a.length&&a[a.length-1][0]>=u)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var f=r.parse(s,p,i);if(!f)return null;i=i||f.type,a.push([u,f])}return new Ne(i,n,a)};Ne.prototype.evaluate=function(e){var r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);var a=this.input.evaluate(e);if(a<=r[0])return n[0].evaluate(e);var i=r.length;if(a>=r[i-1])return n[i-1].evaluate(e);var o=_a(r,a);return n[o].evaluate(e)};Ne.prototype.eachChild=function(e){e(this.input);for(var r=0,n=this.outputs;r<n.length;r+=1){var a=n[r];e(a)}};Ne.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})};Ne.prototype.serialize=function(){for(var e=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e};var Ma=Ne,vo=lt;function lt(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}lt.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t};lt.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t};lt.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx};lt.prototype.solveCurveX=function(t,e){typeof e>"u"&&(e=1e-6);var r,n,a,i,o;for(a=t,o=0;o<8;o++){if(i=this.sampleCurveX(a)-t,Math.abs(i)<e)return a;var u=this.sampleCurveDerivativeX(a);if(Math.abs(u)<1e-6)break;a=a-i/u}if(r=0,n=1,a=t,a<r)return r;if(a>n)return n;for(;r<n;){if(i=this.sampleCurveX(a),Math.abs(i-t)<e)return a;t>i?r=a:n=a,a=(n-r)*.5+r}return a};lt.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};function H(t,e,r){return t*(1-r)+e*r}function ho(t,e,r){return new Y(H(t.r,e.r,r),H(t.g,e.g,r),H(t.b,e.b,r),H(t.a,e.a,r))}function mo(t,e,r){return t.map(function(n,a){return H(n,e[a],r)})}var yo=Object.freeze({__proto__:null,number:H,color:ho,array:mo}),qa=.95047,Sa=1,Fa=1.08883,Aa=4/29,at=6/29,Ia=3*at*at,go=at*at*at,bo=Math.PI/180,xo=180/Math.PI;function Zr(t){return t>go?Math.pow(t,1/3):t/Ia+Aa}function Gr(t){return t>at?t*t*t:Ia*(t-Aa)}function Ur(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Jr(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Da(t){var e=Jr(t.r),r=Jr(t.g),n=Jr(t.b),a=Zr((.4124564*e+.3575761*r+.1804375*n)/qa),i=Zr((.2126729*e+.7151522*r+.072175*n)/Sa),o=Zr((.0193339*e+.119192*r+.9503041*n)/Fa);return{l:116*i-16,a:500*(a-i),b:200*(i-o),alpha:t.a}}function Pa(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=Sa*Gr(e),r=qa*Gr(r),n=Fa*Gr(n),new Y(Ur(3.2404542*r-1.5371385*e-.4985314*n),Ur(-.969266*r+1.8760108*e+.041556*n),Ur(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function wo(t,e,r){return{l:H(t.l,e.l,r),a:H(t.a,e.a,r),b:H(t.b,e.b,r),alpha:H(t.alpha,e.alpha,r)}}function zo(t){var e=Da(t),r=e.l,n=e.a,a=e.b,i=Math.atan2(a,n)*xo;return{h:i<0?i+360:i,c:Math.sqrt(n*n+a*a),l:r,alpha:t.a}}function ko(t){var e=t.h*bo,r=t.c,n=t.l;return Pa({l:n,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})}function To(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}function Co(t,e,r){return{h:To(t.h,e.h,r),c:H(t.c,e.c,r),l:H(t.l,e.l,r),alpha:H(t.alpha,e.alpha,r)}}var Xt={forward:Da,reverse:Pa,interpolate:wo},Bt={forward:zo,reverse:ko,interpolate:Co},fe=function(e,r,n,a,i){this.type=e,this.operator=r,this.interpolation=n,this.input=a,this.labels=[],this.outputs=[];for(var o=0,u=i;o<u.length;o+=1){var s=u[o],l=s[0],p=s[1];this.labels.push(l),this.outputs.push(p)}};fe.interpolationFactor=function(e,r,n,a){var i=0;if(e.name==="exponential")i=Xr(r,e.base,n,a);else if(e.name==="linear")i=Xr(r,1,n,a);else if(e.name==="cubic-bezier"){var o=e.controlPoints,u=new vo(o[0],o[1],o[2],o[3]);i=u.solve(Xr(r,1,n,a))}return i};fe.parse=function(e,r){var n=e[0],a=e[1],i=e[2],o=e.slice(3);if(!Array.isArray(a)||a.length===0)return r.error("Expected an interpolation type expression.",1);if(a[0]==="linear")a={name:"linear"};else if(a[0]==="exponential"){var u=a[1];if(typeof u!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:u}}else if(a[0]==="cubic-bezier"){var s=a.slice(1);if(s.length!==4||s.some(function(h){return typeof h!="number"||h<0||h>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:s}}else return r.error("Unknown interpolation type "+String(a[0]),1,0);if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(i=r.parse(i,2,v),!i)return null;var l=[],p=null;n==="interpolate-hcl"||n==="interpolate-lab"?p=le:r.expectedType&&r.expectedType.kind!=="value"&&(p=r.expectedType);for(var f=0;f<o.length;f+=2){var d=o[f],c=o[f+1],x=f+3,g=f+4;if(typeof d!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(l.length&&l[l.length-1][0]>=d)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);var _=r.parse(c,g,p);if(!_)return null;p=p||_.type,l.push([d,_])}return p.kind!=="number"&&p.kind!=="color"&&!(p.kind==="array"&&p.itemType.kind==="number"&&typeof p.N=="number")?r.error("Type "+A(p)+" is not interpolatable."):new fe(p,n,a,i,l)};fe.prototype.evaluate=function(e){var r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);var a=this.input.evaluate(e);if(a<=r[0])return n[0].evaluate(e);var i=r.length;if(a>=r[i-1])return n[i-1].evaluate(e);var o=_a(r,a),u=r[o],s=r[o+1],l=fe.interpolationFactor(this.interpolation,a,u,s),p=n[o].evaluate(e),f=n[o+1].evaluate(e);return this.operator==="interpolate"?yo[this.type.kind.toLowerCase()](p,f,l):this.operator==="interpolate-hcl"?Bt.reverse(Bt.interpolate(Bt.forward(p),Bt.forward(f),l)):Xt.reverse(Xt.interpolate(Xt.forward(p),Xt.forward(f),l))};fe.prototype.eachChild=function(e){e(this.input);for(var r=0,n=this.outputs;r<n.length;r+=1){var a=n[r];e(a)}};fe.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})};fe.prototype.serialize=function(){var e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)r.push(this.labels[n],this.outputs[n].serialize());return r};function Xr(t,e,r,n){var a=n-r,i=t-r;return a===0?0:e===1?i/a:(Math.pow(e,i)-1)/(Math.pow(e,a)-1)}var Me=fe,ge=function(e,r){this.type=e,this.args=r};ge.parse=function(e,r){if(e.length<2)return r.error("Expectected at least one argument.");var n=null,a=r.expectedType;a&&a.kind!=="value"&&(n=a);for(var i=[],o=0,u=e.slice(1);o<u.length;o+=1){var s=u[o],l=r.parse(s,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,i.push(l)}var p=a&&i.some(function(f){return _t(a,f.type)});return p?new ge(C,i):new ge(n,i)};ge.prototype.evaluate=function(e){for(var r=null,n=0,a,i=0,o=this.args;i<o.length;i+=1){var u=o[i];if(n++,r=u.evaluate(e),r&&r instanceof ut&&!r.available&&(a||(a=r),r=null,n===this.args.length))return a;if(r!==null)break}return r};ge.prototype.eachChild=function(e){this.args.forEach(e)};ge.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})};ge.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Ra=ge,je=function(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r};je.prototype.evaluate=function(e){return this.result.evaluate(e)};je.prototype.eachChild=function(e){for(var r=0,n=this.bindings;r<n.length;r+=1){var a=n[r];e(a[1])}e(this.result)};je.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],a=1;a<e.length-1;a+=2){var i=e[a];if(typeof i!="string")return r.error("Expected string, but found "+typeof i+" instead.",a);if(/[^a-zA-Z0-9_]/.test(i))return r.error("Variable names must contain only alphanumeric characters or '_'.",a);var o=r.parse(e[a+1],a+1);if(!o)return null;n.push([i,o])}var u=r.parse(e[e.length-1],e.length-1,r.expectedType,n);return u?new je(n,u):null};je.prototype.outputDefined=function(){return this.result.outputDefined()};je.prototype.serialize=function(){for(var e=["let"],r=0,n=this.bindings;r<n.length;r+=1){var a=n[r],i=a[0],o=a[1];e.push(i,o.serialize())}return e.push(this.result.serialize()),e};var Na=je,Oe=function(e,r,n){this.type=e,this.index=r,this.input=n};Oe.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,v),a=r.parse(e[2],2,K(r.expectedType||C));if(!n||!a)return null;var i=a.type;return new Oe(i.itemType,n,a)};Oe.prototype.evaluate=function(e){var r=this.index.evaluate(e),n=this.input.evaluate(e);if(r<0)throw new J("Array index out of bounds: "+r+" < 0.");if(r>=n.length)throw new J("Array index out of bounds: "+r+" > "+(n.length-1)+".");if(r!==Math.floor(r))throw new J("Array index must be an integer, but found "+r+" instead.");return n[r]};Oe.prototype.eachChild=function(e){e(this.index),e(this.input)};Oe.prototype.outputDefined=function(){return!1};Oe.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Eo=Oe,Le=function(e,r){this.type=T,this.needle=e,this.haystack=r};Le.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,C),a=r.parse(e[2],2,C);return!n||!a?null:vn(n.type,[T,E,v,sr,C])?new Le(n,a):r.error("Expected first argument to be of type boolean, string, number or null, but found "+A(n.type)+" instead")};Le.prototype.evaluate=function(e){var r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(n==null)return!1;if(!Mt(r,["boolean","string","number","null"]))throw new J("Expected first argument to be of type boolean, string, number or null, but found "+A(L(r))+" instead.");if(!Mt(n,["string","array"]))throw new J("Expected second argument to be of type array or string, but found "+A(L(n))+" instead.");return n.indexOf(r)>=0};Le.prototype.eachChild=function(e){e(this.needle),e(this.haystack)};Le.prototype.outputDefined=function(){return!0};Le.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var _o=Le,be=function(e,r,n){this.type=v,this.needle=e,this.haystack=r,this.fromIndex=n};be.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,C),a=r.parse(e[2],2,C);if(!n||!a)return null;if(!vn(n.type,[T,E,v,sr,C]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+A(n.type)+" instead");if(e.length===4){var i=r.parse(e[3],3,v);return i?new be(n,a,i):null}else return new be(n,a)};be.prototype.evaluate=function(e){var r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Mt(r,["boolean","string","number","null"]))throw new J("Expected first argument to be of type boolean, string, number or null, but found "+A(L(r))+" instead.");if(!Mt(n,["string","array"]))throw new J("Expected second argument to be of type array or string, but found "+A(L(n))+" instead.");if(this.fromIndex){var a=this.fromIndex.evaluate(e);return n.indexOf(r,a)}return n.indexOf(r)};be.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)};be.prototype.outputDefined=function(){return!1};be.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Mo=be,Ve=function(e,r,n,a,i,o){this.inputType=e,this.type=r,this.input=n,this.cases=a,this.outputs=i,this.otherwise=o};Ve.parse=function(e,r){if(e.length<5)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!==1)return r.error("Expected an even number of arguments.");var n,a;r.expectedType&&r.expectedType.kind!=="value"&&(a=r.expectedType);for(var i={},o=[],u=2;u<e.length-1;u+=2){var s=e[u],l=e[u+1];Array.isArray(s)||(s=[s]);var p=r.concat(u);if(s.length===0)return p.error("Expected at least one branch label.");for(var f=0,d=s;f<d.length;f+=1){var c=d[f];if(typeof c!="number"&&typeof c!="string")return p.error("Branch labels must be numbers or strings.");if(typeof c=="number"&&Math.abs(c)>Number.MAX_SAFE_INTEGER)return p.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof c=="number"&&Math.floor(c)!==c)return p.error("Numeric branch labels must be integer values.");if(!n)n=L(c);else if(p.checkSubtype(n,L(c)))return null;if(typeof i[String(c)]<"u")return p.error("Branch labels must be unique.");i[String(c)]=o.length}var x=r.parse(l,u,a);if(!x)return null;a=a||x.type,o.push(x)}var g=r.parse(e[1],1,C);if(!g)return null;var _=r.parse(e[e.length-1],e.length-1,a);return!_||g.type.kind!=="value"&&r.concat(1).checkSubtype(n,g.type)?null:new Ve(n,a,g,i,o,_)};Ve.prototype.evaluate=function(e){var r=this.input.evaluate(e),n=L(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise;return n.evaluate(e)};Ve.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)};Ve.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()};Ve.prototype.serialize=function(){for(var e=this,r=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),a=[],i={},o=0,u=n;o<u.length;o+=1){var s=u[o],l=i[this.cases[s]];l===void 0?(i[this.cases[s]]=a.length,a.push([this.cases[s],[s]])):a[l][1].push(s)}for(var p=function(g){return e.inputType.kind==="number"?Number(g):g},f=0,d=a;f<d.length;f+=1){var c=d[f],l=c[0],x=c[1];x.length===1?r.push(p(x[0])):r.push(x.map(p)),r.push(this.outputs[outputIndex$1].serialize())}return r.push(this.otherwise.serialize()),r};var qo=Ve,Ze=function(e,r,n){this.type=e,this.branches=r,this.otherwise=n};Ze.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!==0)return r.error("Expected an odd number of arguments.");var n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);for(var a=[],i=1;i<e.length-1;i+=2){var o=r.parse(e[i],i,T);if(!o)return null;var u=r.parse(e[i+1],i+1,n);if(!u)return null;a.push([o,u]),n=n||u.type}var s=r.parse(e[e.length-1],e.length-1,n);return s?new Ze(n,a,s):null};Ze.prototype.evaluate=function(e){for(var r=0,n=this.branches;r<n.length;r+=1){var a=n[r],i=a[0],o=a[1];if(i.evaluate(e))return o.evaluate(e)}return this.otherwise.evaluate(e)};Ze.prototype.eachChild=function(e){for(var r=0,n=this.branches;r<n.length;r+=1){var a=n[r],i=a[0],o=a[1];e(i),e(o)}e(this.otherwise)};Ze.prototype.outputDefined=function(){return this.branches.every(function(e){e[0];var r=e[1];return r.outputDefined()})&&this.otherwise.outputDefined()};Ze.prototype.serialize=function(){var e=["case"];return this.eachChild(function(r){e.push(r.serialize())}),e};var So=Ze,xe=function(e,r,n,a){this.type=e,this.input=r,this.beginIndex=n,this.endIndex=a};xe.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,C),a=r.parse(e[2],2,v);if(!n||!a)return null;if(!vn(n.type,[K(C),E,C]))return r.error("Expected first argument to be of type array or string, but found "+A(n.type)+" instead");if(e.length===4){var i=r.parse(e[3],3,v);return i?new xe(n.type,n,a,i):null}else return new xe(n.type,n,a)};xe.prototype.evaluate=function(e){var r=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Mt(r,["string","array"]))throw new J("Expected first argument to be of type array or string, but found "+A(L(r))+" instead.");if(this.endIndex){var a=this.endIndex.evaluate(e);return r.slice(n,a)}return r.slice(n)};xe.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)};xe.prototype.outputDefined=function(){return!1};xe.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Fo=xe;function ra(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Ao(t,e,r){return e===r}function Io(t,e,r){return e!==r}function Do(t,e,r){return e<r}function Po(t,e,r){return e>r}function Ro(t,e,r){return e<=r}function No(t,e,r){return e>=r}function ja(t,e,r,n){return n.compare(e,r)===0}function jo(t,e,r,n){return!ja(t,e,r,n)}function Oo(t,e,r,n){return n.compare(e,r)<0}function Lo(t,e,r,n){return n.compare(e,r)>0}function Vo(t,e,r,n){return n.compare(e,r)<=0}function Zo(t,e,r,n){return n.compare(e,r)>=0}function pt(t,e,r){var n=t!=="=="&&t!=="!=";return function(){function a(i,o,u){this.type=T,this.lhs=i,this.rhs=o,this.collator=u,this.hasUntypedArgument=i.type.kind==="value"||o.type.kind==="value"}return a.parse=function(o,u){if(o.length!==3&&o.length!==4)return u.error("Expected two or three arguments.");var s=o[0],l=u.parse(o[1],1,C);if(!l)return null;if(!ra(s,l.type))return u.concat(1).error('"'+s+`" comparisons are not supported for type '`+A(l.type)+"'.");var p=u.parse(o[2],2,C);if(!p)return null;if(!ra(s,p.type))return u.concat(2).error('"'+s+`" comparisons are not supported for type '`+A(p.type)+"'.");if(l.type.kind!==p.type.kind&&l.type.kind!=="value"&&p.type.kind!=="value")return u.error("Cannot compare types '"+A(l.type)+"' and '"+A(p.type)+"'.");n&&(l.type.kind==="value"&&p.type.kind!=="value"?l=new ue(p.type,[l]):l.type.kind!=="value"&&p.type.kind==="value"&&(p=new ue(l.type,[p])));var f=null;if(o.length===4){if(l.type.kind!=="string"&&p.type.kind!=="string"&&l.type.kind!=="value"&&p.type.kind!=="value")return u.error("Cannot use collator to compare non-string types.");if(f=u.parse(o[3],3,lr),!f)return null}return new a(l,p,f)},a.prototype.evaluate=function(o){var u=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){var l=L(u),p=L(s);if(l.kind!==p.kind||!(l.kind==="string"||l.kind==="number"))throw new J('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+l.kind+", "+p.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var f=L(u),d=L(s);if(f.kind!=="string"||d.kind!=="string")return e(o,u,s)}return this.collator?r(o,u,s,this.collator.evaluate(o)):e(o,u,s)},a.prototype.eachChild=function(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var o=[t];return this.eachChild(function(u){o.push(u.serialize())}),o},a}()}var Go=pt("==",Ao,ja),Uo=pt("!=",Io,jo),Jo=pt("<",Do,Oo),Xo=pt(">",Po,Lo),Bo=pt("<=",Ro,Vo),Ho=pt(">=",No,Zo),Ge=function(e,r,n,a,i,o){this.type=E,this.number=e,this.locale=r,this.currency=n,this.unit=a,this.minFractionDigits=i,this.maxFractionDigits=o};Ge.parse=function(e,r){if(e.length!==3)return r.error("Expected two arguments.");var n=r.parse(e[1],1,v);if(!n)return null;var a=e[2];if(typeof a!="object"||Array.isArray(a))return r.error("NumberFormat options argument must be an object.");var i=null;if(a.locale&&(i=r.parse(a.locale,1,E),!i))return null;var o=null;if(a.currency&&(o=r.parse(a.currency,1,E),!o))return null;var u=null;if(a.unit&&(u=r.parse(a.unit,1,E),!u))return null;var s=null;if(a["min-fraction-digits"]&&(s=r.parse(a["min-fraction-digits"],1,v),!s))return null;var l=null;return a["max-fraction-digits"]&&(l=r.parse(a["max-fraction-digits"],1,v),!l)?null:new Ge(n,i,o,u,s,l)};Ge.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))};Ge.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)};Ge.prototype.outputDefined=function(){return!1};Ge.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Yo=Ge,Ue=function(e){this.type=v,this.input=e};Ue.parse=function(e,r){if(e.length!==2)return r.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error("Expected argument of type string or array, but found "+A(n.type)+" instead."):new Ue(n):null};Ue.prototype.evaluate=function(e){var r=this.input.evaluate(e);if(typeof r=="string")return r.length;if(Array.isArray(r))return r.length;throw new J("Expected value to be of type string or array, but found "+A(L(r))+" instead.")};Ue.prototype.eachChild=function(e){e(this.input)};Ue.prototype.outputDefined=function(){return!1};Ue.prototype.serialize=function(){var e=["length"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Qo=Ue,Oa={"==":Go,"!=":Uo,">":Xo,"<":Jo,">=":Ho,"<=":Bo,array:ue,at:Eo,boolean:ue,case:So,coalesce:Ra,collator:wa,format:ga,image:ba,in:_o,"index-of":Mo,interpolate:Me,"interpolate-hcl":Me,"interpolate-lab":Me,length:Qo,let:Na,literal:rr,match:qo,number:ue,"number-format":Yo,object:ue,slice:Fo,step:Ma,string:ue,"to-boolean":tt,"to-color":tt,"to-number":tt,"to-string":tt,var:Ca,within:xn};function na(t,e){var r=e[0],n=e[1],a=e[2],i=e[3];r=r.evaluate(t),n=n.evaluate(t),a=a.evaluate(t);var o=i?i.evaluate(t):1,u=ma(r,n,a,o);if(u)throw new J(u);return new Y(r/255*o,n/255*o,a/255*o,o)}function aa(t,e){return t in e}function Br(t,e){var r=e[t];return typeof r>"u"?null:r}function Ko(t,e,r,n){for(;r<=n;){var a=r+n>>1;if(e[a]===t)return!0;e[a]>t?n=a-1:r=a+1}return!1}function Ce(t){return{type:t}}st.register(Oa,{error:[Yi,[E],function(t,e){var r=e[0];throw new J(r.evaluate(t))}],typeof:[E,[C],function(t,e){var r=e[0];return A(L(r.evaluate(t)))}],"to-rgba":[K(v,4),[le],function(t,e){var r=e[0];return r.evaluate(t).toArray()}],rgb:[le,[v,v,v],na],rgba:[le,[v,v,v,v],na],has:{type:T,overloads:[[[E],function(t,e){var r=e[0];return aa(r.evaluate(t),t.properties())}],[[E,nt],function(t,e){var r=e[0],n=e[1];return aa(r.evaluate(t),n.evaluate(t))}]]},get:{type:C,overloads:[[[E],function(t,e){var r=e[0];return Br(r.evaluate(t),t.properties())}],[[E,nt],function(t,e){var r=e[0],n=e[1];return Br(r.evaluate(t),n.evaluate(t))}]]},"feature-state":[C,[E],function(t,e){var r=e[0];return Br(r.evaluate(t),t.featureState||{})}],properties:[nt,[],function(t){return t.properties()}],"geometry-type":[E,[],function(t){return t.geometryType()}],id:[C,[],function(t){return t.id()}],zoom:[v,[],function(t){return t.globals.zoom}],pitch:[v,[],function(t){return t.globals.pitch||0}],"distance-from-center":[v,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[v,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[v,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[v,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[C,[],function(t){return t.globals.accumulated===void 0?null:t.globals.accumulated}],"+":[v,Ce(v),function(t,e){for(var r=0,n=0,a=e;n<a.length;n+=1){var i=a[n];r+=i.evaluate(t)}return r}],"*":[v,Ce(v),function(t,e){for(var r=1,n=0,a=e;n<a.length;n+=1){var i=a[n];r*=i.evaluate(t)}return r}],"-":{type:v,overloads:[[[v,v],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)-n.evaluate(t)}],[[v],function(t,e){var r=e[0];return-r.evaluate(t)}]]},"/":[v,[v,v],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)/n.evaluate(t)}],"%":[v,[v,v],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)%n.evaluate(t)}],ln2:[v,[],function(){return Math.LN2}],pi:[v,[],function(){return Math.PI}],e:[v,[],function(){return Math.E}],"^":[v,[v,v],function(t,e){var r=e[0],n=e[1];return Math.pow(r.evaluate(t),n.evaluate(t))}],sqrt:[v,[v],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[v,[v],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[v,[v],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[v,[v],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[v,[v],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[v,[v],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[v,[v],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[v,[v],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[v,[v],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[v,[v],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[v,Ce(v),function(t,e){return Math.min.apply(Math,e.map(function(r){return r.evaluate(t)}))}],max:[v,Ce(v),function(t,e){return Math.max.apply(Math,e.map(function(r){return r.evaluate(t)}))}],abs:[v,[v],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[v,[v],function(t,e){var r=e[0],n=r.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[v,[v],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[v,[v],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[T,[E,C],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[T,[C],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[T,[E],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[T,[E,C],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],i=n.value;return typeof a==typeof i&&a<i}],"filter-id-<":[T,[C],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n<a}],"filter->":[T,[E,C],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],i=n.value;return typeof a==typeof i&&a>i}],"filter-id->":[T,[C],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n>a}],"filter-<=":[T,[E,C],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],i=n.value;return typeof a==typeof i&&a<=i}],"filter-id-<=":[T,[C],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n<=a}],"filter->=":[T,[E,C],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],i=n.value;return typeof a==typeof i&&a>=i}],"filter-id->=":[T,[C],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n>=a}],"filter-has":[T,[C],function(t,e){var r=e[0];return r.value in t.properties()}],"filter-has-id":[T,[],function(t){return t.id()!==null&&t.id()!==void 0}],"filter-type-in":[T,[K(E)],function(t,e){var r=e[0];return r.value.indexOf(t.geometryType())>=0}],"filter-id-in":[T,[K(C)],function(t,e){var r=e[0];return r.value.indexOf(t.id())>=0}],"filter-in-small":[T,[E,K(C)],function(t,e){var r=e[0],n=e[1];return n.value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[T,[E,K(C)],function(t,e){var r=e[0],n=e[1];return Ko(t.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:T,overloads:[[[T,T],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)&&n.evaluate(t)}],[Ce(T),function(t,e){for(var r=0,n=e;r<n.length;r+=1){var a=n[r];if(!a.evaluate(t))return!1}return!0}]]},any:{type:T,overloads:[[[T,T],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)||n.evaluate(t)}],[Ce(T),function(t,e){for(var r=0,n=e;r<n.length;r+=1){var a=n[r];if(a.evaluate(t))return!0}return!1}]]},"!":[T,[T],function(t,e){var r=e[0];return!r.evaluate(t)}],"is-supported-script":[T,[E],function(t,e){var r=e[0],n=t.globals&&t.globals.isSupportedScript;return n?n(r.evaluate(t)):!0}],upcase:[E,[E],function(t,e){var r=e[0];return r.evaluate(t).toUpperCase()}],downcase:[E,[E],function(t,e){var r=e[0];return r.evaluate(t).toLowerCase()}],concat:[E,Ce(C),function(t,e){return e.map(function(r){return kt(r.evaluate(t))}).join("")}],"resolved-locale":[E,[lr],function(t,e){var r=e[0];return r.evaluate(t).resolvedLocale()}]});var La=Oa;function nn(t){return{result:"success",value:t}}function et(t){return{result:"error",value:t}}function Wo(t){return t["property-type"]==="data-driven"}function $o(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function eu(t){return!!t.expression&&t.expression.interpolated}function Va(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}var kn=function(e,r){this.expression=e,this._warningHistory={},this._evaluator=new xa,this._defaultValue=r?au(r):null,this._enumValues=r&&r.type==="enum"?r.values:null};kn.prototype.evaluateWithoutErrorHandling=function(e,r,n,a,i,o,u,s){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=a||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=u||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)};kn.prototype.evaluate=function(e,r,n,a,i,o,u,s){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=a||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=u||null,this._evaluator.featureDistanceData=s||null;try{var l=this.expression.evaluate(this._evaluator);if(l==null||typeof l=="number"&&l!==l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new J("Expected value to be one of "+Object.keys(this._enumValues).map(function(p){return JSON.stringify(p)}).join(", ")+", but found "+JSON.stringify(l)+" instead.");return l}catch(p){return this._warningHistory[p.message]||(this._warningHistory[p.message]=!0,typeof console<"u"&&console.warn(p.message)),this._defaultValue}};function tu(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in La}function an(t,e){var r=new Ea(La,[],e?nu(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?nn(new kn(n,e)):et(r.errors)}var ar=function(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!wn(r.expression)};ar.prototype.evaluateWithoutErrorHandling=function(e,r,n,a,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,a,i,o)};ar.prototype.evaluate=function(e,r,n,a,i,o){return this._styleExpression.evaluate(e,r,n,a,i,o)};var St=function(e,r,n,a){this.kind=e,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!wn(r.expression),this.interpolationType=a};St.prototype.evaluateWithoutErrorHandling=function(e,r,n,a,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,a,i,o)};St.prototype.evaluate=function(e,r,n,a,i,o){return this._styleExpression.evaluate(e,r,n,a,i,o)};St.prototype.interpolationFactor=function(e,r,n){return this.interpolationType?Me.interpolationFactor(this.interpolationType,e,r,n):0};function ru(t,e){if(t=an(t,e),t.result==="error")return t;var r=t.value.expression,n=fr(r);if(!n&&!Wo(e))return et([new re("","data expressions not supported")]);var a=zn(r,["zoom","pitch","distance-from-center"]);if(!a&&!$o(e))return et([new re("","zoom expressions not supported")]);var i=$t(r);if(!i&&!a)return et([new re("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof re)return et([i]);if(i instanceof Me&&!eu(e))return et([new re("",'"interpolate" expressions cannot be used with this property')]);if(!i)return nn(n?new ar("constant",t.value):new ar("source",t.value));var o=i instanceof Me?i.interpolation:void 0;return nn(n?new St("camera",t.value,i.labels,o):new St("composite",t.value,i.labels,o))}function $t(t){var e=null;if(t instanceof Na)e=$t(t.result);else if(t instanceof Ra)for(var r=0,n=t.args;r<n.length;r+=1){var a=n[r];if(e=$t(a),e)break}else(t instanceof Ma||t instanceof Me)&&t.input instanceof st&&t.input.name==="zoom"&&(e=t);return e instanceof re||t.eachChild(function(i){var o=$t(i);o instanceof re?e=o:!e&&o?e=new re("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&o&&e!==o&&(e=new re("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function nu(t){var e={color:le,string:E,number:v,enum:E,boolean:T,formatted:pr,resolvedImage:Ft};return t.type==="array"?K(e[t.value]||C,t.length):e[t.type]}function au(t){return t.type==="color"&&(Va(t.default)||Array.isArray(t.default))?new Y(0,0,0,0):t.type==="color"?Y.parse(t.default)||null:t.default===void 0?null:t.default}function iu(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function on(t){if(Array.isArray(t))return t.map(on);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var r in t)e[r]=on(t[r]);return e}return iu(t)}var Za={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Ga(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!Ga(n)&&typeof n!="boolean")return!1}return!0;default:return!0}}function ou(t,e){if(e===void 0&&(e="fill"),t==null)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};Ga(t)||(t=ir(t));var r=t,n=!0;try{n=uu(r)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
`+JSON.stringify(r,null,2)+`
        `)}var a=Za["filter_"+e],i=an(n,a),o=null;if(i.result==="error")throw new Error(i.value.map(function(f){return f.key+": "+f.message}).join(", "));o=function(f,d,c){return i.value.evaluate(f,d,{},c)};var u=null,s=null;if(n!==r){var l=an(r,a);if(l.result==="error")throw new Error(l.value.map(function(f){return f.key+": "+f.message}).join(", "));u=function(f,d,c,x,g){return l.value.evaluate(f,d,{},c,void 0,void 0,x,g)},s=!fr(l.value.expression)}o=o;var p=Xa(n);return{filter:o,dynamicFilter:u||void 0,needGeometry:p,needFeature:!!s}}function uu(t){if(!it(t))return t;var e=on(t);return Ja(e),e=Ua(e),e}function Ua(t){if(!Array.isArray(t))return t;var e=pu(t);return e===!0?e:e.map(function(r){return Ua(r)})}function Ja(t){var e=!1,r=[];if(t[0]==="case"){for(var n=1;n<t.length-1;n+=2)e=e||it(t[n]),r.push(t[n+1]);r.push(t[t.length-1])}else if(t[0]==="match"){e=e||it(t[1]);for(var a=2;a<t.length-1;a+=2)r.push(t[a+1]);r.push(t[t.length-1])}else if(t[0]==="step"){e=e||it(t[1]);for(var i=1;i<t.length-1;i+=2)r.push(t[i+1])}e&&(t.length=0,t.push.apply(t,["any"].concat(r)));for(var o=1;o<t.length;o++)Ja(t[o])}function it(t){if(!Array.isArray(t))return!1;if(su(t[0]))return!0;for(var e=1;e<t.length;e++){var r=t[e];if(it(r))return!0}return!1}function su(t){return t==="pitch"||t==="distance-from-center"}var lu=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function pu(t){if(lu.has(t[0]))for(var e=1;e<t.length;e++){var r=t[e];if(it(r))return!0}return t}function fu(t,e){return t<e?-1:t>e?1:0}function Xa(t){if(!Array.isArray(t))return!1;if(t[0]==="within")return!0;for(var e=1;e<t.length;e++)if(Xa(t[e]))return!0;return!1}function ir(t){if(!t)return!0;var e=t[0];if(t.length<=1)return e!=="any";var r=e==="=="?Hr(t[1],t[2],"=="):e==="!="?Ht(Hr(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Hr(t[1],t[2],e):e==="any"?du(t.slice(1)):e==="all"?["all"].concat(t.slice(1).map(ir)):e==="none"?["all"].concat(t.slice(1).map(ir).map(Ht)):e==="in"?ia(t[1],t.slice(2)):e==="!in"?Ht(ia(t[1],t.slice(2))):e==="has"?oa(t[1]):e==="!has"?Ht(oa(t[1])):e==="within"?t:!0;return r}function Hr(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function du(t){return["any"].concat(t.map(ir))}function ia(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(r){return typeof r!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(fu)]]:["filter-in-small",t,["literal",e]]}}function oa(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Ht(t){return["!",t]}var cu=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function vu(t,e){var r={};for(var n in t)n!=="ref"&&(r[n]=t[n]);return cu.forEach(function(a){a in e&&(r[a]=e[a])}),r}function hu(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=vu(t[n],e[t[n].ref]));return t}var ua={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},wt=" ",sa=/(italic|oblique)$/i,la={},un=function(t,e,r){var n=la[t];if(!n){Array.isArray(t)||(t=[t]);for(var a=400,i="normal",o=[],u,s,l=0,p=t.length;l<p;++l){var f=t[l],d=f.split(" "),c=d[d.length-1].toLowerCase();c=="normal"||c=="italic"||c=="oblique"?(i=s?i:c,d.pop(),c=d[d.length-1].toLowerCase()):sa.test(c)&&(c=c.replace(sa,""),i=s?i:d[d.length-1].replace(c,""));for(var x in ua){var g=d.length>1?d[d.length-2].toLowerCase():"";if(c==x||c==x.replace("-","")||g+"-"+c==x){a=u?a:ua[x],d.pop(),g&&x.startsWith(g)&&d.pop();break}}!u&&typeof c=="number"&&(a=c);var _=d.join(wt).replace("Klokantech Noto Sans","Noto Sans");_.indexOf(wt)!==-1&&(_='"'+_+'"'),o.push(_)}n=la[t]=[i,a,o]}return n[0]+wt+n[1]+wt+e+"px"+(r?"/"+r:"")+wt+n[2]},Ba="https://api.mapbox.com";function Tn(t){var e="mapbox://";return t.indexOf(e)!==0?"":t.slice(e.length)}function mu(t,e,r){var n=Tn(t);if(!n)return decodeURI(new URL(t,r).href);var a="sprites/";if(n.indexOf(a)!==0)throw new Error("unexpected sprites url: "+t);var i=n.slice(a.length);return Ba+"/styles/v1/"+i+"/sprite?access_token="+e}function Ha(t,e){var r=Tn(t);if(!r)return decodeURI(new URL(t,location.href).href);var n="styles/";if(r.indexOf(n)!==0)throw new Error("unexpected style url: "+t);var a=r.slice(n.length);return Ba+"/styles/v1/"+a+"?&access_token="+e}function er(t,e,r,n){var a=new URL(t,n),i=Tn(t);if(!i)return e&&a.searchParams.set(r,e),decodeURI(a.href);if(i==="mapbox.satellite"){var o=window.devicePixelRatio>=1.5?"@2x":"";return"https://api.mapbox.com/v4/"+i+"/{z}/{x}/{y}"+o+".webp?access_token="+e}return"https://{a-d}.tiles.mapbox.com/v4/"+i+"/{z}/{x}/{y}.vector.pbf?access_token="+e}var Ya=0,yu={},gu={};function bu(t){t.id||(t.id=Ya++);var e={};return yu[t.id]=e,e}function xu(t){t.id||(t.id=Ya++);var e={};return gu[t.id]=e,e}function Yr(t){return t*Math.PI/180}var Cn=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function Qa(t,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(t,e);var r=document.createElement("canvas");return r.width=t,r.height=e,r}function wu(t,e){for(var r=0,n=e.length;r<n;++r){var a=e[r];if(a<t&&r+1<n){var i=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(i)}}return n-1}var $e={};function or(t,e,r,n){if(r===void 0&&(r={}),e in $e)return n&&(n.request=$e[e][0]),$e[e][1];var a=r.transformRequest?r.transformRequest(e,t)||new Request(e):new Request(e);a.headers.get("Accept")||a.headers.set("Accept","application/json"),n&&(n.request=a);var i=fetch(a).then(function(o){return delete $e[e],o.ok?o.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(o){return delete $e[e],Promise.reject(new Error("Error fetching source "+e))});return $e[e]=[a,i],i}function zu(t,e){if(typeof t=="string")if(t.trim().startsWith("{"))try{var r=JSON.parse(t);return Promise.resolve(r)}catch(n){return Promise.reject(n)}else return t=Ha(t,e.accessToken),or("Style",t,e);else return Promise.resolve(t)}function pa(t,e){if(e.transformRequest){var r=e.transformRequest(t,"Tiles");if(r instanceof Request)return decodeURI(r.url)}return t}var fa={};function ku(t,e,r){r===void 0&&(r={});var n=[e,JSON.stringify(t)].toString(),a=fa[n];if(!a||r.transformRequest){var i=t.url;if(i&&!t.tiles){var o=er(i,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(i.startsWith("mapbox://"))a=Promise.resolve(Object.assign({},t,{url:void 0,tiles:wi(o)}));else{var u={};a=or("Source",o,r,u).then(function(s){return s.tiles=s.tiles.map(function(l){return pa(er(l,r.accessToken,r.accessTokenParam||"access_token",u.request.url),r)}),Promise.resolve(s)})}}else t=Object.assign({},t,{tiles:t.tiles.map(function(s){return pa(er(s,r.accessToken,r.accessTokenParam||"access_token",e||location.href),r)})}),a=Promise.resolve(Object.assign({},t));fa[n]=a}return a}function Tu(t,e,r,n){var a=document.createElement("canvas"),i=[2*r*e.pixelRatio+e.width,2*r*e.pixelRatio+e.height];a.width=i[0],a.height=i[1];var o=a.getContext("2d");o.drawImage(t,e.x,e.y,e.width,e.height,r*e.pixelRatio,r*e.pixelRatio,e.width,e.height);var u=o.getImageData(0,0,i[0],i[1]);o.globalCompositeOperation="destination-over",o.fillStyle="rgba("+n.r*255+","+n.g*255+","+n.b*255+","+n.a+")";for(var s=u.data,l=0,p=u.width;l<p;++l)for(var f=0,d=u.height;f<d;++f){var c=(f*p+l)*4,x=s[c+3];x>0&&o.arc(l,f,r*e.pixelRatio,0,2*Math.PI)}return o.fill(),a}var Cu=Array(256).join("\u200A");function sn(t,e){if(e>=.05){for(var r="",n=t.split(`
`),a=Cu.slice(0,Math.round(e/.1)),i=0,o=n.length;i<o;++i)i>0&&(r+=`
`),r+=n[i].split("").join(a);return r}return t}var Qr;function Ka(){return Qr||(Qr=Qa(1,1).getContext("2d")),Qr}function Ee(t,e){return Ka().measureText(t).width+(t.length-1)*e}var da={};function ln(t,e,r,n){if(t.indexOf(`
`)!==-1){for(var a=t.split(`
`),i=[],o=0,u=a.length;o<u;++o)i.push(ln(a[o],e,r,n));return i.join(`
`)}var s=r+","+e+","+t+","+n,l=da[s];if(!l){var p=t.split(" ");if(p.length>1){var f=Ka();f.font=e;for(var d=f.measureText("M").width,c=d*r,x="",g=[],_=0,h=p.length;_<h;++_){var I=p[_],q=x+(x?" ":"")+I;Ee(q,n)<=c?x=q:(x&&g.push(x),x=I)}x&&g.push(x);for(var M=0,V=g.length;M<V&&V>1;++M){var G=g[M];if(Ee(G,n)<c*.35){var S=M>0?Ee(g[M-1],n):1/0,D=M<V-1?Ee(g[M+1],n):1/0;g.splice(M,1),V-=1,S<D?(g[M-1]+=" "+G,M-=1):g[M]=G+" "+g[M]}}for(var R=0,O=g.length-1;R<O;++R){var P=g[R],Q=g[R+1];if(Ee(P,n)>c*.7&&Ee(Q,n)<c*.6){var ne=P.split(" "),N=ne.pop();Ee(N,n)<c*.2&&(g[R]=ne.join(" "),g[R+1]=N+" "+Q),O-=1}}l=g.join(`
`)}else l=t;l=sn(l,n),da[s]=l}return l}var Eu=/font-family: ?([^;]*);/,_u=/("|')/g,Yt;function Mu(t){if(!Yt){Yt={};for(var e=document.styleSheets,r=0,n=e.length;r<n;++r){var a=e[r];try{var i=a.rules||a.cssRules;if(i)for(var o=0,u=i.length;o<u;++o){var s=i[o];if(s.type==5){var l=s.cssText.match(Eu);Yt[l[1].replace(_u,"")]=!0}}}catch{}}}return t in Yt}var Kr={};function qu(t){var e=t.toString();if(e in Kr)return Kr[e];for(var r=[],n=0,a=t.length;n<a;++n){t[n]=t[n].replace("Arial Unicode MS","Arial");var i=t[n],o=un(i,1);gi(o);var u=o.split(" ");r.push([u.slice(3).join(" ").replace(/"/g,""),u[1],u[0]])}for(var s=0,l=r.length;s<l;++s){var p=r[s],f=p[0];if(!Mu(f)&&bi.get(p[2]+`
`+p[1]+` 
`+f)!==100){var d="https://fonts.googleapis.com/css?family="+f.replace(/ /g,"+")+":"+p[1]+p[2];if(!document.querySelector('link[href="'+d+'"]')){var c=document.createElement("link");c.href=d,c.rel="stylesheet",document.head.appendChild(c)}}}return Kr[e]=t,t}var Su={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Fu={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Au=function(t,e){var r=ru(t,e);if(r.result==="error")throw new Error(r.value.map(function(n){return n.key+": "+n.message}).join(", "));return r.value},pn={},ur={zoom:0},Qt,Wr;function z(t,e,r,n,a,i,o){var u=t.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[u]||(i[u]={});var s=i[u];if(!s[r]){var l=(t[e]||pn)[r],p=Za[e+"_"+t.type][r];l===void 0&&(l=p.default);var f=tu(l);if(!f&&Va(l)&&(l=Vi(l,p),f=!0),f){var d=Au(l,p);s[r]=d.evaluate.bind(d)}else p.type=="color"&&(l=Y.parse(l)),s[r]=function(){return l}}return ur.zoom=n,s[r](ur,a,o)}function Iu(t,e,r,n){var a=z(t,"layout","icon-allow-overlap",e,r,n);if(!a)return"declutter";var i=z(t,"layout","icon-ignore-placement",e,r,n);return i?"none":"obstacle"}function Du(t,e,r,n,a){return a||console.warn("No filterCache provided to evaluateFilter()"),t in a||(a[t]=ou(e).filter),ur.zoom=n,a[t](ur,r)}function _e(t,e){if(t){if(t.a===0||e===0)return;var r=t.a;return e=e===void 0?1:e,r===0?"transparent":"rgba("+Math.round(t.r*255/r)+","+Math.round(t.g*255/r)+","+Math.round(t.b*255/r)+","+r*e+")"}return t}var Pu=/\{[^{}}]*\}/g;function $r(t,e){return t.replace(Pu,function(r){return e[r.slice(1,-1)]||""})}function Ru(t,e,r,n,a,i,o,u){if(n===void 0&&(n=Cn),a===void 0&&(a=void 0),i===void 0&&(i=void 0),o===void 0&&(o=void 0),u===void 0&&(u=void 0),typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");var s,l;if(i){if(typeof Image<"u"){var p=new Image;p.crossOrigin="anonymous",p.onload=function(){s=p,l=[p.width,p.height],t.changed(),p.onload=null},p.src=i}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){var f=self;f.postMessage({action:"loadImage",src:i}),f.addEventListener("message",function(de){de.data.action==="imageLoaded"&&de.data.src===i&&(s=de.data.image,l=[s.width,s.height])})}}for(var d=hu(e.layers),c={},x=[],g={},_={},h=bu(e),I=xu(e),q,M=0,V=d.length;M<V;++M){var G=d[M],S=G.id;if(typeof r=="string"&&G.source==r||r.indexOf(S)!==-1){var D=G["source-layer"];if(q){if(G.source!==q)throw new Error('Layer "'+S+'" does not use source "'+q)}else{q=G.source;var R=e.sources[q];if(!R)throw new Error('Source "'+q+'" is not defined');var O=R.type;if(O!=="vector"&&O!=="geojson")throw new Error('Source "'+q+'" is not of type "vector" or "geojson", but "'+O+'"')}var P=c[D];P||(P=[],c[D]=P),P.push({layer:G,index:M}),x.push(S)}}var Q=new Gt,ne=new Ut,N=[],En=function(Je,de){var ft=Je.getProperties(),dr=c[ft.layer];if(!!dr){var b=n.indexOf(de);b==-1&&(b=wu(de,n));for(var W=Su[Je.getGeometry().getType()],w={id:Je.getId(),properties:ft,type:W},k=t.get("mapbox-featurestate")[Je.getId()],j=-1,cr=0,$a=dr.length;cr<$a;++cr){var _n=dr[cr],m=_n.layer,ei=m.id,dt=m.layout||pn,ze=m.paint||pn;if(!(dt.visibility==="none"||"minzoom"in m&&b<m.minzoom||"maxzoom"in m&&b>=m.maxzoom)){var Mn=m.filter;if(!Mn||Du(ei,Mn,w,b,I)){var $=void 0,ae=void 0,At=void 0,te=void 0,ie=void 0,y=void 0,Xe=_n.index;if(W==3&&(m.type=="fill"||m.type=="fill-extrusion"))if(ae=z(m,"paint",m.type+"-opacity",b,w,h,k),m.type+"-pattern"in ze){var It=z(m,"paint",m.type+"-pattern",b,w,h,k);if(It){var vr=typeof It=="string"?$r(It,ft):It.toString();if(s&&a&&a[vr]){++j,y=N[j],(!y||!y.getFill()||y.getStroke()||y.getText())&&(y=new We({fill:new Ut}),N[j]=y),At=y.getFill(),y.setZIndex(Xe);var qn=vr+"."+ae,Dt=_[qn];if(!Dt){var ce=a[vr],Sn=Qa(ce.width,ce.height),hr=Sn.getContext("2d");hr.globalAlpha=ae,hr.drawImage(s,ce.x,ce.y,ce.width,ce.height,0,0,ce.width,ce.height),Dt=hr.createPattern(Sn,"repeat"),_[qn]=Dt}At.setColor(Dt)}}}else $=_e(z(m,"paint",m.type+"-color",b,w,h,k),ae),m.type+"-outline-color"in ze&&(ie=_e(z(m,"paint",m.type+"-outline-color",b,w,h,k),ae)),ie||(ie=$),($||ie)&&(++j,y=N[j],(!y||$&&!y.getFill()||!$&&y.getFill()||ie&&!y.getStroke()||!ie&&y.getStroke()||y.getText())&&(y=new We({fill:$?new Ut:void 0,stroke:ie?new Gt:void 0}),N[j]=y),$&&(At=y.getFill(),At.setColor($)),ie&&(te=y.getStroke(),te.setColor(ie),te.setWidth(.5)),y.setZIndex(Xe));if(W!=1&&m.type=="line"){$=!("line-pattern"in ze)&&"line-color"in ze?_e(z(m,"paint","line-color",b,w,h,k),z(m,"paint","line-opacity",b,w,h,k)):void 0;var mr=z(m,"paint","line-width",b,w,h,k);$&&mr>0&&(++j,y=N[j],(!y||!y.getStroke()||y.getFill()||y.getText())&&(y=new We({stroke:new Gt}),N[j]=y),te=y.getStroke(),te.setLineCap(z(m,"layout","line-cap",b,w,h,k)),te.setLineJoin(z(m,"layout","line-join",b,w,h,k)),te.setMiterLimit(z(m,"layout","line-miter-limit",b,w,h,k)),te.setColor($),te.setWidth(mr),te.setLineDash(ze["line-dasharray"]?z(m,"paint","line-dasharray",b,w,h,k).map(function(B){return B*mr}):null),y.setZIndex(Xe))}var Pt=!1,F=null,Fn=0,ct=void 0,X=void 0,yr=void 0;if((W==1||W==2)&&"icon-image"in dt){var Rt=z(m,"layout","icon-image",b,w,h,k);if(Rt){ct=typeof Rt=="string"?$r(Rt,ft):Rt.toString();var gr=void 0,ke=u?u(t,ct):void 0;if(s&&a&&a[ct]||ke){var br=z(m,"layout","icon-rotation-alignment",b,w,h,k);if(W==2){var ve=Je.getGeometry();if(ve.getFlatMidpoint||ve.getFlatMidpoints){var Nt=ve.getExtent(),ti=Math.sqrt(Math.max(Math.pow((Nt[2]-Nt[0])/de,2),Math.pow((Nt[3]-Nt[1])/de,2)));if(ti>150){var Be=ve.getType()==="MultiLineString"?ve.getFlatMidpoints():ve.getFlatMidpoint();Wr||(Qt=[NaN,NaN],Wr=new Fi("Point",Qt,[],{},null)),gr=Wr,Qt[0]=Be[0],Qt[1]=Be[1];var ri=z(m,"layout","symbol-placement",b,w,h,k);if(ri==="line"&&br==="map")for(var jt=ve.getStride(),vt=ve.getFlatCoordinates(),He=0,ni=vt.length-jt;He<ni;He+=jt){var xr=vt[He],wr=vt[He+1],zr=vt[He+jt],kr=vt[He+jt+1],ai=Math.min(xr,zr),ii=Math.min(wr,kr),oi=Math.max(xr,zr),ui=Math.max(wr,kr);if(Be[0]>=ai&&Be[0]<=oi&&Be[1]>=ii&&Be[1]<=ui){Fn=Math.atan2(wr-kr,zr-xr);break}}}}}if(W!==2||gr){var An=z(m,"layout","icon-size",b,w,h,k),oe=ze["icon-color"]!==void 0?z(m,"paint","icon-color",b,w,h,k):null;if(!oe||oe.a!==0){var In=z(m,"paint","icon-halo-color",b,w,h,k),Tr=z(m,"paint","icon-halo-width",b,w,h,k),Cr=ct+"."+An+"."+Tr+"."+In;if(oe!==null&&(Cr+="."+oe),X=g[Cr],!X){var Dn=Iu(m,b,w,h),Ot=void 0;"icon-offset"in dt&&(Ot=z(m,"layout","icon-offset",b,w,h,k),Ot[1]*=-1);var Pn=oe?[oe.r*255,oe.g*255,oe.b*255,oe.a]:void 0;if(ke){var Lt={color:Pn,rotateWithView:br==="map",displacement:Ot,declutterMode:Dn};typeof ke=="string"?Lt.src=ke:(Lt.img=ke,Lt.imgSize=[ke.width,ke.height]),X=new Hn(Lt)}else{var Ye=a[ct],ht=void 0,Er=void 0,Rn=void 0,Nn=void 0;Tr?(ht=Tu(s,Ye,Tr,In),Er=[ht.width,ht.height]):(ht=s,Er=l,Rn=[Ye.width,Ye.height],Nn=[Ye.x,Ye.y]),X=new Hn({color:Pn,img:ht,imgSize:Er,size:Rn,offset:Nn,rotateWithView:br==="map",scale:An/Ye.pixelRatio,displacement:Ot,declutterMode:Dn})}g[Cr]=X}}X&&(++j,y=N[j],(!y||!y.getImage()||y.getFill()||y.getStroke())&&(y=new We,N[j]=y),y.setGeometry(gr),X.setRotation(Fn+Yr(z(m,"layout","icon-rotate",b,w,h,k))),X.setOpacity(z(m,"paint","icon-opacity",b,w,h,k)),X.setAnchor(Fu[z(m,"layout","icon-anchor",b,w,h,k)]),y.setImage(X),F=y.getText(),y.setText(void 0),y.setZIndex(Xe),Pt=!0,yr=!1)}else yr=!0}}}if(W==1&&m.type==="circle"){++j,y=N[j],(!y||!y.getImage()||y.getFill()||y.getStroke())&&(y=new We,N[j]=y);var jn="circle-radius"in ze?z(m,"paint","circle-radius",b,w,h,k):5,_r=_e(z(m,"paint","circle-stroke-color",b,w,h,k),z(m,"paint","circle-stroke-opacity",b,w,h,k)),Mr=_e(z(m,"paint","circle-color",b,w,h,k),z(m,"paint","circle-opacity",b,w,h,k)),qr=z(m,"paint","circle-stroke-width",b,w,h,k),On=jn+"."+_r+"."+Mr+"."+qr;X=g[On],X||(X=new zi({radius:jn,stroke:_r&&qr>0?new Gt({width:qr,color:_r}):void 0,fill:Mr?new Ut({color:Mr}):void 0,declutterMode:"none"}),g[On]=X),y.setImage(X),F=y.getText(),y.setText(void 0),y.setGeometry(void 0),y.setZIndex(Xe),Pt=!0}var U=void 0,mt=void 0,yt=void 0,he=void 0,gt=void 0,Sr=void 0;if("text-field"in dt){he=Math.round(z(m,"layout","text-size",b,w,h,k));var Fr=z(m,"layout","text-font",b,w,h,k);yt=z(m,"layout","text-line-height",b,w,h,k),mt=un(o?o(Fr):Fr,he,yt),mt.includes("sans-serif")||(mt+=",sans-serif"),gt=z(m,"layout","text-letter-spacing",b,w,h,k),Sr=z(m,"layout","text-max-width",b,w,h,k);var Qe=z(m,"layout","text-field",b,w,h,k);typeof Qe=="object"&&Qe.sections?Qe.sections.length===1?U=Qe.toString():U=Qe.sections.reduce(function(B,me,Ju){var Bn=me.fontStack?me.fontStack.split(","):Fr,Nr=un(o?o(Bn):Bn,he*(me.scale||1),yt),Ke=me.text;if(Ke===`
`)return B.push(`
`,""),B;if(W==2){B.push(sn(Ke,gt),Nr);return}Ke=ln(Ke,Nr,Sr,gt).split(`
`);for(var Zt=0,pi=Ke.length;Zt<pi;++Zt)Zt>0&&B.push(`
`,""),B.push(Ke[Zt],Nr);return B},[]):U=$r(Qe,ft).trim(),ae=z(m,"paint","text-opacity",b,w,h,k)}if(U&&ae&&!yr){Pt||(++j,y=N[j],(!y||!y.getText()||y.getFill()||y.getStroke())&&(y=new We,N[j]=y),y.setImage(void 0),y.setGeometry(void 0)),y.getText()||y.setText(F||new ki({padding:[2,2,2,2]})),F=y.getText();var Ln=dt["text-transform"];Ln=="uppercase"?U=Array.isArray(U)?U.map(function(B,me){return me%2?B:B.toUpperCase()}):U.toUpperCase():Ln=="lowercase"&&(U=Array.isArray(U)?U.map(function(B,me){return me%2?B:B.toLowerCase()}):U.toLowerCase());var Vn=Array.isArray(U)?U:W==2?sn(U,gt):ln(U,mt,Sr,gt);F.setText(Vn),F.setFont(mt),F.setRotation(Yr(z(m,"layout","text-rotate",b,w,h,k)));var Vt=z(m,"layout","text-anchor",b,w,h,k),Ar=Pt||W==1?"point":z(m,"layout","symbol-placement",b,w,h,k);if(F.setPlacement(Ar),typeof F.setRepeat=="function"){var si=z(m,"layout","symbol-spacing",b,w,h,k);F.setRepeat(si*2)}F.setOverflow(Ar==="point");var Te=z(m,"paint","text-halo-width",b,w,h,k),Zn=z(m,"layout","text-offset",b,w,h,k),Gn=z(m,"paint","text-translate",b,w,h,k),Ir=0,Dr=0;if(Ar=="point"){var Pr="center";Vt.indexOf("left")!==-1?(Pr="left",Dr=Te):Vt.indexOf("right")!==-1&&(Pr="right",Dr=-Te),F.setTextAlign(Pr);var li=z(m,"layout","text-rotation-alignment",b,w,h,k);F.setRotateWithView(li=="map")}else F.setMaxAngle(Yr(z(m,"layout","text-max-angle",b,w,h,k))*U.length/Vn.length),F.setTextAlign(),F.setRotateWithView(!1);var Rr="middle";Vt.indexOf("bottom")==0?(Rr="bottom",Ir=-Te-.5*(yt-1)*he):Vt.indexOf("top")==0&&(Rr="top",Ir=Te+.5*(yt-1)*he),F.setTextBaseline(Rr);var Un=z(m,"layout","text-justify",b,w,h,k);F.setJustify(Un==="auto"?void 0:Un),F.setOffsetX(Zn[0]*he+Dr+Gn[0]),F.setOffsetY(Zn[1]*he+Ir+Gn[1]),ne.setColor(_e(z(m,"paint","text-color",b,w,h,k),ae)),F.setFill(ne);var Jn=_e(z(m,"paint","text-halo-color",b,w,h,k),ae);if(Jn){Q.setColor(Jn),Te*=2;var Xn=.5*he;Q.setWidth(Te<=Xn?Te:Xn),F.setStroke(Q)}else F.setStroke(void 0);var bt=z(m,"layout","text-padding",b,w,h,k),xt=F.getPadding();bt!==xt[0]&&(xt[0]=bt,xt[1]=bt,xt[2]=bt,xt[3]=bt),y.setZIndex(Xe)}}}}if(j>-1)return N.length=j+1,N}};return t.setStyle(En),t.set("mapbox-source",q),t.set("mapbox-layers",x),t.set("mapbox-featurestate",{}),En}function Nu(t,e){return e===void 0&&(e=512),t.getExtent()?ca({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Cn}function ju(t,e){if(!e.accessToken){e=Object.assign({},e);var r=new URL(t).searchParams;r.forEach(function(n,a){e.accessToken=n,e.accessTokenParam=a})}return e}function Ou(t,e,r,n,a){r===void 0&&(r=""),n===void 0&&(n={}),a===void 0&&(a=void 0);var i,o,u,s,l=!0;return typeof r!="string"&&!Array.isArray(r)?(u=r,s=u.source||u.layers,n=u):s=r,typeof n=="string"?(i=n,u={}):(i=n.styleUrl,u=n),u.updateSource===!1&&(l=!1),a||(a=u.resolutions),!i&&typeof e=="string"&&!e.trim().startsWith("{")&&(i=e),i&&(i=i.startsWith("data:")?location.href:Ha(i,u.accessToken),u=ju(i,u)),new Promise(function(p,f){zu(e,u).then(function(d){if(d.version!=8)return f(new Error("glStyle version 8 required."));if(!(t instanceof Pi||t instanceof Wt))return f(new Error("Can only apply to VectorLayer or VectorTileLayer"));var c=t instanceof Wt?"vector":"geojson";if(s?Array.isArray(s)?o=d.layers.find(function(S){return S.id===s[0]}).source:o=s:(o=Object.keys(d.sources).find(function(S){return d.sources[S].type===c}),s=o),!o)return f(new Error("No "+c+" source found in the glStyle."));function x(){if(!l)return Promise.resolve();if(t instanceof Wt)return Zu(d.sources[o],i,u).then(function(O){var P=t.getSource();if(P?O!==P&&(P.setTileUrlFunction(O.getTileUrlFunction()),P.format_||(P.format_=O.format_),P.getAttributions()||P.setAttributions(O.getAttributions()),P.getTileLoadFunction()===qi&&P.setTileLoadFunction(O.getTileLoadFunction()),xi(P.getProjection(),O.getProjection())&&(P.tileGrid=O.getTileGrid())):t.setSource(O),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var Q=t.getSource().getTileGrid();t.setMaxResolution(Q.getResolution(Q.getMinZoom()))}});var S=d.sources[o],D=t.getSource();(!D||D.get("mapbox-source")!==S)&&(D=Uu(S,i,u));var R=t.getSource();return R?D!==R&&(R.getAttributions()||R.setAttributions(D.getAttributions()),R.format_||(R.format_=D.getFormat()),R.url_=D.getUrl()):t.setSource(D),Promise.resolve()}var g,_,h,I;function q(){if(!I&&(!d.sprite||_)){if(u.projection&&!a){var S=Tt(u.projection),D=S.getUnits();D!=="m"&&(a=Cn.map(function(R){return R/yi[D]}))}I=Ru(t,d,s,a,_,h,qu,u.getImage),t.getStyle()?x().then(p).catch(f):f(new Error("Nothing to show for source ["+o+"]"))}else I?(t.setStyle(I),x().then(p).catch(f)):f(new Error("Something went wrong trying to apply style."))}if(d.sprite){var M=new URL(mu(d.sprite,u.accessToken,i||location.href));g=window.devicePixelRatio>=1.5?.5:1;var V=g==.5?"@2x":"",G=M.origin+M.pathname+V+".json"+M.search;new Promise(function(S,D){or("Sprite",G,u).then(S).catch(function(R){G=M.origin+M.pathname+".json"+M.search,or("Sprite",G,u).then(S).catch(D)})}).then(function(S){if(S===void 0&&f(new Error("No sprites found.")),_=S,h=M.origin+M.pathname+V+".png"+M.search,u.transformRequest){var D=u.transformRequest(h,"SpriteImage");D instanceof Request&&(h=encodeURI(D.url))}q()}).catch(function(S){f(new Error("Sprites cannot be loaded: "+G+": "+S.message))})}else q()}).catch(f)})}function Lu(t,e){var r=t.bounds;if(r){var n=Yn([r[0],r[1]],e),a=Yn([r[2],r[3]],e);return[n[0],n[1],a[0],a[1]]}return Tt(e).getExtent()}function Vu(t,e,r){var n=new ji({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),a=n.getTileJSON(),i=n.getTileGrid(),o=Tt(r.projection||"EPSG:3857"),u=Lu(a,o),s=o.getExtent(),l=a.minzoom||0,p=a.maxzoom||22,f={attributions:n.getAttributions(),projection:o,tileGrid:new Ti({origin:s?Ci(s):i.getOrigin(0),extent:u||i.getExtent(),minZoom:l,resolutions:Nu(o,e.tileSize).slice(0,p+1),tileSize:i.getTileSize(0)})};return Array.isArray(a.tiles)?f.urls=a.tiles:f.url=a.tiles,f}function Zu(t,e,r){return new Promise(function(n,a){ku(t,e,r).then(function(i){var o=Vu(t,i,r);o.format=new va,Array.isArray(i.tiles)?o.urls=i.tiles:o.url=i.tiles,n(new Si(o))}).catch(a)})}function Gu(t){var e=t?t.getCode():"EPSG:3857";return"{bbox-"+e.toLowerCase().replace(/[^a-z0-9]/g,"-")+"}"}var Kt=new Di;function Uu(t,e,r){var n=t.data,a={};if(typeof n=="string"){var i=er(n,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(r.transformRequest){var o=r.transformRequest(i,"GeoJSON");o instanceof Request&&(i=decodeURI(o.url))}if(/\{bbox-[0-9a-z-]+\}/.test(i)){var u=function(p,f,d){var c=Gu(d);return i.replace(c,""+p.join(","))},s=new jr({attributions:t.attribution,format:Kt,url:u,strategy:Ri});return s.set("mapbox-source",t),s}return new jr({attributions:t.attribution,format:Kt,url:i})}a.features=Kt.readFeatures(n,{featureProjection:"EPSG:3857"});var l=new jr(Object.assign({attributions:t.attribution,format:Kt},a));return l.set("mapbox-source",t),l}const Wa=new Wt({declutter:!0,source:new Ai({url:"https://maps.gnosis.earth/ogcapi/collections/NaturalEarth:cultural:ne_10m_admin_0_countries/tiles/WebMercatorQuad",format:new va})});Ou(Wa,"https://maps.gnosis.earth/ogcapi/collections/NaturalEarth:cultural:ne_10m_admin_0_countries/styles/default.json?f=mapbox",{updateSource:!1,transformRequest(t,e){if(e==="Sprite")return new Request("data:application/json;utf8,{}")}});new Ei({target:"map",layers:[Wa],view:new _i({center:[0,0],zoom:1})});
